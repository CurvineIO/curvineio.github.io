<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Deploy/Deploy-Curvine-Cluster/Distributed-Mode/k8s-Deployment" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.0">
<title data-rh="true">k8s Deployment | Curvine</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://curvineio.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://curvineio.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://curvineio.github.io/docs/Deploy/Deploy-Curvine-Cluster/Distributed-Mode/k8s-Deployment"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" property="og:locale:alternate" content="zh_cn"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="k8s Deployment | Curvine"><meta data-rh="true" name="description" content="This chapter introduces how to deploy Curvine distributed storage cluster on Kubernetes using production-grade Helm Chart."><meta data-rh="true" property="og:description" content="This chapter introduces how to deploy Curvine distributed storage cluster on Kubernetes using production-grade Helm Chart."><link data-rh="true" rel="icon" href="/img/curvine_logo.ico"><link data-rh="true" rel="canonical" href="https://curvineio.github.io/docs/Deploy/Deploy-Curvine-Cluster/Distributed-Mode/k8s-Deployment"><link data-rh="true" rel="alternate" href="https://curvineio.github.io/docs/Deploy/Deploy-Curvine-Cluster/Distributed-Mode/k8s-Deployment" hreflang="en"><link data-rh="true" rel="alternate" href="https://curvineio.github.io/zh-cn/docs/Deploy/Deploy-Curvine-Cluster/Distributed-Mode/k8s-Deployment" hreflang="zh-cn"><link data-rh="true" rel="alternate" href="https://curvineio.github.io/docs/Deploy/Deploy-Curvine-Cluster/Distributed-Mode/k8s-Deployment" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"k8s Deployment","item":"https://curvineio.github.io/docs/Deploy/Deploy-Curvine-Cluster/Distributed-Mode/k8s-Deployment"}]}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Curvine RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Curvine Atom Feed"><link rel="stylesheet" href="/assets/css/styles.b44d61cb.css">
<script src="/assets/js/runtime~main.7bb5a749.js" defer="defer"></script>
<script src="/assets/js/main.1d50a167.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/curvine_logo.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/curvine_logo.png" alt="Curvine" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/curvine_logo.png" alt="Curvine" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Curvine</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/Overview/instroduction">Documents</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/community">Community</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/Deploy/Deploy-Curvine-Cluster/Distributed-Mode/k8s-Deployment">Latest ðŸš§</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/docs/Deploy/Deploy-Curvine-Cluster/Distributed-Mode/k8s-Deployment" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="/zh-cn/docs/Deploy/Deploy-Curvine-Cluster/Distributed-Mode/k8s-Deployment" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh-cn">ç®€ä½“ä¸­æ–‡</a></li></ul></div><a href="https://github.com/curvineio/curvine" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/Overview/instroduction">Overview</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/Deploy/quick-start">Deploy</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Deploy/quick-start">Quick Start</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docs/Deploy/Deploy-Curvine-Cluster/Preparation/compile">Deploy Curvine Cluster</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/Deploy/Deploy-Curvine-Cluster/Preparation/compile">Preparation</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Deploy/Deploy-Curvine-Cluster/Standalone-Mode">Standalone Mode</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docs/Deploy/Deploy-Curvine-Cluster/Distributed-Mode/k8s-Deployment">Distributed Mode</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/Deploy/Deploy-Curvine-Cluster/Distributed-Mode/k8s-Deployment">k8s Deployment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Deploy/Deploy-Curvine-Cluster/Distributed-Mode/Bare-Metal-Deployment">Bare Metal Deployment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Deploy/Deploy-Curvine-Cluster/Distributed-Mode/conf">Configuration Reference</a></li></ul></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/user-manuals">User Manuals</a><button aria-label="Expand sidebar category &#x27;User Manuals&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/benchmark">Benchmark</a><button aria-label="Expand sidebar category &#x27;Benchmark&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/architecture">Architecture</a><button aria-label="Expand sidebar category &#x27;Architecture&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/contributor-guide">Contributor Guide</a><button aria-label="Expand sidebar category &#x27;Contributor Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Deploy</span></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Deploy Curvine Cluster</span></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Distributed Mode</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">k8s Deployment</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>k8s Deployment</h1></header>
<p>This chapter introduces how to deploy Curvine distributed storage cluster on Kubernetes using production-grade Helm Chart.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a href="#prerequisites" class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites">â€‹</a></h2>
<ul>
<li>Kubernetes 1.20+</li>
<li>Helm 3.0+</li>
<li>PV provisioner (if using PVC storage)</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="quick-start">Quick Start<a href="#quick-start" class="hash-link" aria-label="Direct link to Quick Start" title="Direct link to Quick Start">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-load-images-into-kubernetes-cluster">1. Load Images into Kubernetes Cluster<a href="#1-load-images-into-kubernetes-cluster" class="hash-link" aria-label="Direct link to 1. Load Images into Kubernetes Cluster" title="Direct link to 1. Load Images into Kubernetes Cluster">â€‹</a></h3>
<p>Refer to <a href="/docs/Deploy/Deploy-Curvine-Cluster/Preparation/compile#docker-compilation">docker compile</a> to build images and import them into the Kubernetes cluster.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-add-helm-repository-optional">2. Add Helm Repository (Optional)<a href="#2-add-helm-repository-optional" class="hash-link" aria-label="Direct link to 2. Add Helm Repository (Optional)" title="Direct link to 2. Add Helm Repository (Optional)">â€‹</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># If Chart is published to repository</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">helm repo add curvine https://curvineio.github.io/helm-charts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">helm repo update</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-install-chart">3. Install Chart<a href="#3-install-chart" class="hash-link" aria-label="Direct link to 3. Install Chart" title="Direct link to 3. Install Chart">â€‹</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="option-a-install-from-helm-repository-recommended">Option A: Install from Helm Repository (Recommended)<a href="#option-a-install-from-helm-repository-recommended" class="hash-link" aria-label="Direct link to Option A: Install from Helm Repository (Recommended)" title="Direct link to Option A: Install from Helm Repository (Recommended)">â€‹</a></h4>
<blockquote>
<p><strong>Note</strong>: The current Helm version provided is based on the main branch and is intended for pre-release use only. To install, you must specify the --devel flag</p>
</blockquote>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Install with default configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">helm install curvine curvine/curvine -n curvine --create-namespace --devel</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Install with custom replica count</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">helm install curvine curvine/curvine -n curvine --create-namespace --devel \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set master.replicas=5 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set worker.replicas=10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Install with custom values file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">helm install curvine curvine/curvine -n curvine --create-namespace --devel \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -f https://curvineio.github.io/helm/charts/examples/values-prod.yaml</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="option-b-install-from-local-chart">Option B: Install from Local Chart<a href="#option-b-install-from-local-chart" class="hash-link" aria-label="Direct link to Option B: Install from Local Chart" title="Direct link to Option B: Install from Local Chart">â€‹</a></h4>
<blockquote>
<p><strong>Note</strong>: Run these commands from the <code>helm-charts</code> directory (parent directory of <code>curvine-runtime</code> folder)</p>
</blockquote>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Install with default configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">helm install curvine ./curvine-runtime -n curvine --create-namespace</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Install with custom replica count</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">helm install curvine ./curvine-runtime -n curvine --create-namespace \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set master.replicas=5 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set worker.replicas=10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Install with custom values file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">helm install curvine ./curvine-runtime -n curvine --create-namespace \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -f ./curvine-runtime/examples/values-prod.yaml</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-verify-deployment">4. Verify Deployment<a href="#4-verify-deployment" class="hash-link" aria-label="Direct link to 4. Verify Deployment" title="Direct link to 4. Verify Deployment">â€‹</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Check Pod status</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get pods -n curvine</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># View Services</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get svc -n curvine</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># View PersistentVolumeClaims</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get pvc -n curvine</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Run Helm tests</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">helm test curvine -n curvine</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="5-access-cluster">5. Access Cluster<a href="#5-access-cluster" class="hash-link" aria-label="Direct link to 5. Access Cluster" title="Direct link to 5. Access Cluster">â€‹</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Port forward to access Master Web UI</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl port-forward -n curvine svc/curvine-master 9000:9000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Access http://localhost:9000</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuration">Configuration<a href="#configuration" class="hash-link" aria-label="Direct link to Configuration" title="Direct link to Configuration">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="view-current-configuration">View Current Configuration<a href="#view-current-configuration" class="hash-link" aria-label="Direct link to View Current Configuration" title="Direct link to View Current Configuration">â€‹</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># View all current values</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">helm get values curvine -n curvine</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># View specific version values in YAML format</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">helm get values curvine -n curvine -o yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># View rendered manifests</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">helm get manifest curvine -n curvine</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># View Chart&#x27;s values.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat ./curvine-runtime/values.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># View specific parameters</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">helm get values curvine -n curvine | grep master.replicas</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="common-parameter-usage-examples">Common Parameter Usage Examples<a href="#common-parameter-usage-examples" class="hash-link" aria-label="Direct link to Common Parameter Usage Examples" title="Direct link to Common Parameter Usage Examples">â€‹</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="adjust-resource-limits">Adjust Resource Limits<a href="#adjust-resource-limits" class="hash-link" aria-label="Direct link to Adjust Resource Limits" title="Direct link to Adjust Resource Limits">â€‹</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Increase Master resources for high-load scenarios</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">helm install curvine ./curvine-runtime -n curvine --create-namespace \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set master.resources.requests.cpu=2000m \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set master.resources.requests.memory=4Gi \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set master.resources.limits.cpu=4000m \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set master.resources.limits.memory=8Gi</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="configure-node-affinity">Configure Node Affinity<a href="#configure-node-affinity" class="hash-link" aria-label="Direct link to Configure Node Affinity" title="Direct link to Configure Node Affinity">â€‹</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Run Master on specific nodes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">helm install curvine ./curvine-runtime -n curvine --create-namespace \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set &#x27;master.nodeSelector.node-type=master&#x27; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set &#x27;worker.nodeSelector.node-type=worker&#x27;</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="enable-worker-privileged-mode">Enable Worker Privileged Mode<a href="#enable-worker-privileged-mode" class="hash-link" aria-label="Direct link to Enable Worker Privileged Mode" title="Direct link to Enable Worker Privileged Mode">â€‹</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Enabled by default, but can be disabled if needed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">helm install curvine ./curvine-runtime -n curvine --create-namespace \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set worker.privileged=false</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="configure-multiple-data-directories-for-worker">Configure Multiple Data Directories for Worker<a href="#configure-multiple-data-directories-for-worker" class="hash-link" aria-label="Direct link to Configure Multiple Data Directories for Worker" title="Direct link to Configure Multiple Data Directories for Worker">â€‹</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Create values-multi-data.yaml with the following content:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># worker:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#   storage:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#     dataDirs:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#       - name: &quot;data1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#         type: &quot;SSD&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#         enabled: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#         size: &quot;100Gi&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#         storageClass: &quot;fast-ssd&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#         mountPath: &quot;/data/data1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#       - name: &quot;data2&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#         type: &quot;HDD&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#         enabled: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#         size: &quot;500Gi&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#         storageClass: &quot;slow-hdd&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#         mountPath: &quot;/data/data2&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">helm install curvine ./curvine-runtime -n curvine --create-namespace \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -f values-multi-data.yaml</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="adjust-log-level">Adjust Log Level<a href="#adjust-log-level" class="hash-link" aria-label="Direct link to Adjust Log Level" title="Direct link to Adjust Log Level">â€‹</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Set log level to DEBUG for troubleshooting</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">helm install curvine ./curvine-runtime -n curvine --create-namespace \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set config.log.level=DEBUG</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="configure-external-master-service">Configure External Master Service<a href="#configure-external-master-service" class="hash-link" aria-label="Direct link to Configure External Master Service" title="Direct link to Configure External Master Service">â€‹</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Expose Master Service via LoadBalancer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">helm install curvine ./curvine-runtime -n curvine --create-namespace \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set service.masterExternal.enabled=true \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set service.masterExternal.type=LoadBalancer</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-parameters">Configuration Parameters<a href="#configuration-parameters" class="hash-link" aria-label="Direct link to Configuration Parameters" title="Direct link to Configuration Parameters">â€‹</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="global-parameters">Global Parameters<a href="#global-parameters" class="hash-link" aria-label="Direct link to Global Parameters" title="Direct link to Global Parameters">â€‹</a></h4>
<table><thead><tr><th style="text-align:left">Parameter</th><th style="text-align:left">Description</th><th style="text-align:left">Default Value</th></tr></thead><tbody><tr><td style="text-align:left">global.clusterDomain</td><td style="text-align:left">Kubernetes cluster domain</td><td style="text-align:left">cluster.local</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="cluster-parameters">Cluster Parameters<a href="#cluster-parameters" class="hash-link" aria-label="Direct link to Cluster Parameters" title="Direct link to Cluster Parameters">â€‹</a></h4>
<table><thead><tr><th style="text-align:left">Parameter</th><th style="text-align:left">Description</th><th style="text-align:left">Default Value</th></tr></thead><tbody><tr><td style="text-align:left">cluster.id</td><td style="text-align:left">Cluster identifier</td><td style="text-align:left">curvine</td></tr><tr><td style="text-align:left">cluster.formatMaster</td><td style="text-align:left">Format Master data on startup</td><td style="text-align:left">false</td></tr><tr><td style="text-align:left">cluster.formatWorker</td><td style="text-align:left">Format Worker data on startup</td><td style="text-align:left">false</td></tr><tr><td style="text-align:left">cluster.formatJournal</td><td style="text-align:left">Format journal data on startup</td><td style="text-align:left">false</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="image-configuration">Image Configuration<a href="#image-configuration" class="hash-link" aria-label="Direct link to Image Configuration" title="Direct link to Image Configuration">â€‹</a></h4>
<table><thead><tr><th style="text-align:left">Parameter</th><th style="text-align:left">Description</th><th style="text-align:left">Default Value</th></tr></thead><tbody><tr><td style="text-align:left">image.repository</td><td style="text-align:left">Container image repository</td><td style="text-align:left">docker.io/curvine</td></tr><tr><td style="text-align:left">image.tag</td><td style="text-align:left">Container image tag</td><td style="text-align:left">latest</td></tr><tr><td style="text-align:left">image.pullPolicy</td><td style="text-align:left">Image pull policy</td><td style="text-align:left">IfNotPresent</td></tr><tr><td style="text-align:left">image.pullSecrets</td><td style="text-align:left">Image pull secrets</td><td style="text-align:left">[]</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="master-configuration">Master Configuration<a href="#master-configuration" class="hash-link" aria-label="Direct link to Master Configuration" title="Direct link to Master Configuration">â€‹</a></h4>
<table><thead><tr><th style="text-align:left">Parameter</th><th style="text-align:left">Description</th><th style="text-align:left">Default Value</th></tr></thead><tbody><tr><td style="text-align:left">master.replicas</td><td style="text-align:left">Master replica count (must be odd: 1, 3, 5, 7...)</td><td style="text-align:left">3</td></tr><tr><td style="text-align:left">master.rpcPort</td><td style="text-align:left">RPC port</td><td style="text-align:left">8995</td></tr><tr><td style="text-align:left">master.journalPort</td><td style="text-align:left">Journal/Raft port</td><td style="text-align:left">8996</td></tr><tr><td style="text-align:left">master.webPort</td><td style="text-align:left">Web UI port</td><td style="text-align:left">9000</td></tr><tr><td style="text-align:left">master.web1Port</td><td style="text-align:left">Additional Web port</td><td style="text-align:left">9001</td></tr><tr><td style="text-align:left">master.storage.meta.enabled</td><td style="text-align:left">Enable metadata storage</td><td style="text-align:left">true</td></tr><tr><td style="text-align:left">master.storage.meta.storageClass</td><td style="text-align:left">Metadata storage class</td><td style="text-align:left">&quot;&quot; (default)</td></tr><tr><td style="text-align:left">master.storage.meta.size</td><td style="text-align:left">Metadata storage size</td><td style="text-align:left">10Gi</td></tr><tr><td style="text-align:left">master.storage.meta.hostPath</td><td style="text-align:left">Metadata host path (used when no storageClass)</td><td style="text-align:left">&quot;&quot;</td></tr><tr><td style="text-align:left">master.storage.meta.mountPath</td><td style="text-align:left">Metadata mount path</td><td style="text-align:left">/opt/curvine/data/meta</td></tr><tr><td style="text-align:left">master.storage.journal.enabled</td><td style="text-align:left">Enable journal storage</td><td style="text-align:left">true</td></tr><tr><td style="text-align:left">master.storage.journal.storageClass</td><td style="text-align:left">Journal storage class</td><td style="text-align:left">&quot;&quot; (default)</td></tr><tr><td style="text-align:left">master.storage.journal.size</td><td style="text-align:left">Journal storage size</td><td style="text-align:left">50Gi</td></tr><tr><td style="text-align:left">master.storage.journal.hostPath</td><td style="text-align:left">Journal host path (used when no storageClass)</td><td style="text-align:left">&quot;&quot;</td></tr><tr><td style="text-align:left">master.storage.journal.mountPath</td><td style="text-align:left">Journal mount path</td><td style="text-align:left">/opt/curvine/data/journal</td></tr><tr><td style="text-align:left">master.resources.requests.cpu</td><td style="text-align:left">CPU request</td><td style="text-align:left">1000m</td></tr><tr><td style="text-align:left">master.resources.requests.memory</td><td style="text-align:left">Memory request</td><td style="text-align:left">2Gi</td></tr><tr><td style="text-align:left">master.resources.limits.cpu</td><td style="text-align:left">CPU limit</td><td style="text-align:left">2000m</td></tr><tr><td style="text-align:left">master.resources.limits.memory</td><td style="text-align:left">Memory limit</td><td style="text-align:left">4Gi</td></tr><tr><td style="text-align:left">master.nodeSelector</td><td style="text-align:left">Node selector labels</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">master.tolerations</td><td style="text-align:left">Pod tolerations</td><td style="text-align:left">[]</td></tr><tr><td style="text-align:left">master.affinity</td><td style="text-align:left">Pod affinity rules</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">master.labels</td><td style="text-align:left">Additional labels</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">master.annotations</td><td style="text-align:left">Additional annotations</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">master.extraEnv</td><td style="text-align:left">Additional environment variables</td><td style="text-align:left">[]</td></tr><tr><td style="text-align:left">master.extraVolumes</td><td style="text-align:left">Additional volumes</td><td style="text-align:left">[]</td></tr><tr><td style="text-align:left">master.extraVolumeMounts</td><td style="text-align:left">Additional volume mounts</td><td style="text-align:left">[]</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="worker-configuration">Worker Configuration<a href="#worker-configuration" class="hash-link" aria-label="Direct link to Worker Configuration" title="Direct link to Worker Configuration">â€‹</a></h4>
<table><thead><tr><th style="text-align:left">Parameter</th><th style="text-align:left">Description</th><th style="text-align:left">Default Value</th></tr></thead><tbody><tr><td style="text-align:left">worker.replicas</td><td style="text-align:left">Worker replica count</td><td style="text-align:left">3</td></tr><tr><td style="text-align:left">worker.rpcPort</td><td style="text-align:left">RPC port</td><td style="text-align:left">8997</td></tr><tr><td style="text-align:left">worker.webPort</td><td style="text-align:left">Web UI port</td><td style="text-align:left">9001</td></tr><tr><td style="text-align:left">worker.hostNetwork</td><td style="text-align:left">Use host network</td><td style="text-align:left">false</td></tr><tr><td style="text-align:left">worker.dnsPolicy</td><td style="text-align:left">DNS policy</td><td style="text-align:left">ClusterFirst</td></tr><tr><td style="text-align:left">worker.privileged</td><td style="text-align:left">Privileged mode (required for FUSE)</td><td style="text-align:left">true</td></tr><tr><td style="text-align:left">worker.storage.dataDirs[0].name</td><td style="text-align:left">Data directory name</td><td style="text-align:left">data1</td></tr><tr><td style="text-align:left">worker.storage.dataDirs[0].type</td><td style="text-align:left">Storage type (SSD/HDD)</td><td style="text-align:left">SSD</td></tr><tr><td style="text-align:left">worker.storage.dataDirs[0].enabled</td><td style="text-align:left">Enable data directory</td><td style="text-align:left">true</td></tr><tr><td style="text-align:left">worker.storage.dataDirs[0].size</td><td style="text-align:left">Data directory size</td><td style="text-align:left">10Gi</td></tr><tr><td style="text-align:left">worker.storage.dataDirs[0].storageClass</td><td style="text-align:left">Storage class</td><td style="text-align:left">&quot;&quot; (default)</td></tr><tr><td style="text-align:left">worker.storage.dataDirs[0].hostPath</td><td style="text-align:left">Host path (used when no storageClass)</td><td style="text-align:left">&quot;&quot;</td></tr><tr><td style="text-align:left">worker.storage.dataDirs[0].mountPath</td><td style="text-align:left">Mount path</td><td style="text-align:left">/data/data1</td></tr><tr><td style="text-align:left">worker.resources.requests.cpu</td><td style="text-align:left">CPU request</td><td style="text-align:left">2000m</td></tr><tr><td style="text-align:left">worker.resources.requests.memory</td><td style="text-align:left">Memory request</td><td style="text-align:left">4Gi</td></tr><tr><td style="text-align:left">worker.resources.limits.cpu</td><td style="text-align:left">CPU limit</td><td style="text-align:left">4000m</td></tr><tr><td style="text-align:left">worker.resources.limits.memory</td><td style="text-align:left">Memory limit</td><td style="text-align:left">8Gi</td></tr><tr><td style="text-align:left">worker.nodeSelector</td><td style="text-align:left">Node selector labels</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">worker.tolerations</td><td style="text-align:left">Pod tolerations</td><td style="text-align:left">[]</td></tr><tr><td style="text-align:left">worker.antiAffinity.enabled</td><td style="text-align:left">Enable Pod anti-affinity</td><td style="text-align:left">true</td></tr><tr><td style="text-align:left">worker.antiAffinity.type</td><td style="text-align:left">Anti-affinity type (required/preferred)</td><td style="text-align:left">preferred</td></tr><tr><td style="text-align:left">worker.labels</td><td style="text-align:left">Additional labels</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">worker.annotations</td><td style="text-align:left">Additional annotations</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">worker.extraEnv</td><td style="text-align:left">Additional environment variables</td><td style="text-align:left">[]</td></tr><tr><td style="text-align:left">worker.extraVolumes</td><td style="text-align:left">Additional volumes</td><td style="text-align:left">[]</td></tr><tr><td style="text-align:left">worker.extraVolumeMounts</td><td style="text-align:left">Additional volume mounts</td><td style="text-align:left">[]</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="service-configuration">Service Configuration<a href="#service-configuration" class="hash-link" aria-label="Direct link to Service Configuration" title="Direct link to Service Configuration">â€‹</a></h4>
<table><thead><tr><th style="text-align:left">Parameter</th><th style="text-align:left">Description</th><th style="text-align:left">Default Value</th></tr></thead><tbody><tr><td style="text-align:left">service.master.type</td><td style="text-align:left">Master Service type</td><td style="text-align:left">ClusterIP</td></tr><tr><td style="text-align:left">service.master.annotations</td><td style="text-align:left">Master Service annotations</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">service.masterExternal.enabled</td><td style="text-align:left">Enable external Master Service</td><td style="text-align:left">false</td></tr><tr><td style="text-align:left">service.masterExternal.type</td><td style="text-align:left">External Service type</td><td style="text-align:left">ClusterIP</td></tr><tr><td style="text-align:left">service.masterExternal.annotations</td><td style="text-align:left">External Service annotations</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">service.masterExternal.nodePort</td><td style="text-align:left">NodePort configuration</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">service.masterExternal.loadBalancerIP</td><td style="text-align:left">LoadBalancer IP</td><td style="text-align:left">&quot;&quot;</td></tr><tr><td style="text-align:left">service.masterExternal.loadBalancerSourceRanges</td><td style="text-align:left">LoadBalancer source ranges</td><td style="text-align:left">[]</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="service-account--rbac">Service Account &amp; RBAC<a href="#service-account--rbac" class="hash-link" aria-label="Direct link to Service Account &amp; RBAC" title="Direct link to Service Account &amp; RBAC">â€‹</a></h4>
<table><thead><tr><th style="text-align:left">Parameter</th><th style="text-align:left">Description</th><th style="text-align:left">Default Value</th></tr></thead><tbody><tr><td style="text-align:left">serviceAccount.create</td><td style="text-align:left">Create Service Account</td><td style="text-align:left">true</td></tr><tr><td style="text-align:left">serviceAccount.name</td><td style="text-align:left">Service Account name</td><td style="text-align:left">&quot;&quot; (auto-generated)</td></tr><tr><td style="text-align:left">serviceAccount.annotations</td><td style="text-align:left">Service Account annotations</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">rbac.create</td><td style="text-align:left">Create RBAC resources</td><td style="text-align:left">true</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="curvine-configuration">Curvine Configuration<a href="#curvine-configuration" class="hash-link" aria-label="Direct link to Curvine Configuration" title="Direct link to Curvine Configuration">â€‹</a></h4>
<table><thead><tr><th style="text-align:left">Parameter</th><th style="text-align:left">Description</th><th style="text-align:left">Default Value</th></tr></thead><tbody><tr><td style="text-align:left">config.master.metaDir</td><td style="text-align:left">Master metadata directory</td><td style="text-align:left">/opt/curvine/data/meta</td></tr><tr><td style="text-align:left">config.journal.enable</td><td style="text-align:left">Enable journal</td><td style="text-align:left">true</td></tr><tr><td style="text-align:left">config.journal.journalDir</td><td style="text-align:left">Journal directory</td><td style="text-align:left">/opt/curvine/data/journal</td></tr><tr><td style="text-align:left">config.client.blockSizeStr</td><td style="text-align:left">Client block size</td><td style="text-align:left">64MB</td></tr><tr><td style="text-align:left">config.log.level</td><td style="text-align:left">Log level (INFO/DEBUG/WARN/ERROR)</td><td style="text-align:left">INFO</td></tr><tr><td style="text-align:left">config.log.logDir</td><td style="text-align:left">Log directory</td><td style="text-align:left">/opt/curvine/logs</td></tr><tr><td style="text-align:left">configOverrides.master</td><td style="text-align:left">Master configuration override</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">configOverrides.journal</td><td style="text-align:left">Journal configuration override</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">configOverrides.worker</td><td style="text-align:left">Worker configuration override</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">configOverrides.client</td><td style="text-align:left">Client configuration override</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">configOverrides.log</td><td style="text-align:left">Log configuration override</td><td style="text-align:left"></td></tr></tbody></table>
<p>For the complete parameter list, please refer to <code>values.yaml</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-examples">Configuration Examples<a href="#configuration-examples" class="hash-link" aria-label="Direct link to Configuration Examples" title="Direct link to Configuration Examples">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="development-environment-minimal">Development Environment (Minimal)<a href="#development-environment-minimal" class="hash-link" aria-label="Direct link to Development Environment (Minimal)" title="Direct link to Development Environment (Minimal)">â€‹</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Install from Helm repository</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">helm install curvine curvine/curvine -n curvine --create-namespace --devel \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set master.replicas=1 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set worker.replicas=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Install from local Chart (run in helm-charts directory)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">helm install curvine ./curvine-runtime -n curvine --create-namespace \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -f ./curvine-runtime/examples/values-dev.yaml</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="production-environment-high-availability">Production Environment (High Availability)<a href="#production-environment-high-availability" class="hash-link" aria-label="Direct link to Production Environment (High Availability)" title="Direct link to Production Environment (High Availability)">â€‹</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Install from Helm repository</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">helm install curvine curvine/curvine -n curvine --create-namespace --devel \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set master.replicas=5 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set worker.replicas=10 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set master.storage.meta.storageClass=fast-ssd \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set master.storage.journal.storageClass=fast-ssd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Install from local Chart (run in helm-charts directory)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">helm install curvine ./curvine-runtime -n curvine --create-namespace \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -f ./curvine-runtime/examples/values-prod.yaml</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="bare-metal-environment-using-hostpath">Bare Metal Environment (Using hostPath)<a href="#bare-metal-environment-using-hostpath" class="hash-link" aria-label="Direct link to Bare Metal Environment (Using hostPath)" title="Direct link to Bare Metal Environment (Using hostPath)">â€‹</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Install from local Chart (run in helm-charts directory)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">helm install curvine ./curvine-runtime -n curvine --create-namespace \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -f ./curvine-runtime/examples/values-baremetal.yaml</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="custom-configuration">Custom Configuration<a href="#custom-configuration" class="hash-link" aria-label="Direct link to Custom Configuration" title="Direct link to Custom Configuration">â€‹</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Install from Helm repository</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">helm install curvine curvine/curvine -n curvine --create-namespace --devel \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set master.replicas=5 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set worker.replicas=10 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set master.storage.meta.storageClass=fast-ssd \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set worker.storage.dataDirs[0].storageClass=fast-ssd \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set worker.storage.dataDirs[0].size=500Gi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Install from local Chart (run in helm-charts directory)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">helm install curvine ./curvine-runtime -n curvine --create-namespace \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set master.replicas=5 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set worker.replicas=10 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set master.storage.meta.storageClass=fast-ssd \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set worker.storage.dataDirs[0].storageClass=fast-ssd \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set worker.storage.dataDirs[0].size=500Gi</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="storage-configuration">Storage Configuration<a href="#storage-configuration" class="hash-link" aria-label="Direct link to Storage Configuration" title="Direct link to Storage Configuration">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="using-pvc-recommended-for-cloud-environments">Using PVC (Recommended for Cloud Environments)<a href="#using-pvc-recommended-for-cloud-environments" class="hash-link" aria-label="Direct link to Using PVC (Recommended for Cloud Environments)" title="Direct link to Using PVC (Recommended for Cloud Environments)">â€‹</a></h3>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">master</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">storage</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">meta</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">storageClass</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;fast-ssd&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">size</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;20Gi&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">journal</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">storageClass</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;fast-ssd&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">size</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;100Gi&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">worker</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">storage</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">dataDirs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;data1&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;SSD&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">enabled</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">size</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;100Gi&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">storageClass</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;fast-ssd&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">mountPath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/data/data1&quot;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="using-hostpath-recommended-for-bare-metal">Using hostPath (Recommended for Bare Metal)<a href="#using-hostpath-recommended-for-bare-metal" class="hash-link" aria-label="Direct link to Using hostPath (Recommended for Bare Metal)" title="Direct link to Using hostPath (Recommended for Bare Metal)">â€‹</a></h3>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">master</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">storage</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">meta</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">storageClass</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">hostPath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/mnt/curvine/master/meta&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">journal</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">storageClass</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">hostPath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/mnt/curvine/master/journal&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">worker</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">storage</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">dataDirs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;data1&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;SSD&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">enabled</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">size</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;100Gi&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">storageClass</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">hostPath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/mnt/nvme0n1/curvine&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">mountPath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/data/data1&quot;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="using-emptydir-for-testing">Using emptyDir (For Testing)<a href="#using-emptydir-for-testing" class="hash-link" aria-label="Direct link to Using emptyDir (For Testing)" title="Direct link to Using emptyDir (For Testing)">â€‹</a></h3>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">master</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">storage</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">meta</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">storageClass</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">hostPath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">journal</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">storageClass</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">hostPath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">worker</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">storage</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">dataDirs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;data1&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">storageClass</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">hostPath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="storage-configuration-examples">Storage Configuration Examples<a href="#storage-configuration-examples" class="hash-link" aria-label="Direct link to Storage Configuration Examples" title="Direct link to Storage Configuration Examples">â€‹</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="quick-start-with-default-pvc">Quick Start with Default PVC<a href="#quick-start-with-default-pvc" class="hash-link" aria-label="Direct link to Quick Start with Default PVC" title="Direct link to Quick Start with Default PVC">â€‹</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Use default storage class (fastest startup method)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">helm install curvine ./curvine-runtime -n curvine --create-namespace</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="cloud-environment-fast-ssd-configuration">Cloud Environment Fast SSD Configuration<a href="#cloud-environment-fast-ssd-configuration" class="hash-link" aria-label="Direct link to Cloud Environment Fast SSD Configuration" title="Direct link to Cloud Environment Fast SSD Configuration">â€‹</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># AWS/GCP/Azure fast SSD storage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">helm install curvine ./curvine-runtime -n curvine --create-namespace \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set master.storage.meta.storageClass=fast-ssd \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set master.storage.journal.storageClass=fast-ssd \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set &#x27;worker.storage.dataDirs[0].storageClass=fast-ssd&#x27; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set &#x27;worker.storage.dataDirs[0].size=500Gi&#x27;</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="bare-metal-multi-storage-type-configuration">Bare Metal Multi-Storage Type Configuration<a href="#bare-metal-multi-storage-type-configuration" class="hash-link" aria-label="Direct link to Bare Metal Multi-Storage Type Configuration" title="Direct link to Bare Metal Multi-Storage Type Configuration">â€‹</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Create values-baremetal-multi.yaml:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># master:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#   storage:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#     meta:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#       storageClass: &quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#       hostPath: &quot;/mnt/nvme/master/meta&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#     journal:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#       storageClass: &quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#       hostPath: &quot;/mnt/nvme/master/journal&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># worker:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#   storage:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#     dataDirs:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#       - name: &quot;nvme&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#         type: &quot;SSD&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#         enabled: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#         size: &quot;200Gi&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#         storageClass: &quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#         hostPath: &quot;/mnt/nvme/worker&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#         mountPath: &quot;/data/nvme&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#       - name: &quot;ssd&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#         type: &quot;SSD&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#         enabled: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#         size: &quot;500Gi&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#         storageClass: &quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#         hostPath: &quot;/mnt/ssd/worker&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#         mountPath: &quot;/data/ssd&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#       - name: &quot;hdd&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#         type: &quot;HDD&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#         enabled: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#         size: &quot;2000Gi&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#         storageClass: &quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#         hostPath: &quot;/mnt/hdd/worker&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#         mountPath: &quot;/data/hdd&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">helm install curvine ./curvine-runtime -n curvine --create-namespace \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -f values-baremetal-multi.yaml</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="hybrid-cloud-and-local-storage">Hybrid Cloud and Local Storage<a href="#hybrid-cloud-and-local-storage" class="hash-link" aria-label="Direct link to Hybrid Cloud and Local Storage" title="Direct link to Hybrid Cloud and Local Storage">â€‹</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Master uses cloud PVC, Worker uses local hostPath</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">helm install curvine ./curvine-runtime -n curvine --create-namespace \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set master.storage.meta.storageClass=cloud-ssd \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set master.storage.journal.storageClass=cloud-ssd \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set &#x27;worker.storage.dataDirs[0].storageClass=&quot;&quot;&#x27; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set &#x27;worker.storage.dataDirs[0].hostPath=/mnt/local/data&#x27;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="upgrade">Upgrade<a href="#upgrade" class="hash-link" aria-label="Direct link to Upgrade" title="Direct link to Upgrade">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="update-configuration">Update Configuration<a href="#update-configuration" class="hash-link" aria-label="Direct link to Update Configuration" title="Direct link to Update Configuration">â€‹</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Scale Worker replicas (from Helm repository)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">helm upgrade curvine curvine/curvine -n curvine --devel \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set worker.replicas=15</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Upgrade image version (from Helm repository)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">helm upgrade curvine curvine/curvine -n curvine --devel \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set image.tag=v1.1.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Upgrade with new values file (from local Chart, run in helm-charts directory)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">helm upgrade curvine ./curvine-runtime -n curvine \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -f ./curvine-runtime/values-new.yaml</span><br></span></code></pre></div></div>
<blockquote>
<p><strong>Note</strong>:</p>
<ol>
<li>Master replica count and journal storage class cannot be modified during upgrades. To modify, delete and redeploy the cluster.</li>
<li>Parameters not modified during upgrade will be reset to default configuration. If Master replica count and journal storage class were modified during installation, these two parameters need to be included during updates.</li>
</ol>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="common-upgrade-scenarios">Common Upgrade Scenarios<a href="#common-upgrade-scenarios" class="hash-link" aria-label="Direct link to Common Upgrade Scenarios" title="Direct link to Common Upgrade Scenarios">â€‹</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="scale-worker-nodes">Scale Worker Nodes<a href="#scale-worker-nodes" class="hash-link" aria-label="Direct link to Scale Worker Nodes" title="Direct link to Scale Worker Nodes">â€‹</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Increase Worker replicas from 3 to 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">helm upgrade curvine ./curvine-runtime -n curvine \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set worker.replicas=10</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="increase-resource-limits">Increase Resource Limits<a href="#increase-resource-limits" class="hash-link" aria-label="Direct link to Increase Resource Limits" title="Direct link to Increase Resource Limits">â€‹</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Increase Master resources for better performance</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">helm upgrade curvine ./curvine-runtime -n curvine \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set master.resources.limits.cpu=4000m \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set master.resources.limits.memory=8Gi</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="update-image-version">Update Image Version<a href="#update-image-version" class="hash-link" aria-label="Direct link to Update Image Version" title="Direct link to Update Image Version">â€‹</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Upgrade to new Curvine version</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">helm upgrade curvine ./curvine-runtime -n curvine \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set image.tag=v1.2.0</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="enable-debug-logging">Enable Debug Logging<a href="#enable-debug-logging" class="hash-link" aria-label="Direct link to Enable Debug Logging" title="Direct link to Enable Debug Logging">â€‹</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Temporarily enable debug logging for troubleshooting</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">helm upgrade curvine ./curvine-runtime -n curvine \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set config.log.level=DEBUG</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="change-storage-configuration">Change Storage Configuration<a href="#change-storage-configuration" class="hash-link" aria-label="Direct link to Change Storage Configuration" title="Direct link to Change Storage Configuration">â€‹</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Migrate to faster storage class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">helm upgrade curvine ./curvine-runtime -n curvine \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set master.storage.meta.storageClass=ultra-ssd \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set master.storage.journal.storageClass=ultra-ssd</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="view-release-history">View Release History<a href="#view-release-history" class="hash-link" aria-label="Direct link to View Release History" title="Direct link to View Release History">â€‹</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">helm history curvine -n curvine</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="rollback">Rollback<a href="#rollback" class="hash-link" aria-label="Direct link to Rollback" title="Direct link to Rollback">â€‹</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Rollback to previous version</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">helm rollback curvine -n curvine</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Rollback to specific version</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">helm rollback curvine 2 -n curvine</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="uninstall">Uninstall<a href="#uninstall" class="hash-link" aria-label="Direct link to Uninstall" title="Direct link to Uninstall">â€‹</a></h2>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Uninstall Chart (keep PVC)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">helm uninstall curvine -n curvine</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Delete PersistentVolumeClaims</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl delete pvc -n curvine -l app.kubernetes.io/instance=curvine</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Delete namespace</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl delete namespace curvine</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="troubleshooting">Troubleshooting<a href="#troubleshooting" class="hash-link" aria-label="Direct link to Troubleshooting" title="Direct link to Troubleshooting">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="check-pod-status">Check Pod Status<a href="#check-pod-status" class="hash-link" aria-label="Direct link to Check Pod Status" title="Direct link to Check Pod Status">â€‹</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get pods -n curvine</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl describe pod &lt;pod-name&gt; -n curvine</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl logs &lt;pod-name&gt; -n curvine</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="view-configmap">View ConfigMap<a href="#view-configmap" class="hash-link" aria-label="Direct link to View ConfigMap" title="Direct link to View ConfigMap">â€‹</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get configmap -n curvine</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl describe configmap curvine-config -n curvine</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="view-events">View Events<a href="#view-events" class="hash-link" aria-label="Direct link to View Events" title="Direct link to View Events">â€‹</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get events -n curvine --sort-by=&#x27;.lastTimestamp&#x27;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="common-issues">Common Issues<a href="#common-issues" class="hash-link" aria-label="Direct link to Common Issues" title="Direct link to Common Issues">â€‹</a></h3>
<ol>
<li>
<p><strong>Master Replica Validation Failed</strong></p>
<ol>
<li>
<p>Error: <code>master.replicas must be an odd number</code></p>
</li>
<li>
<p>Solution: Ensure Master replica count is odd (1, 3, 5, 7...)</p>
</li>
</ol>
</li>
<li>
<p><strong>PVC Cannot Bind</strong></p>
<ol>
<li>
<p>Check if StorageClass exists</p>
</li>
<li>
<p>Verify PV provisioner is working properly</p>
</li>
</ol>
</li>
<li>
<p><strong>Pod Startup Failed</strong></p>
<ol>
<li>
<p>Verify container image exists</p>
</li>
<li>
<p>Check if resource quotas are sufficient</p>
</li>
<li>
<p>View Pod logs for details</p>
</li>
</ol>
</li>
</ol></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/curvineio/curvine-doc/edit/main/docs/2-Deploy/2-Deploy-Curvine-Cluster/3-Distributed-Mode/01-k8s-Deployment.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/Deploy/Deploy-Curvine-Cluster/Standalone-Mode"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Standalone Mode</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/Deploy/Deploy-Curvine-Cluster/Distributed-Mode/Bare-Metal-Deployment"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Bare Metal Deployment</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a></li><li><a href="#quick-start" class="table-of-contents__link toc-highlight">Quick Start</a><ul><li><a href="#1-load-images-into-kubernetes-cluster" class="table-of-contents__link toc-highlight">1. Load Images into Kubernetes Cluster</a></li><li><a href="#2-add-helm-repository-optional" class="table-of-contents__link toc-highlight">2. Add Helm Repository (Optional)</a></li><li><a href="#3-install-chart" class="table-of-contents__link toc-highlight">3. Install Chart</a></li><li><a href="#4-verify-deployment" class="table-of-contents__link toc-highlight">4. Verify Deployment</a></li><li><a href="#5-access-cluster" class="table-of-contents__link toc-highlight">5. Access Cluster</a></li></ul></li><li><a href="#configuration" class="table-of-contents__link toc-highlight">Configuration</a><ul><li><a href="#view-current-configuration" class="table-of-contents__link toc-highlight">View Current Configuration</a></li><li><a href="#common-parameter-usage-examples" class="table-of-contents__link toc-highlight">Common Parameter Usage Examples</a></li><li><a href="#configuration-parameters" class="table-of-contents__link toc-highlight">Configuration Parameters</a></li></ul></li><li><a href="#configuration-examples" class="table-of-contents__link toc-highlight">Configuration Examples</a><ul><li><a href="#development-environment-minimal" class="table-of-contents__link toc-highlight">Development Environment (Minimal)</a></li><li><a href="#production-environment-high-availability" class="table-of-contents__link toc-highlight">Production Environment (High Availability)</a></li><li><a href="#bare-metal-environment-using-hostpath" class="table-of-contents__link toc-highlight">Bare Metal Environment (Using hostPath)</a></li><li><a href="#custom-configuration" class="table-of-contents__link toc-highlight">Custom Configuration</a></li></ul></li><li><a href="#storage-configuration" class="table-of-contents__link toc-highlight">Storage Configuration</a><ul><li><a href="#using-pvc-recommended-for-cloud-environments" class="table-of-contents__link toc-highlight">Using PVC (Recommended for Cloud Environments)</a></li><li><a href="#using-hostpath-recommended-for-bare-metal" class="table-of-contents__link toc-highlight">Using hostPath (Recommended for Bare Metal)</a></li><li><a href="#using-emptydir-for-testing" class="table-of-contents__link toc-highlight">Using emptyDir (For Testing)</a></li><li><a href="#storage-configuration-examples" class="table-of-contents__link toc-highlight">Storage Configuration Examples</a></li></ul></li><li><a href="#upgrade" class="table-of-contents__link toc-highlight">Upgrade</a><ul><li><a href="#update-configuration" class="table-of-contents__link toc-highlight">Update Configuration</a></li><li><a href="#common-upgrade-scenarios" class="table-of-contents__link toc-highlight">Common Upgrade Scenarios</a></li><li><a href="#view-release-history" class="table-of-contents__link toc-highlight">View Release History</a></li><li><a href="#rollback" class="table-of-contents__link toc-highlight">Rollback</a></li></ul></li><li><a href="#uninstall" class="table-of-contents__link toc-highlight">Uninstall</a></li><li><a href="#troubleshooting" class="table-of-contents__link toc-highlight">Troubleshooting</a><ul><li><a href="#check-pod-status" class="table-of-contents__link toc-highlight">Check Pod Status</a></li><li><a href="#view-configmap" class="table-of-contents__link toc-highlight">View ConfigMap</a></li><li><a href="#view-events" class="table-of-contents__link toc-highlight">View Events</a></li><li><a href="#common-issues" class="table-of-contents__link toc-highlight">Common Issues</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/Deploy/quick-start">Quick Start</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.com/invite/xfxMQKv3" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://x.com/szbr8896" target="_blank" rel="noopener noreferrer" class="footer__link-item">X<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/curvineio/curvine" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2025 Curvine Project Authors.<br>
                  Open source under Apache License 20. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>