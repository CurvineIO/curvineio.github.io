"use strict";(self.webpackChunkcurvine_doc=self.webpackChunkcurvine_doc||[]).push([[9660],{3954:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>d,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"User-Manuals/cli","title":"Command Line Tools","description":"This section introduces the command-line tools supported by Curvine and their usage methods. Curvine provides native command-line tool cv, as well as hdfs-compatible command-line tool curvine (deprecated). Additionally, Curvine implements POSIX-standard FUSE interface, allowing direct access to Curvine filesystem through standard Linux commands after mounting Curvine in the system.","source":"@site/docs/3-User-Manuals/04-cli.md","sourceDirName":"3-User-Manuals","slug":"/User-Manuals/cli","permalink":"/docs/User-Manuals/cli","draft":false,"unlisted":false,"editUrl":"https://github.com/curvineio/curvine-doc/edit/main/docs/3-User-Manuals/04-cli.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Web Management Interface","permalink":"/docs/User-Manuals/webui"},"next":{"title":"Performance Tuning","permalink":"/docs/User-Manuals/opt"}}');var t=s(4848),r=s(8453);const d={},c="Command Line Tools",o={},l=[{value:"Rust Native Command Line Tool <code>cv</code>",id:"rust-native-command-line-tool-cv",level:2},{value:"1. <code>report</code> Subcommand",id:"1-report-subcommand",level:3},{value:"2. <code>fs</code> Subcommand",id:"2-fs-subcommand",level:3},{value:"3. <code>mount</code> Subcommand",id:"3-mount-subcommand",level:3},{value:"4. load Subcommand",id:"4-load-subcommand",level:3},{value:"HDFS-Compatible Commands (deprecated)",id:"hdfs-compatible-commands-deprecated",level:2},{value:"POSIX Commands",id:"posix-commands",level:2}];function a(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"command-line-tools",children:"Command Line Tools"})}),"\n",(0,t.jsxs)(n.p,{children:["This section introduces the command-line tools supported by Curvine and their usage methods. Curvine provides native command-line tool ",(0,t.jsx)(n.code,{children:"cv"}),", as well as hdfs-compatible command-line tool ",(0,t.jsx)(n.code,{children:"curvine"})," (deprecated). Additionally, Curvine implements POSIX-standard FUSE interface, allowing direct access to Curvine filesystem through standard Linux commands after mounting Curvine in the system."]}),"\n",(0,t.jsxs)(n.h2,{id:"rust-native-command-line-tool-cv",children:["Rust Native Command Line Tool ",(0,t.jsx)(n.code,{children:"cv"})]}),"\n",(0,t.jsxs)(n.p,{children:["You can directly execute ",(0,t.jsx)(n.code,{children:"cv"})," command to get help:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"Usage: cv <COMMAND>\n\nCommands:\n  fs\n  report\n  load         Loading external files into Curvine\n  load-status  Query loading task status\n  cancel-load  Cancel loading task\n  mount        mount ufs to curvine\n  umount       unmount ufs\n  version      show cli version\n  help         Print this message or the help of the given subcommand(s)\n\nOptions:\n  -h, --help     Print help\n  -V, --version  Print version\n"})}),"\n",(0,t.jsxs)(n.h3,{id:"1-report-subcommand",children:["1. ",(0,t.jsx)(n.code,{children:"report"})," Subcommand"]}),"\n",(0,t.jsxs)(n.p,{children:["Use ",(0,t.jsx)(n.code,{children:"cv report"})," subcommand to view cluster status, ",(0,t.jsx)(n.code,{children:"cv report -h"})," to view available parameters."]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Command Format"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"bin/cv report"}),(0,t.jsx)(n.td,{children:"Output cluster summary information"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"bin/cv report capacity"}),(0,t.jsx)(n.td,{children:"Output cluster summary and detailed capacity information for each worker"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"bin/cv report info"}),(0,t.jsx)(n.td,{children:"Output cluster and worker node information"})]})]})]}),"\n",(0,t.jsxs)(n.h3,{id:"2-fs-subcommand",children:["2. ",(0,t.jsx)(n.code,{children:"fs"})," Subcommand"]}),"\n",(0,t.jsxs)(n.p,{children:["Use ",(0,t.jsx)(n.code,{children:"cv fs"})," subcommand to execute hdfs commands. The ",(0,t.jsx)(n.code,{children:"fs"})," subcommand provides mainstream file operation functionality, command formats and descriptions are as follows:"]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Command Format"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"bin/cv fs ls /"}),(0,t.jsx)(n.td,{children:"List files and directories in specified directory"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"bin/cv fs mkdir /dir"}),(0,t.jsx)(n.td,{children:"Create directory"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"bin/cv fs rm /file"}),(0,t.jsx)(n.td,{children:"Delete file"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"bin/cv fs cat /file"}),(0,t.jsx)(n.td,{children:"Display file content"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"bin/cv fs put /local/file /hdfs/path"}),(0,t.jsx)(n.td,{children:"Upload local file to Curvine"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"bin/cv fs get /hdfs/path /local/file"}),(0,t.jsx)(n.td,{children:"Download file from Curvine to local"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"bin/cv fs stat /file"}),(0,t.jsx)(n.td,{children:"Query file or directory status"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"bin/cv fs count /path"}),(0,t.jsx)(n.td,{children:"Count files in directory"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"bin/cv fs touch /path"}),(0,t.jsx)(n.td,{children:"Create file"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"bin/cv fs df"}),(0,t.jsx)(n.td,{children:"File system available space"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"bin/cv fs du /path"}),(0,t.jsx)(n.td,{children:"Calculate directory space usage"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"bin/cv fs mv src/path dst/path"}),(0,t.jsx)(n.td,{children:"Rename file or move file to target path"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"bin/cv fs blocks /file"}),(0,t.jsx)(n.td,{children:"Display file block information"})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:["Specifically, the ",(0,t.jsx)(n.code,{children:"cv fs ls"})," subcommand supports ",(0,t.jsx)(n.code,{children:"hdfs"}),"-like parameters, including:"]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Parameter"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"-C, --path-only"}),(0,t.jsx)(n.td,{children:"Display only the paths of files and directories"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"-d, --directory"}),(0,t.jsx)(n.td,{children:"List directories as regular files"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"-H, --human-readable"}),(0,t.jsx)(n.td,{children:"Display file sizes in human-readable format"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"-q, --hide-non-printable"}),(0,t.jsx)(n.td,{children:"Replace non-printable characters with ?"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"-R, --recursive"}),(0,t.jsx)(n.td,{children:"Recursively list directory contents"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"-r, --reverse"}),(0,t.jsx)(n.td,{children:"Reverse sort order"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"-t, --mtime"}),(0,t.jsx)(n.td,{children:"Sort by modification time (newest first)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"-S, --size"}),(0,t.jsx)(n.td,{children:"Sort by file size"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"-u, --atime"}),(0,t.jsx)(n.td,{children:"Use last access time instead of modification time for display and sorting"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"-h, --help"}),(0,t.jsx)(n.td,{children:"Show help information"})]})]})]}),"\n",(0,t.jsxs)(n.h3,{id:"3-mount-subcommand",children:["3. ",(0,t.jsx)(n.code,{children:"mount"})," Subcommand"]}),"\n",(0,t.jsxs)(n.p,{children:["Use ",(0,t.jsx)(n.code,{children:"cv mount"})," subcommand to mount underlying storage to Curvine. Currently supports ",(0,t.jsx)(n.code,{children:"s3"})," protocol."]}),"\n",(0,t.jsxs)(n.p,{children:["Example: Mount ",(0,t.jsx)(n.code,{children:"s3://testing"})," to ",(0,t.jsx)(n.code,{children:"/s3-testing"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"bin/cv mount s3://s3/testing /s3-testing \\\n-c s3.endpoint_url=http://hostname.com \\\n-c s3.region_name=cn \\\n-c s3.credentials.access=access_key \\\n-c s3.credentials.secret=secret_key \\\n-c s3.path_style=true\n"})}),"\n",(0,t.jsx)(n.admonition,{type:"warning",children:(0,t.jsxs)(n.p,{children:["When mount executes mounting, it will check the availability of the UFS storage to be mounted and configuration, otherwise mounting will fail with ",(0,t.jsx)(n.code,{children:"service error"})," prompt. Please ensure UFS is in normal state."]})}),"\n",(0,t.jsx)(n.p,{children:"Check mount list, mount command without parameters."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"bin/cv mount\n"})}),"\n",(0,t.jsx)(n.admonition,{type:"warning",children:(0,t.jsx)(n.p,{children:"A UFS path can only be mounted to one Curvine directory. Mounting to curvine root path is not supported; nested mounting is not supported. If curvine://a/b is already mounted, then curvine://a or curvine://a/b/c etc. cannot mount other UFS."})}),"\n",(0,t.jsx)(n.p,{children:"Unmount underlying storage:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"bin/cv umount /s3-testing/\n"})}),"\n",(0,t.jsx)(n.h3,{id:"4-load-subcommand",children:"4. load Subcommand"}),"\n",(0,t.jsxs)(n.p,{children:["Use ",(0,t.jsx)(n.code,{children:"cv load"})," subcommand to load UFS data into Curvine."]}),"\n",(0,t.jsx)(n.admonition,{type:"warning",children:(0,t.jsx)(n.p,{children:"Before loading data, you need to mount the underlying storage to curvine first"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"bin/curvine load s3://my-bucket/test.data\n"})}),"\n",(0,t.jsx)(n.p,{children:"When successful, the load command output will show jobid. You can use $jobid to check load status, see the following load-status command:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"bin/cv load-status $jobid\n"})}),"\n",(0,t.jsx)(n.h2,{id:"hdfs-compatible-commands-deprecated",children:"HDFS-Compatible Commands (deprecated)"}),"\n",(0,t.jsxs)(n.p,{children:["Curvine is compatible with the HDFS access protocol. You can execute operations that are fully compatible with the ",(0,t.jsx)(n.code,{children:"hdfs fs"})," command syntax through the ",(0,t.jsx)(n.code,{children:"bin/curvine fs"})," command, as shown in the following examples:"]}),"\n",(0,t.jsx)(n.p,{children:"Examples:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# List files and directories\nbin/curvine fs -ls /\n\n# Create directories\nbin/curvine fs -mkdir -p /dir/a\n"})}),"\n",(0,t.jsx)(n.p,{children:"Currently, Curvine and Hadoop are not 100% fully compatible. Some commands may not execute or have no effect. The following commands have passed rigorous testing:"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Command"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"ls"}),(0,t.jsx)(n.td,{children:"List directory contents"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"mkdir"}),(0,t.jsx)(n.td,{children:"Create directories"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"cat"}),(0,t.jsx)(n.td,{children:"View file contents"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"put"}),(0,t.jsx)(n.td,{children:"Upload files"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"get"}),(0,t.jsx)(n.td,{children:"Download files"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"count"}),(0,t.jsx)(n.td,{children:"Count files and directories"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"du"}),(0,t.jsx)(n.td,{children:"Calculate directory space usage"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"df"}),(0,t.jsx)(n.td,{children:"Show file system available space"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"mv"}),(0,t.jsx)(n.td,{children:"Rename/move files"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"stat"}),(0,t.jsx)(n.td,{children:"Query file/directory status"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"rm"}),(0,t.jsx)(n.td,{children:"Delete files or directories"})]})]})]}),"\n",(0,t.jsx)(n.admonition,{type:"tip",children:(0,t.jsxs)(n.p,{children:["Commands not listed in the table do not necessarily mean they are unsupported, but rather that they have not undergone complete testing. The ",(0,t.jsx)(n.code,{children:"curvine"})," command-line tool depends on JVM environment, we recommend using the native ",(0,t.jsx)(n.code,{children:"cv"})," command. If you have common command requirements, please submit an Issue."]})}),"\n",(0,t.jsx)(n.h2,{id:"posix-commands",children:"POSIX Commands"}),"\n",(0,t.jsx)(n.p,{children:"Curvine implements a POSIX-compliant FUSE (Filesystem in Userspace) interface. After mounting Curvine in Linux systems, users can interact through standard Linux file operation commands. This implementation has the following technical characteristics:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"System Compatibility:"})}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Complies with FUSE 3.0 interface specifications and is compatible with FUSE 2.0"}),"\n",(0,t.jsx)(n.li,{children:"Compatible with mainstream file system operation semantics like ext4/xfs"}),"\n",(0,t.jsx)(n.li,{children:"Supports Linux kernel 3.10+ versions"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Functional Features:"})}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Provides complete POSIX file operation interface"}),"\n",(0,t.jsx)(n.li,{children:"Supports atomic operation guarantees"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Command Line Operation Support:"}),"\nUsers can operate through the following core Linux commands:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Basic file operations\nls, cp, mv, rm, mkdir\n\n# File content operations\ncat, grep, sed, awk\n\n# File system management\ndf -h, du -sh, stat\n\n# Permission management\nchmod, chown, getfacl\n"})}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsx)(n.p,{children:"Curvine currently does not support soft link management"})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>d,x:()=>c});var i=s(6540);const t={},r=i.createContext(t);function d(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:d(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);