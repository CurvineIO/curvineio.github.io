"use strict";(self.webpackChunkcurvine_doc=self.webpackChunkcurvine_doc||[]).push([[9525],{2633:(e,n,r)=>{r.d(n,{A:()=>i});const i=r.p+"assets/images/webui-99651178199aa9d72a8134fbccfd482e.png"},6146:e=>{e.exports=JSON.parse('{"permalink":"/blog/2025/08/08/fio-bench","editUrl":"https://github.com/curvineio/curvine-doc/edit/main/blog/blog/2025-08-08-fio-bench/index.md","source":"@site/blog/2025-08-08-fio-bench/index.md","title":"Building a Curvine Cluster from Scratch & FIO Testing","description":"How to quickly get started and try out Curvine\'s performance? This article will introduce how to build a local small cluster from scratch, allowing everyone to get hands-on experience quickly.","date":"2025-08-08T00:00:00.000Z","tags":[{"inline":false,"label":"benchmark","permalink":"/blog/tags/benchmark","description":"benchmark of curvine"}],"readingTime":1.73,"hasTruncateMarker":false,"authors":[{"name":"David","title":"Founder of Curvine","url":"https://curvine.io","page":{"permalink":"/blog/authors/all-sebastien-lorber-articles"},"socials":{"github":"https://github.com/szbr9486","x":"https://x.com/szbr8896"},"key":"david"}],"frontMatter":{"authors":["david"],"tags":["benchmark"]},"unlisted":false,"prevItem":{"title":"Curvine Distributed Cache System User Guide","permalink":"/blog/2025/09/28/user-guide"},"nextItem":{"title":"Curvine: High-Performance Distributed Cache\u2014\u2014DataFun Intelligent Conference","permalink":"/blog/2025/07/25/datafun-conference"}}')},7658:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>a,metadata:()=>i,toc:()=>c});var i=r(6146),t=r(4848),s=r(8453);const a={authors:["david"],tags:["benchmark"]},o="Building a Curvine Cluster from Scratch & FIO Testing",l={authorsImageUrls:[void 0]},c=[{value:"1. Download the Code:",id:"1-download-the-code",level:2},{value:"2. Environment Requirements:",id:"2-environment-requirements",level:2},{value:"3. Compile &amp; Run",id:"3-compile--run",level:2},{value:"4. After Compilation, Start Local Cluster",id:"4-after-compilation-start-local-cluster",level:2},{value:"5. View Local Master and Worker WebUI",id:"5-view-local-master-and-worker-webui",level:2},{value:"6. FIO Testing",id:"6-fio-testing",level:2}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",hr:"hr",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"How to quickly get started and try out Curvine's performance? This article will introduce how to build a local small cluster from scratch, allowing everyone to get hands-on experience quickly."}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["GitHub: ",(0,t.jsx)(n.a,{href:"https://github.com/CurvineIO/curvine",children:"https://github.com/CurvineIO/curvine"})]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"1-download-the-code",children:"1. Download the Code:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"git clone https://github.com/CurvineIO/curvine.git\n"})}),"\n",(0,t.jsx)(n.h2,{id:"2-environment-requirements",children:"2. Environment Requirements:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"GCC: version 10 or later \nRust: version 1.86 or later \nProtobuf: version 3.x\nMaven: version 3.8 or later\nLLVM: version 12 or later\nFUSE: libfuse2 or libfuse3 development packages\nJDK: version 1.8 or later \nnpm: version 9 or later\nPython: version 3.7 or later \n"})}),"\n",(0,t.jsx)(n.h2,{id:"3-compile--run",children:"3. Compile & Run"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"make all\n"})}),"\n",(0,t.jsxs)(n.p,{children:["To facilitate compilation, our build script will check dependencies in advance. For macOS users, we will temporarily skip FUSE compilation (currently not adapted for macOS). Interested users can consider using the ",(0,t.jsx)(n.code,{children:"macfuse"})," project for adaptation."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"make-checkenv",src:r(7971).A+"",width:"1080",height:"692"})}),"\n",(0,t.jsx)(n.h2,{id:"4-after-compilation-start-local-cluster",children:"4. After Compilation, Start Local Cluster"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"cd build/dist\n./bin/restart-all.sh\n"})}),"\n",(0,t.jsx)(n.p,{children:"After successful startup, execute the report command to check if it's working:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"\nbin/cv report\n\n       active_master: localhost:8995\n       journal_nodes: 1,localhost:8996\n            capacity: 233.5GB\n           available: 105.0GB (44.99%)\n             fs_used: 0.0B (0.00%)\n         non_fs_used: 128.4GB\n     live_worker_num: 1\n     lost_worker_num: 0\n           inode_num: 0\n           block_num: 0\n    live_worker_list: 192.168.xxx.xxx:8997,105.0GB/233.5GB (44.99%)\n    lost_worker_list:\n"})}),"\n",(0,t.jsx)(n.h2,{id:"5-view-local-master-and-worker-webui",children:"5. View Local Master and Worker WebUI"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"http://localhost:9000/\nhttp://localhost:9001/\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"webui",src:r(2633).A+"",width:"1080",height:"479"})}),"\n",(0,t.jsx)(n.h2,{id:"6-fio-testing",children:"6. FIO Testing"}),"\n",(0,t.jsxs)(n.p,{children:["Test Environment: Alibaba Cloud ",(0,t.jsx)(n.code,{children:"ecs.r8a.8xlarge"})," instance with one master/worker/client each"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"32 cores (vCPU)"}),"\n",(0,t.jsx)(n.li,{children:"256 GiB memory"}),"\n",(0,t.jsx)(n.li,{children:"System disk and data disk both: ESSD cloud disk 500 GiB (7800 IOPS)"}),"\n",(0,t.jsx)(n.li,{children:"Maximum bandwidth: 25Gb"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Prepare data (on worker machine):"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"bin/curvine-bench.sh fuse.write\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"FIO Sequential Read Test, 8 Concurrent Jobs"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"fio -iodepth=1 -rw=read -ioengine=libaio -bs=256k\n -group_reporting -size=200gb \n -filename=/curvine-fuse/fs-bench/0  \n -name=read_test --readonly -direct=1 --runtime=60 \n -numjobs=8\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"FIO Random Read Test, 8 Concurrent Jobs"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"\nfio -iodepth=1 -rw=randread -ioengine=libaio -bs=256k\n -group_reporting -size=200gb \n -filename=/curvine-fuse/fs-bench/0  \n -name=read_test --readonly -direct=1 --runtime=60\n -numjobs=8\n"})}),"\n",(0,t.jsx)(n.p,{children:"Finally, here's a video demonstration of the FIO testing results:"})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},7971:(e,n,r)=>{r.d(n,{A:()=>i});const i=r.p+"assets/images/make-checkenv-f5dbd19e6cb852ce3b7bcecf4a6be804.png"},8453:(e,n,r)=>{r.d(n,{R:()=>a,x:()=>o});var i=r(6540);const t={},s=i.createContext(t);function a(e){const n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);