"use strict";(self.webpackChunkcurvine_doc=self.webpackChunkcurvine_doc||[]).push([[635],{5622:(e,t,l)=>{l.r(t),l.d(t,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"Deploy/Deploy-Curvine-Cluster/Distributed-Mode/k8s-Deployment","title":"k8s Deployment","description":"This chapter introduces how to deploy Curvine distributed storage cluster on Kubernetes using production-grade Helm Chart.","source":"@site/docs/2-Deploy/2-Deploy-Curvine-Cluster/3-Distributed-Mode/01-k8s-Deployment.md","sourceDirName":"2-Deploy/2-Deploy-Curvine-Cluster/3-Distributed-Mode","slug":"/Deploy/Deploy-Curvine-Cluster/Distributed-Mode/k8s-Deployment","permalink":"/docs/Deploy/Deploy-Curvine-Cluster/Distributed-Mode/k8s-Deployment","draft":false,"unlisted":false,"editUrl":"https://github.com/curvineio/curvine-doc/edit/main/docs/2-Deploy/2-Deploy-Curvine-Cluster/3-Distributed-Mode/01-k8s-Deployment.md","tags":[],"version":"current","sidebarPosition":0,"frontMatter":{"sidebar_position":0},"sidebar":"tutorialSidebar","previous":{"title":"Standalone Mode","permalink":"/docs/Deploy/Deploy-Curvine-Cluster/Standalone-Mode"},"next":{"title":"Bare Metal Deployment","permalink":"/docs/Deploy/Deploy-Curvine-Cluster/Distributed-Mode/Bare-Metal-Deployment"}}');var s=l(4848),r=l(8453);const i={sidebar_position:0},a="k8s Deployment",d={},c=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Quick Start",id:"quick-start",level:2},{value:"1. Load Images into Kubernetes Cluster",id:"1-load-images-into-kubernetes-cluster",level:3},{value:"2. Add Helm Repository (Optional)",id:"2-add-helm-repository-optional",level:3},{value:"3. Install Chart",id:"3-install-chart",level:3},{value:"Option A: Install from Helm Repository (Recommended)",id:"option-a-install-from-helm-repository-recommended",level:4},{value:"Option B: Install from Local Chart",id:"option-b-install-from-local-chart",level:4},{value:"4. Verify Deployment",id:"4-verify-deployment",level:3},{value:"5. Access Cluster",id:"5-access-cluster",level:3},{value:"Configuration",id:"configuration",level:2},{value:"View Current Configuration",id:"view-current-configuration",level:3},{value:"Common Parameter Usage Examples",id:"common-parameter-usage-examples",level:3},{value:"Adjust Resource Limits",id:"adjust-resource-limits",level:4},{value:"Configure Node Affinity",id:"configure-node-affinity",level:4},{value:"Enable Worker Privileged Mode",id:"enable-worker-privileged-mode",level:4},{value:"Configure Multiple Data Directories for Worker",id:"configure-multiple-data-directories-for-worker",level:4},{value:"Adjust Log Level",id:"adjust-log-level",level:4},{value:"Configure External Master Service",id:"configure-external-master-service",level:4},{value:"Configuration Parameters",id:"configuration-parameters",level:3},{value:"Global Parameters",id:"global-parameters",level:4},{value:"Cluster Parameters",id:"cluster-parameters",level:4},{value:"Image Configuration",id:"image-configuration",level:4},{value:"Master Configuration",id:"master-configuration",level:4},{value:"Worker Configuration",id:"worker-configuration",level:4},{value:"Service Configuration",id:"service-configuration",level:4},{value:"Service Account &amp; RBAC",id:"service-account--rbac",level:4},{value:"Curvine Configuration",id:"curvine-configuration",level:4},{value:"Configuration Examples",id:"configuration-examples",level:2},{value:"Development Environment (Minimal)",id:"development-environment-minimal",level:3},{value:"Production Environment (High Availability)",id:"production-environment-high-availability",level:3},{value:"Bare Metal Environment (Using hostPath)",id:"bare-metal-environment-using-hostpath",level:3},{value:"Custom Configuration",id:"custom-configuration",level:3},{value:"Storage Configuration",id:"storage-configuration",level:2},{value:"Using PVC (Recommended for Cloud Environments)",id:"using-pvc-recommended-for-cloud-environments",level:3},{value:"Using hostPath (Recommended for Bare Metal)",id:"using-hostpath-recommended-for-bare-metal",level:3},{value:"Using emptyDir (For Testing)",id:"using-emptydir-for-testing",level:3},{value:"Storage Configuration Examples",id:"storage-configuration-examples",level:3},{value:"Quick Start with Default PVC",id:"quick-start-with-default-pvc",level:4},{value:"Cloud Environment Fast SSD Configuration",id:"cloud-environment-fast-ssd-configuration",level:4},{value:"Bare Metal Multi-Storage Type Configuration",id:"bare-metal-multi-storage-type-configuration",level:4},{value:"Hybrid Cloud and Local Storage",id:"hybrid-cloud-and-local-storage",level:4},{value:"Upgrade",id:"upgrade",level:2},{value:"Update Configuration",id:"update-configuration",level:3},{value:"Common Upgrade Scenarios",id:"common-upgrade-scenarios",level:3},{value:"Scale Worker Nodes",id:"scale-worker-nodes",level:4},{value:"Increase Resource Limits",id:"increase-resource-limits",level:4},{value:"Update Image Version",id:"update-image-version",level:4},{value:"Enable Debug Logging",id:"enable-debug-logging",level:4},{value:"Change Storage Configuration",id:"change-storage-configuration",level:4},{value:"View Release History",id:"view-release-history",level:3},{value:"Rollback",id:"rollback",level:3},{value:"Uninstall",id:"uninstall",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Check Pod Status",id:"check-pod-status",level:3},{value:"View ConfigMap",id:"view-configmap",level:3},{value:"View Events",id:"view-events",level:3},{value:"Common Issues",id:"common-issues",level:3}];function o(e){const t={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"k8s-deployment",children:"k8s Deployment"})}),"\n",(0,s.jsx)(t.p,{children:"This chapter introduces how to deploy Curvine distributed storage cluster on Kubernetes using production-grade Helm Chart."}),"\n",(0,s.jsx)(t.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Kubernetes 1.20+"}),"\n",(0,s.jsx)(t.li,{children:"Helm 3.0+"}),"\n",(0,s.jsx)(t.li,{children:"PV provisioner (if using PVC storage)"}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"quick-start",children:"Quick Start"}),"\n",(0,s.jsx)(t.h3,{id:"1-load-images-into-kubernetes-cluster",children:"1. Load Images into Kubernetes Cluster"}),"\n",(0,s.jsxs)(t.p,{children:["Refer to ",(0,s.jsx)(t.a,{href:"/docs/Deploy/Deploy-Curvine-Cluster/Preparation/compile#docker-compilation",children:"docker compile"})," to build images and import them into the Kubernetes cluster."]}),"\n",(0,s.jsx)(t.h3,{id:"2-add-helm-repository-optional",children:"2. Add Helm Repository (Optional)"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"# If Chart is published to repository\nhelm repo add curvine https://curvineio.github.io/helm-charts\nhelm repo update\n"})}),"\n",(0,s.jsx)(t.h3,{id:"3-install-chart",children:"3. Install Chart"}),"\n",(0,s.jsx)(t.h4,{id:"option-a-install-from-helm-repository-recommended",children:"Option A: Install from Helm Repository (Recommended)"}),"\n",(0,s.jsxs)(t.blockquote,{children:["\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Note"}),": The current Helm version provided is based on the main branch and is intended for pre-release use only. To install, you must specify the --devel flag"]}),"\n"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"# Install with default configuration\nhelm install curvine curvine/curvine -n curvine --create-namespace --devel\n\n# Install with custom replica count\nhelm install curvine curvine/curvine -n curvine --create-namespace --devel \\\n  --set master.replicas=5 \\\n  --set worker.replicas=10\n\n# Install with custom values file\nhelm install curvine curvine/curvine -n curvine --create-namespace --devel \\\n  -f https://curvineio.github.io/helm/charts/examples/values-prod.yaml\n"})}),"\n",(0,s.jsx)(t.h4,{id:"option-b-install-from-local-chart",children:"Option B: Install from Local Chart"}),"\n",(0,s.jsxs)(t.blockquote,{children:["\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Note"}),": Run these commands from the ",(0,s.jsx)(t.code,{children:"helm-charts"})," directory (parent directory of ",(0,s.jsx)(t.code,{children:"curvine-runtime"})," folder)"]}),"\n"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"# Install with default configuration\nhelm install curvine ./curvine-runtime -n curvine --create-namespace\n\n# Install with custom replica count\nhelm install curvine ./curvine-runtime -n curvine --create-namespace \\\n  --set master.replicas=5 \\\n  --set worker.replicas=10\n\n# Install with custom values file\nhelm install curvine ./curvine-runtime -n curvine --create-namespace \\\n  -f ./curvine-runtime/examples/values-prod.yaml\n"})}),"\n",(0,s.jsx)(t.h3,{id:"4-verify-deployment",children:"4. Verify Deployment"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"# Check Pod status\nkubectl get pods -n curvine\n\n# View Services\nkubectl get svc -n curvine\n\n# View PersistentVolumeClaims\nkubectl get pvc -n curvine\n\n# Run Helm tests\nhelm test curvine -n curvine\n"})}),"\n",(0,s.jsx)(t.h3,{id:"5-access-cluster",children:"5. Access Cluster"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"# Port forward to access Master Web UI\nkubectl port-forward -n curvine svc/curvine-master 9000:9000\n\n# Access http://localhost:9000\n"})}),"\n",(0,s.jsx)(t.h2,{id:"configuration",children:"Configuration"}),"\n",(0,s.jsx)(t.h3,{id:"view-current-configuration",children:"View Current Configuration"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"# View all current values\nhelm get values curvine -n curvine\n\n# View specific version values in YAML format\nhelm get values curvine -n curvine -o yaml\n\n# View rendered manifests\nhelm get manifest curvine -n curvine\n\n# View Chart's values.yaml\ncat ./curvine-runtime/values.yaml\n\n# View specific parameters\nhelm get values curvine -n curvine | grep master.replicas\n"})}),"\n",(0,s.jsx)(t.h3,{id:"common-parameter-usage-examples",children:"Common Parameter Usage Examples"}),"\n",(0,s.jsx)(t.h4,{id:"adjust-resource-limits",children:"Adjust Resource Limits"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"# Increase Master resources for high-load scenarios\nhelm install curvine ./curvine-runtime -n curvine --create-namespace \\\n  --set master.resources.requests.cpu=2000m \\\n  --set master.resources.requests.memory=4Gi \\\n  --set master.resources.limits.cpu=4000m \\\n  --set master.resources.limits.memory=8Gi\n"})}),"\n",(0,s.jsx)(t.h4,{id:"configure-node-affinity",children:"Configure Node Affinity"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"# Run Master on specific nodes\nhelm install curvine ./curvine-runtime -n curvine --create-namespace \\\n  --set 'master.nodeSelector.node-type=master' \\\n  --set 'worker.nodeSelector.node-type=worker'\n"})}),"\n",(0,s.jsx)(t.h4,{id:"enable-worker-privileged-mode",children:"Enable Worker Privileged Mode"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"# Enabled by default, but can be disabled if needed\nhelm install curvine ./curvine-runtime -n curvine --create-namespace \\\n  --set worker.privileged=false\n"})}),"\n",(0,s.jsx)(t.h4,{id:"configure-multiple-data-directories-for-worker",children:"Configure Multiple Data Directories for Worker"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:'# Create values-multi-data.yaml with the following content:\n# worker:\n#   storage:\n#     dataDirs:\n#       - name: "data1"\n#         type: "SSD"\n#         enabled: true\n#         size: "100Gi"\n#         storageClass: "fast-ssd"\n#         mountPath: "/data/data1"\n#       - name: "data2"\n#         type: "HDD"\n#         enabled: true\n#         size: "500Gi"\n#         storageClass: "slow-hdd"\n#         mountPath: "/data/data2"\n\nhelm install curvine ./curvine-runtime -n curvine --create-namespace \\\n  -f values-multi-data.yaml\n'})}),"\n",(0,s.jsx)(t.h4,{id:"adjust-log-level",children:"Adjust Log Level"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"# Set log level to DEBUG for troubleshooting\nhelm install curvine ./curvine-runtime -n curvine --create-namespace \\\n  --set config.log.level=DEBUG\n"})}),"\n",(0,s.jsx)(t.h4,{id:"configure-external-master-service",children:"Configure External Master Service"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"# Expose Master Service via LoadBalancer\nhelm install curvine ./curvine-runtime -n curvine --create-namespace \\\n  --set service.masterExternal.enabled=true \\\n  --set service.masterExternal.type=LoadBalancer\n"})}),"\n",(0,s.jsx)(t.h3,{id:"configuration-parameters",children:"Configuration Parameters"}),"\n",(0,s.jsx)(t.h4,{id:"global-parameters",children:"Global Parameters"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Parameter"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Description"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Default Value"})]})}),(0,s.jsx)(t.tbody,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"global.clusterDomain"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Kubernetes cluster domain"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"cluster.local"})]})})]}),"\n",(0,s.jsx)(t.h4,{id:"cluster-parameters",children:"Cluster Parameters"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Parameter"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Description"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Default Value"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"cluster.id"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Cluster identifier"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"curvine"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"cluster.formatMaster"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Format Master data on startup"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"false"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"cluster.formatWorker"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Format Worker data on startup"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"false"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"cluster.formatJournal"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Format journal data on startup"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"false"})]})]})]}),"\n",(0,s.jsx)(t.h4,{id:"image-configuration",children:"Image Configuration"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Parameter"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Description"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Default Value"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"image.repository"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Container image repository"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"docker.io/curvine"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"image.tag"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Container image tag"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"latest"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"image.pullPolicy"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Image pull policy"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"IfNotPresent"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"image.pullSecrets"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Image pull secrets"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"[]"})]})]})]}),"\n",(0,s.jsx)(t.h4,{id:"master-configuration",children:"Master Configuration"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Parameter"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Description"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Default Value"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"master.replicas"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Master replica count (must be odd: 1, 3, 5, 7...)"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"3"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"master.rpcPort"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"RPC port"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"8995"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"master.journalPort"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Journal/Raft port"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"8996"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"master.webPort"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Web UI port"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"9000"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"master.web1Port"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Additional Web port"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"9001"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"master.storage.meta.enabled"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Enable metadata storage"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"true"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"master.storage.meta.storageClass"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Metadata storage class"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:'"" (default)'})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"master.storage.meta.size"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Metadata storage size"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"10Gi"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"master.storage.meta.hostPath"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Metadata host path (used when no storageClass)"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:'""'})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"master.storage.meta.mountPath"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Metadata mount path"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"/opt/curvine/data/meta"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"master.storage.journal.enabled"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Enable journal storage"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"true"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"master.storage.journal.storageClass"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Journal storage class"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:'"" (default)'})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"master.storage.journal.size"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Journal storage size"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"50Gi"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"master.storage.journal.hostPath"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Journal host path (used when no storageClass)"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:'""'})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"master.storage.journal.mountPath"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Journal mount path"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"/opt/curvine/data/journal"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"master.resources.requests.cpu"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"CPU request"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"1000m"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"master.resources.requests.memory"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Memory request"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"2Gi"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"master.resources.limits.cpu"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"CPU limit"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"2000m"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"master.resources.limits.memory"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Memory limit"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"4Gi"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"master.nodeSelector"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Node selector labels"}),(0,s.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"master.tolerations"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Pod tolerations"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"[]"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"master.affinity"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Pod affinity rules"}),(0,s.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"master.labels"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Additional labels"}),(0,s.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"master.annotations"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Additional annotations"}),(0,s.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"master.extraEnv"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Additional environment variables"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"[]"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"master.extraVolumes"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Additional volumes"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"[]"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"master.extraVolumeMounts"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Additional volume mounts"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"[]"})]})]})]}),"\n",(0,s.jsx)(t.h4,{id:"worker-configuration",children:"Worker Configuration"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Parameter"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Description"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Default Value"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"worker.replicas"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Worker replica count"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"3"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"worker.rpcPort"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"RPC port"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"8997"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"worker.webPort"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Web UI port"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"9001"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"worker.hostNetwork"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Use host network"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"false"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"worker.dnsPolicy"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"DNS policy"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"ClusterFirst"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"worker.privileged"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Privileged mode (required for FUSE)"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"true"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"worker.storage.dataDirs[0].name"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Data directory name"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"data1"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"worker.storage.dataDirs[0].type"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Storage type (SSD/HDD)"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"SSD"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"worker.storage.dataDirs[0].enabled"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Enable data directory"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"true"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"worker.storage.dataDirs[0].size"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Data directory size"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"10Gi"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"worker.storage.dataDirs[0].storageClass"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Storage class"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:'"" (default)'})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"worker.storage.dataDirs[0].hostPath"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Host path (used when no storageClass)"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:'""'})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"worker.storage.dataDirs[0].mountPath"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Mount path"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"/data/data1"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"worker.resources.requests.cpu"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"CPU request"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"2000m"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"worker.resources.requests.memory"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Memory request"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"4Gi"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"worker.resources.limits.cpu"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"CPU limit"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"4000m"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"worker.resources.limits.memory"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Memory limit"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"8Gi"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"worker.nodeSelector"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Node selector labels"}),(0,s.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"worker.tolerations"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Pod tolerations"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"[]"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"worker.antiAffinity.enabled"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Enable Pod anti-affinity"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"true"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"worker.antiAffinity.type"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Anti-affinity type (required/preferred)"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"preferred"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"worker.labels"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Additional labels"}),(0,s.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"worker.annotations"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Additional annotations"}),(0,s.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"worker.extraEnv"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Additional environment variables"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"[]"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"worker.extraVolumes"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Additional volumes"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"[]"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"worker.extraVolumeMounts"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Additional volume mounts"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"[]"})]})]})]}),"\n",(0,s.jsx)(t.h4,{id:"service-configuration",children:"Service Configuration"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Parameter"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Description"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Default Value"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"service.master.type"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Master Service type"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"ClusterIP"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"service.master.annotations"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Master Service annotations"}),(0,s.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"service.masterExternal.enabled"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Enable external Master Service"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"false"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"service.masterExternal.type"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"External Service type"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"ClusterIP"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"service.masterExternal.annotations"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"External Service annotations"}),(0,s.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"service.masterExternal.nodePort"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"NodePort configuration"}),(0,s.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"service.masterExternal.loadBalancerIP"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"LoadBalancer IP"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:'""'})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"service.masterExternal.loadBalancerSourceRanges"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"LoadBalancer source ranges"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"[]"})]})]})]}),"\n",(0,s.jsx)(t.h4,{id:"service-account--rbac",children:"Service Account & RBAC"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Parameter"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Description"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Default Value"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"serviceAccount.create"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Create Service Account"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"true"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"serviceAccount.name"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Service Account name"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:'"" (auto-generated)'})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"serviceAccount.annotations"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Service Account annotations"}),(0,s.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"rbac.create"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Create RBAC resources"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"true"})]})]})]}),"\n",(0,s.jsx)(t.h4,{id:"curvine-configuration",children:"Curvine Configuration"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Parameter"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Description"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Default Value"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"config.master.metaDir"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Master metadata directory"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"/opt/curvine/data/meta"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"config.journal.enable"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Enable journal"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"true"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"config.journal.journalDir"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Journal directory"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"/opt/curvine/data/journal"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"config.client.blockSizeStr"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Client block size"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"64MB"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"config.log.level"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Log level (INFO/DEBUG/WARN/ERROR)"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"INFO"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"config.log.logDir"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Log directory"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"/opt/curvine/logs"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"configOverrides.master"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Master configuration override"}),(0,s.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"configOverrides.journal"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Journal configuration override"}),(0,s.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"configOverrides.worker"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Worker configuration override"}),(0,s.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"configOverrides.client"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Client configuration override"}),(0,s.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"configOverrides.log"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Log configuration override"}),(0,s.jsx)(t.td,{style:{textAlign:"left"}})]})]})]}),"\n",(0,s.jsxs)(t.p,{children:["For the complete parameter list, please refer to ",(0,s.jsx)(t.code,{children:"values.yaml"}),"."]}),"\n",(0,s.jsx)(t.h2,{id:"configuration-examples",children:"Configuration Examples"}),"\n",(0,s.jsx)(t.h3,{id:"development-environment-minimal",children:"Development Environment (Minimal)"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"# Install from Helm repository\nhelm install curvine curvine/curvine -n curvine --create-namespace --devel \\\n  --set master.replicas=1 \\\n  --set worker.replicas=1\n\n# Install from local Chart (run in helm-charts directory)\nhelm install curvine ./curvine-runtime -n curvine --create-namespace \\\n  -f ./curvine-runtime/examples/values-dev.yaml\n"})}),"\n",(0,s.jsx)(t.h3,{id:"production-environment-high-availability",children:"Production Environment (High Availability)"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"# Install from Helm repository\nhelm install curvine curvine/curvine -n curvine --create-namespace --devel \\\n  --set master.replicas=5 \\\n  --set worker.replicas=10 \\\n  --set master.storage.meta.storageClass=fast-ssd \\\n  --set master.storage.journal.storageClass=fast-ssd\n\n# Install from local Chart (run in helm-charts directory)\nhelm install curvine ./curvine-runtime -n curvine --create-namespace \\\n  -f ./curvine-runtime/examples/values-prod.yaml\n"})}),"\n",(0,s.jsx)(t.h3,{id:"bare-metal-environment-using-hostpath",children:"Bare Metal Environment (Using hostPath)"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"# Install from local Chart (run in helm-charts directory)\nhelm install curvine ./curvine-runtime -n curvine --create-namespace \\\n  -f ./curvine-runtime/examples/values-baremetal.yaml\n"})}),"\n",(0,s.jsx)(t.h3,{id:"custom-configuration",children:"Custom Configuration"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"# Install from Helm repository\nhelm install curvine curvine/curvine -n curvine --create-namespace --devel \\\n  --set master.replicas=5 \\\n  --set worker.replicas=10 \\\n  --set master.storage.meta.storageClass=fast-ssd \\\n  --set worker.storage.dataDirs[0].storageClass=fast-ssd \\\n  --set worker.storage.dataDirs[0].size=500Gi\n\n# Install from local Chart (run in helm-charts directory)\nhelm install curvine ./curvine-runtime -n curvine --create-namespace \\\n  --set master.replicas=5 \\\n  --set worker.replicas=10 \\\n  --set master.storage.meta.storageClass=fast-ssd \\\n  --set worker.storage.dataDirs[0].storageClass=fast-ssd \\\n  --set worker.storage.dataDirs[0].size=500Gi\n"})}),"\n",(0,s.jsx)(t.h2,{id:"storage-configuration",children:"Storage Configuration"}),"\n",(0,s.jsx)(t.h3,{id:"using-pvc-recommended-for-cloud-environments",children:"Using PVC (Recommended for Cloud Environments)"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-yaml",children:'master:\n  storage:\n    meta:\n      storageClass: "fast-ssd"\n      size: "20Gi"\n    journal:\n      storageClass: "fast-ssd"\n      size: "100Gi"\n\nworker:\n  storage:\n    dataDirs:\n      - name: "data1"\n        type: "SSD"\n        enabled: true\n        size: "100Gi"\n        storageClass: "fast-ssd"\n        mountPath: "/data/data1"\n'})}),"\n",(0,s.jsx)(t.h3,{id:"using-hostpath-recommended-for-bare-metal",children:"Using hostPath (Recommended for Bare Metal)"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-yaml",children:'master:\n  storage:\n    meta:\n      storageClass: ""\n      hostPath: "/mnt/curvine/master/meta"\n    journal:\n      storageClass: ""\n      hostPath: "/mnt/curvine/master/journal"\n\nworker:\n  storage:\n    dataDirs:\n      - name: "data1"\n        type: "SSD"\n        enabled: true\n        size: "100Gi"\n        storageClass: ""\n        hostPath: "/mnt/nvme0n1/curvine"\n        mountPath: "/data/data1"\n'})}),"\n",(0,s.jsx)(t.h3,{id:"using-emptydir-for-testing",children:"Using emptyDir (For Testing)"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-yaml",children:'master:\n  storage:\n    meta:\n      storageClass: ""\n      hostPath: ""\n    journal:\n      storageClass: ""\n      hostPath: ""\n\nworker:\n  storage:\n    dataDirs:\n      - name: "data1"\n        storageClass: ""\n        hostPath: ""\n'})}),"\n",(0,s.jsx)(t.h3,{id:"storage-configuration-examples",children:"Storage Configuration Examples"}),"\n",(0,s.jsx)(t.h4,{id:"quick-start-with-default-pvc",children:"Quick Start with Default PVC"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"# Use default storage class (fastest startup method)\nhelm install curvine ./curvine-runtime -n curvine --create-namespace\n"})}),"\n",(0,s.jsx)(t.h4,{id:"cloud-environment-fast-ssd-configuration",children:"Cloud Environment Fast SSD Configuration"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"# AWS/GCP/Azure fast SSD storage\nhelm install curvine ./curvine-runtime -n curvine --create-namespace \\\n  --set master.storage.meta.storageClass=fast-ssd \\\n  --set master.storage.journal.storageClass=fast-ssd \\\n  --set 'worker.storage.dataDirs[0].storageClass=fast-ssd' \\\n  --set 'worker.storage.dataDirs[0].size=500Gi'\n"})}),"\n",(0,s.jsx)(t.h4,{id:"bare-metal-multi-storage-type-configuration",children:"Bare Metal Multi-Storage Type Configuration"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:'# Create values-baremetal-multi.yaml:\n# master:\n#   storage:\n#     meta:\n#       storageClass: ""\n#       hostPath: "/mnt/nvme/master/meta"\n#     journal:\n#       storageClass: ""\n#       hostPath: "/mnt/nvme/master/journal"\n# \n# worker:\n#   storage:\n#     dataDirs:\n#       - name: "nvme"\n#         type: "SSD"\n#         enabled: true\n#         size: "200Gi"\n#         storageClass: ""\n#         hostPath: "/mnt/nvme/worker"\n#         mountPath: "/data/nvme"\n#       - name: "ssd"\n#         type: "SSD"\n#         enabled: true\n#         size: "500Gi"\n#         storageClass: ""\n#         hostPath: "/mnt/ssd/worker"\n#         mountPath: "/data/ssd"\n#       - name: "hdd"\n#         type: "HDD"\n#         enabled: true\n#         size: "2000Gi"\n#         storageClass: ""\n#         hostPath: "/mnt/hdd/worker"\n#         mountPath: "/data/hdd"\n\nhelm install curvine ./curvine-runtime -n curvine --create-namespace \\\n  -f values-baremetal-multi.yaml\n'})}),"\n",(0,s.jsx)(t.h4,{id:"hybrid-cloud-and-local-storage",children:"Hybrid Cloud and Local Storage"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"# Master uses cloud PVC, Worker uses local hostPath\nhelm install curvine ./curvine-runtime -n curvine --create-namespace \\\n  --set master.storage.meta.storageClass=cloud-ssd \\\n  --set master.storage.journal.storageClass=cloud-ssd \\\n  --set 'worker.storage.dataDirs[0].storageClass=\"\"' \\\n  --set 'worker.storage.dataDirs[0].hostPath=/mnt/local/data'\n"})}),"\n",(0,s.jsx)(t.h2,{id:"upgrade",children:"Upgrade"}),"\n",(0,s.jsx)(t.h3,{id:"update-configuration",children:"Update Configuration"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"# Scale Worker replicas (from Helm repository)\nhelm upgrade curvine curvine/curvine -n curvine --devel \\\n  --set worker.replicas=15\n\n# Upgrade image version (from Helm repository)\nhelm upgrade curvine curvine/curvine -n curvine --devel \\\n  --set image.tag=v1.1.0\n\n# Upgrade with new values file (from local Chart, run in helm-charts directory)\nhelm upgrade curvine ./curvine-runtime -n curvine \\\n  -f ./curvine-runtime/values-new.yaml\n"})}),"\n",(0,s.jsxs)(t.blockquote,{children:["\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Note"}),":"]}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsx)(t.li,{children:"Master replica count and journal storage class cannot be modified during upgrades. To modify, delete and redeploy the cluster."}),"\n",(0,s.jsx)(t.li,{children:"Parameters not modified during upgrade will be reset to default configuration. If Master replica count and journal storage class were modified during installation, these two parameters need to be included during updates."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(t.h3,{id:"common-upgrade-scenarios",children:"Common Upgrade Scenarios"}),"\n",(0,s.jsx)(t.h4,{id:"scale-worker-nodes",children:"Scale Worker Nodes"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"# Increase Worker replicas from 3 to 10\nhelm upgrade curvine ./curvine-runtime -n curvine \\\n  --set worker.replicas=10\n"})}),"\n",(0,s.jsx)(t.h4,{id:"increase-resource-limits",children:"Increase Resource Limits"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"# Increase Master resources for better performance\nhelm upgrade curvine ./curvine-runtime -n curvine \\\n  --set master.resources.limits.cpu=4000m \\\n  --set master.resources.limits.memory=8Gi\n"})}),"\n",(0,s.jsx)(t.h4,{id:"update-image-version",children:"Update Image Version"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"# Upgrade to new Curvine version\nhelm upgrade curvine ./curvine-runtime -n curvine \\\n  --set image.tag=v1.2.0\n"})}),"\n",(0,s.jsx)(t.h4,{id:"enable-debug-logging",children:"Enable Debug Logging"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"# Temporarily enable debug logging for troubleshooting\nhelm upgrade curvine ./curvine-runtime -n curvine \\\n  --set config.log.level=DEBUG\n"})}),"\n",(0,s.jsx)(t.h4,{id:"change-storage-configuration",children:"Change Storage Configuration"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"# Migrate to faster storage class\nhelm upgrade curvine ./curvine-runtime -n curvine \\\n  --set master.storage.meta.storageClass=ultra-ssd \\\n  --set master.storage.journal.storageClass=ultra-ssd\n"})}),"\n",(0,s.jsx)(t.h3,{id:"view-release-history",children:"View Release History"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"helm history curvine -n curvine\n"})}),"\n",(0,s.jsx)(t.h3,{id:"rollback",children:"Rollback"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"# Rollback to previous version\nhelm rollback curvine -n curvine\n\n# Rollback to specific version\nhelm rollback curvine 2 -n curvine\n"})}),"\n",(0,s.jsx)(t.h2,{id:"uninstall",children:"Uninstall"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"# Uninstall Chart (keep PVC)\nhelm uninstall curvine -n curvine\n\n# Delete PersistentVolumeClaims\nkubectl delete pvc -n curvine -l app.kubernetes.io/instance=curvine\n\n# Delete namespace\nkubectl delete namespace curvine\n"})}),"\n",(0,s.jsx)(t.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,s.jsx)(t.h3,{id:"check-pod-status",children:"Check Pod Status"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"kubectl get pods -n curvine\nkubectl describe pod <pod-name> -n curvine\nkubectl logs <pod-name> -n curvine\n"})}),"\n",(0,s.jsx)(t.h3,{id:"view-configmap",children:"View ConfigMap"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"kubectl get configmap -n curvine\nkubectl describe configmap curvine-config -n curvine\n"})}),"\n",(0,s.jsx)(t.h3,{id:"view-events",children:"View Events"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"kubectl get events -n curvine --sort-by='.lastTimestamp'\n"})}),"\n",(0,s.jsx)(t.h3,{id:"common-issues",children:"Common Issues"}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"Master Replica Validation Failed"})}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:["Error: ",(0,s.jsx)(t.code,{children:"master.replicas must be an odd number"})]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"Solution: Ensure Master replica count is odd (1, 3, 5, 7...)"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"PVC Cannot Bind"})}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"Check if StorageClass exists"}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"Verify PV provisioner is working properly"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"Pod Startup Failed"})}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"Verify container image exists"}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"Check if resource quotas are sufficient"}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"View Pod logs for details"}),"\n"]}),"\n"]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},8453:(e,t,l)=>{l.d(t,{R:()=>i,x:()=>a});var n=l(6540);const s={},r=n.createContext(s);function i(e){const t=n.useContext(r);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),n.createElement(r.Provider,{value:t},e.children)}}}]);