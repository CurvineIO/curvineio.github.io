"use strict";(self.webpackChunkcurvine_doc=self.webpackChunkcurvine_doc||[]).push([[1417],{5565:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>l,contentTitle:()=>i,default:()=>u,frontMatter:()=>a,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"Deploy/Deploy-Curvine-Cluster/Deployment-Architecture","title":"Deployment Architecture","description":"Before deploying a cluster, you need to understand the roles of each Curvine component and their interaction patterns. The following diagram shows the typical deployment architecture of Curvine, divided into three layers from top to bottom:","source":"@site/docs/2-Deploy/2-Deploy-Curvine-Cluster/0-Deployment-Architecture.md","sourceDirName":"2-Deploy/2-Deploy-Curvine-Cluster","slug":"/Deploy/Deploy-Curvine-Cluster/Deployment-Architecture","permalink":"/docs/Deploy/Deploy-Curvine-Cluster/Deployment-Architecture","draft":false,"unlisted":false,"editUrl":"https://github.com/curvineio/curvine-doc/edit/main/docs/2-Deploy/2-Deploy-Curvine-Cluster/0-Deployment-Architecture.md","tags":[],"version":"current","sidebarPosition":0,"frontMatter":{"sidebar_position":0},"sidebar":"tutorialSidebar","previous":{"title":"Quick Start","permalink":"/docs/Deploy/quick-start"},"next":{"title":"Download and Compile Curvine","permalink":"/docs/Deploy/Deploy-Curvine-Cluster/Preparation/compile"}}');var s=n(4848),o=n(8453);const a={sidebar_position:0},i="Deployment Architecture",l={},c=[{value:"Component Roles",id:"component-roles",level:2},{value:"Relationship between curvine master, curvine worker, and curvine fuse",id:"relationship-between-curvine-master-curvine-worker-and-curvine-fuse",level:2},{value:"curvine fuse Use Cases",id:"curvine-fuse-use-cases",level:2}];function d(e){const r={a:"a",h1:"h1",h2:"h2",header:"header",li:"li",mermaid:"mermaid",p:"p",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.header,{children:(0,s.jsx)(r.h1,{id:"deployment-architecture",children:"Deployment Architecture"})}),"\n",(0,s.jsx)(r.p,{children:"Before deploying a cluster, you need to understand the roles of each Curvine component and their interaction patterns. The following diagram shows the typical deployment architecture of Curvine, divided into three layers from top to bottom:"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Application Layer"}),": Includes curvine-fuse, applications accessed via SDK, CLI management tools, etc. For details, refer to ",(0,s.jsx)(r.a,{href:"/docs/User-Manuals/Access/fuse",children:"Access Methods"}),"."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Curvine Cluster Service Layer"}),": Consists of curvine-master and curvine-worker forming the Curvine cluster."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"UFS Cluster"}),": As the underlying storage backend, connected to the Curvine cluster through ",(0,s.jsx)(r.a,{href:"/docs/User-Manuals/Key-Features/ufs#mounting",children:"mounting"}),", such as S3, HDFS, and other clusters."]}),"\n"]}),"\n",(0,s.jsx)(r.mermaid,{value:"%%{init: {'theme': 'base', 'themeVariables': { 'background': '#ffffff', 'primaryColor': '#4a9eff', 'primaryTextColor': '#1a202c', 'primaryBorderColor': '#3182ce', 'lineColor': '#4a5568', 'secondaryColor': '#805ad5', 'tertiaryColor': '#38a169', 'mainBkg': '#ffffff', 'nodeBorder': '#4a5568', 'clusterBkg': '#f8f9fa', 'clusterBorder': '#dee2e6', 'titleColor': '#1a202c'}}}%%\nflowchart TD\n    subgraph Client_Applications\n        App1[Application 1<br/>FUSE mount]\n        App2[Application 2<br/>Hadoop HDFS API]\n        App3[Application 3<br/>S3 SDK]\n    end\n\n    subgraph Cluster_Layer\n        subgraph Master_Cluster\n            MasterLeader[Master Leader<br/>MasterHandler<br/>RocksDB]\n            MasterFollower1[Master Follower<br/>JournalLoader<br/>RocksDB]\n            MasterFollower2[Master Follower<br/>JournalLoader<br/>RocksDB]\n            MasterLeader -. Raft replication .-> MasterFollower1\n            MasterLeader -. Raft replication .-> MasterFollower2\n        end\n\n        subgraph Worker_Cluster\n            Worker1[Worker 1<br/>MEM: 64GB<br/>SSD: 1TB<br/>HDD: 10TB]\n            Worker2[Worker 2<br/>MEM: 64GB<br/>SSD: 1TB<br/>HDD: 10TB]\n            Worker3[Worker 3<br/>MEM: 64GB<br/>SSD: 1TB<br/>HDD: 10TB]\n            WorkerN[Worker N<br/>...]\n        end\n    end\n\n    subgraph Storage_Backend\n        S3Bucket[S3 Bucket]\n        HDFSCluster[HDFS Cluster]\n    end\n\n    App1 --\x3e MasterLeader\n    App1 --\x3e Worker1\n    App2 --\x3e MasterLeader\n    App2 --\x3e Worker2\n    App3 --\x3e MasterLeader\n    App3 --\x3e Worker3\n\n    MasterLeader --\x3e Worker1\n    MasterLeader --\x3e Worker2\n    MasterLeader --\x3e Worker3\n    MasterLeader --\x3e WorkerN\n\n    Worker1 -. Cache backend .-> S3Bucket\n    Worker2 -. Cache backend .-> HDFSCluster\n    Worker3 -. Cache backend .-> S3Bucket\n    WorkerN -. Cache backend .-> HDFSCluster\n\n    %% Styles\n    classDef appStyle fill:#ed8936,stroke:#c05621,color:#fff,stroke-width:2px\n    classDef masterStyle fill:#4a9eff,stroke:#2b6cb0,color:#fff,stroke-width:2px\n    classDef workerStyle fill:#805ad5,stroke:#553c9a,color:#fff,stroke-width:2px\n    classDef storageStyle fill:#fc8181,stroke:#c53030,color:#1a202c,stroke-width:2px\n    \n    class App1,App2,App3 appStyle\n    class MasterLeader,MasterFollower1,MasterFollower2 masterStyle\n    class Worker1,Worker2,Worker3,WorkerN workerStyle\n    class S3Bucket,HDFSCluster storageStyle"}),"\n",(0,s.jsx)(r.h2,{id:"component-roles",children:"Component Roles"}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Master Node"}),": Responsible for metadata management, worker node coordination, and load balancing"]}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"Maintains file system metadata (directory structure, file locations, etc.)"}),"\n",(0,s.jsx)(r.li,{children:"Manages worker node registration and health checks"}),"\n",(0,s.jsx)(r.li,{children:"Handles client metadata requests"}),"\n",(0,s.jsx)(r.li,{children:"Uses Raft consensus algorithm to ensure metadata consistency"}),"\n"]}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Worker Node"}),": Responsible for data storage and processing"]}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"Stores actual data blocks (supports memory, SSD, HDD multi-level caching)"}),"\n",(0,s.jsx)(r.li,{children:"Handles data read/write requests"}),"\n",(0,s.jsx)(r.li,{children:"Periodically sends heartbeats to Master"}),"\n",(0,s.jsx)(r.li,{children:"Supports multi-replica data storage"}),"\n"]}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"FUSE Interface"}),": Provides POSIX file system interface, mounting distributed cache as local file system"]}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"S3 Gateway"}),": Provides S3-compatible object storage interface, supporting S3 API"]}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Client Library"}),": Provides multi-language APIs, communicating with Master and Worker nodes via RPC"]}),"\n",(0,s.jsx)(r.h2,{id:"relationship-between-curvine-master-curvine-worker-and-curvine-fuse",children:"Relationship between curvine master, curvine worker, and curvine fuse"}),"\n",(0,s.jsx)(r.mermaid,{value:"%%{init: {'theme': 'base', 'themeVariables': { 'background': '#ffffff', 'primaryColor': '#4a9eff', 'primaryTextColor': '#1a202c', 'primaryBorderColor': '#3182ce', 'lineColor': '#4a5568', 'secondaryColor': '#805ad5', 'tertiaryColor': '#38a169', 'mainBkg': '#ffffff', 'nodeBorder': '#4a5568', 'clusterBkg': '#f8f9fa', 'clusterBorder': '#dee2e6', 'titleColor': '#1a202c'}}}%%\nflowchart LR\n    subgraph Client_Layer\n        App[Applications<br/>ls,cat,cp]\n        fuse[curvine-fuse<br/>FUSE Daemon]\n        App -- POSIX System Calls --\x3e fuse\n    end\n\n    subgraph Sever_Side\n        master[curvine-master<br/>Metadata Management]\n        worker[curvine-worker<br/>Data Storage]\n        master -- Coordination --\x3e worker\n    end\n\n    fuse -- RPC Communication  --\x3e master\n    fuse -- Data Read/Write  --\x3e worker\n\n    %% Styles\n    classDef appStyle fill:#ed8936,stroke:#c05621,color:#fff,stroke-width:2px\n    classDef fuseStyle fill:#ecc94b,stroke:#b7791f,color:#1a202c,stroke-width:2px\n    classDef masterStyle fill:#4a9eff,stroke:#2b6cb0,color:#fff,stroke-width:2px\n    classDef workerStyle fill:#805ad5,stroke:#553c9a,color:#fff,stroke-width:2px\n    \n    class App appStyle\n    class fuse fuseStyle\n    class master masterStyle\n    class worker workerStyle"}),"\n",(0,s.jsx)(r.h2,{id:"curvine-fuse-use-cases",children:"curvine fuse Use Cases"}),"\n",(0,s.jsx)(r.p,{children:"When you need to enable existing applications to access Curvine distributed cache without modification, FUSE can be used to mount Curvine as a local file system."}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["Default mount points","\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"/curvine-fuse"}),"\n",(0,s.jsx)(r.li,{children:"/var/lib/curvine-fuse (Kubernetes environment)"}),"\n"]}),"\n"]}),"\n"]})]})}function u(e={}){const{wrapper:r}={...(0,o.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,r,n)=>{n.d(r,{R:()=>a,x:()=>i});var t=n(6540);const s={},o=t.createContext(s);function a(e){const r=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function i(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),t.createElement(o.Provider,{value:r},e.children)}}}]);