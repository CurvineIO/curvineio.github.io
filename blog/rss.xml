<?xml version="1.0" encoding="utf-8"?><?xml-stylesheet type="text/xsl" href="rss.xsl"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>Curvine Blog</title>
        <link>https://curvineio.github.io/blog</link>
        <description>Curvine Blog</description>
        <lastBuildDate>Thu, 27 Nov 2025 00:00:00 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[Observability Construction for Curvine]]></title>
            <link>https://curvineio.github.io/blog/2025/11/27/observability</link>
            <guid>https://curvineio.github.io/blog/2025/11/27/observability</guid>
            <pubDate>Thu, 27 Nov 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[Curvine as a high-performance distributed cache system has strict requirements for performance, stability, and reliability. To ensure the system maintains optimal performance under various load conditions and to quickly locate and resolve potential issues, we have built a comprehensive monitoring solution based on Prometheus and Grafana. This monitoring system provides deep observability capabilities for Master nodes, Worker nodes, Fuse nodes, and S3 Gateway, enabling real-time monitoring of cache cluster scale, operational status, performance metrics, and resource usage through the collection of key metrics from each component.]]></description>
            <content:encoded><![CDATA[<p>Curvine as a high-performance distributed cache system has strict requirements for performance, stability, and reliability. To ensure the system maintains optimal performance under various load conditions and to quickly locate and resolve potential issues, we have built a comprehensive monitoring solution based on Prometheus and Grafana. This monitoring system provides deep observability capabilities for Master nodes, Worker nodes, Fuse nodes, and S3 Gateway, enabling real-time monitoring of cache cluster scale, operational status, performance metrics, and resource usage through the collection of key metrics from each component.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="monitoring-architecture">Monitoring Architecture<a href="https://curvineio.github.io/blog/2025/11/27/observability#monitoring-architecture" class="hash-link" aria-label="Direct link to Monitoring Architecture" title="Direct link to Monitoring Architecture">‚Äã</a></h2>
<p>This monitoring system adopts the following core components:</p>
<ul>
<li><strong>Prometheus</strong>: Responsible for metric collection, storage, and querying</li>
<li><strong>Grafana</strong>: Provides data visualization and dashboard display</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="observability-metrics">Observability Metrics<a href="https://curvineio.github.io/blog/2025/11/27/observability#observability-metrics" class="hash-link" aria-label="Direct link to Observability Metrics" title="Direct link to Observability Metrics">‚Äã</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="master-node-metrics">Master Node Metrics<a href="https://curvineio.github.io/blog/2025/11/27/observability#master-node-metrics" class="hash-link" aria-label="Direct link to Master Node Metrics" title="Direct link to Master Node Metrics">‚Äã</a></h3>
<p>As the cluster's metadata management center, Master nodes provide the following key metrics:</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="capacity-metrics">Capacity Metrics<a href="https://curvineio.github.io/blog/2025/11/27/observability#capacity-metrics" class="hash-link" aria-label="Direct link to Capacity Metrics" title="Direct link to Capacity Metrics">‚Äã</a></h4>
<p>Capacity metrics are fundamental for evaluating system storage resource usage, crucial for capacity planning, resource optimization, and preventive maintenance. By monitoring these metrics, storage bottlenecks can be identified in a timely manner, capacity requirements can be predicted, and sufficient space can be ensured to handle business growth.</p>
<p><img decoding="async" loading="lazy" alt="Capacity Metrics" src="https://curvineio.github.io/assets/images/1-077a749f26cfbb75badd1d58ebf61bb0.png" width="864" height="428" class="img_ev3q"></p>
<table><thead><tr><th>Metric Name</th><th>Description</th></tr></thead><tbody><tr><td>inode_dir_num</td><td>Number of directories</td></tr><tr><td>inode_file_num</td><td>Number of files</td></tr><tr><td>num_blocks</td><td>Total number of blocks</td></tr><tr><td>blocks_size_avg</td><td>Average block size</td></tr><tr><td>capacity</td><td>Total storage capacity</td></tr><tr><td>available</td><td>Available storage space</td></tr><tr><td>fs_used</td><td>File system used space</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="resource-metrics">Resource Metrics<a href="https://curvineio.github.io/blog/2025/11/27/observability#resource-metrics" class="hash-link" aria-label="Direct link to Resource Metrics" title="Direct link to Resource Metrics">‚Äã</a></h4>
<p>Resource metrics reflect the system's usage of computing resources, significant for performance tuning, resource allocation, and fault prevention. Memory usage directly affects system performance and stability, especially for RocksDB as the core storage engine, whose memory usage needs precise monitoring to avoid memory overflow and performance degradation.</p>
<p><img decoding="async" loading="lazy" alt="Resource Metrics" src="https://curvineio.github.io/assets/images/2-9f034222e7c2428bd8f17a52a86490b0.png" width="662" height="385" class="img_ev3q"></p>
<table><thead><tr><th>Metric Name</th><th>Description</th></tr></thead><tbody><tr><td>used_memory_bytes</td><td>Used memory in bytes</td></tr><tr><td>rocksdb_used_memory_bytes</td><td>RocksDB memory usage</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="cluster-status-metrics">Cluster Status Metrics<a href="https://curvineio.github.io/blog/2025/11/27/observability#cluster-status-metrics" class="hash-link" aria-label="Direct link to Cluster Status Metrics" title="Direct link to Cluster Status Metrics">‚Äã</a></h4>
<p>Cluster status metrics provide a real-time view of the overall system health, crucial for ensuring high availability and data consistency. By monitoring Worker node status and replication task execution, node failures, data inconsistencies, and other issues can be quickly identified, ensuring reliable operation of the distributed cache system.</p>
<p><img decoding="async" loading="lazy" alt="Cluster Status" src="https://curvineio.github.io/assets/images/3-96e8a3a57a8c6e1388978ce54ca765de.png" width="393" height="340" class="img_ev3q"></p>
<table><thead><tr><th>Metric Name</th><th>Description</th></tr></thead><tbody><tr><td>worker_num</td><td>Number of workers (classified by status)</td></tr><tr><td>replication_staging_number</td><td>Number of blocks waiting for replication</td></tr><tr><td>replication_inflight_number</td><td>Number of blocks currently being replicated</td></tr><tr><td>replication_failure_count</td><td>Total cumulative replication failures</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="performance-metrics">Performance Metrics<a href="https://curvineio.github.io/blog/2025/11/27/observability#performance-metrics" class="hash-link" aria-label="Direct link to Performance Metrics" title="Direct link to Performance Metrics">‚Äã</a></h4>
<p>Performance metrics are core indicators for measuring system responsiveness and processing efficiency, playing a key role in performance optimization and capacity planning. The total count and total time of RPC requests can be used to calculate average response time, directly reflecting system processing capability, while analysis of various operation durations helps identify performance bottlenecks and guide system optimization.</p>
<p><img decoding="async" loading="lazy" alt="Performance Metrics" src="https://curvineio.github.io/assets/images/4-1f0b071455311caac7e1d80d77ff8131.png" width="1185" height="494" class="img_ev3q"></p>
<table><thead><tr><th>Metric Name</th><th>Description</th></tr></thead><tbody><tr><td>rpc_request_total_count</td><td>Total RPC request count</td></tr><tr><td>rpc_request_total_time</td><td>Total RPC request time</td></tr><tr><td>operation_duration</td><td>Operation duration (classified by type, excluding heartbeat)</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="journal-system-metrics">Journal System Metrics<a href="https://curvineio.github.io/blog/2025/11/27/observability#journal-system-metrics" class="hash-link" aria-label="Direct link to Journal System Metrics" title="Direct link to Journal System Metrics">‚Äã</a></h4>
<p>The Journal system is a key component for ensuring data consistency and fault recovery, and its performance directly affects system write performance and data reliability. Monitoring Journal queue length and flush performance can help identify write bottlenecks in a timely manner, prevent data loss risks, and ensure system stability in high-concurrency write scenarios.</p>
<p><img decoding="async" loading="lazy" alt="Journal Metrics" src="https://curvineio.github.io/assets/images/5-7ea07d7b4e56aadaacf098b7d5b082d4.png" width="727" height="115" class="img_ev3q"></p>
<table><thead><tr><th>Metric Name</th><th>Description</th></tr></thead><tbody><tr><td>journal_queue_len</td><td>Journal queue length</td></tr><tr><td>journal_flush_count</td><td>Journal flush count</td></tr><tr><td>journal_flush_time</td><td>Journal flush time</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="client-metrics-fuses3-gateway">Client Metrics (Fuse/S3 Gateway)<a href="https://curvineio.github.io/blog/2025/11/27/observability#client-metrics-fuses3-gateway" class="hash-link" aria-label="Direct link to Client Metrics (Fuse/S3 Gateway)" title="Direct link to Client Metrics (Fuse/S3 Gateway)">‚Äã</a></h3>
<p>Fuse and S3 Gateway metrics are collected through Client</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="cache-metrics">Cache Metrics<a href="https://curvineio.github.io/blog/2025/11/27/observability#cache-metrics" class="hash-link" aria-label="Direct link to Cache Metrics" title="Direct link to Cache Metrics">‚Äã</a></h4>
<p>Cache metrics directly reflect the core value of the cache system - improving access performance. Mount cache hit rate is a key indicator for measuring cache effectiveness, where high hit rates mean fewer backend accesses and faster response speeds. These metrics are crucial for evaluating cache strategy effectiveness and optimizing cache configuration.</p>
<p><img decoding="async" loading="lazy" alt="Cache Metrics" src="data:image/png;base64,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" width="397" height="115" class="img_ev3q"></p>
<table><thead><tr><th>Metric Name</th><th>Description</th></tr></thead><tbody><tr><td>client_mount_cache_hits</td><td>Mount cache hit count</td></tr><tr><td>client_mount_cache_misses</td><td>Mount cache miss count</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="io-metrics">I/O Metrics<a href="https://curvineio.github.io/blog/2025/11/27/observability#io-metrics" class="hash-link" aria-label="Direct link to I/O Metrics" title="Direct link to I/O Metrics">‚Äã</a></h4>
<p>I/O metrics are core data for evaluating system read/write performance, providing guidance for performance tuning and capacity planning. By monitoring read/write bytes and duration, read/write throughput can be calculated, accurately assessing system I/O performance bottlenecks, optimizing storage strategies, and ensuring stable performance in high-concurrency access scenarios.</p>
<p><img decoding="async" loading="lazy" alt="I/O Metrics" src="https://curvineio.github.io/assets/images/7-5ef944092b3f22e2ee1abd5fa126e668.png" width="399" height="228" class="img_ev3q"></p>
<table><thead><tr><th>Metric Name</th><th>Description</th></tr></thead><tbody><tr><td>client_write_bytes</td><td>Write bytes</td></tr><tr><td>client_write_time_us</td><td>Write time (microseconds)</td></tr><tr><td>client_read_bytes</td><td>Read bytes</td></tr><tr><td>client_read_time_us</td><td>Read time (microseconds)</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="metadata-operation-metrics">Metadata Operation Metrics<a href="https://curvineio.github.io/blog/2025/11/27/observability#metadata-operation-metrics" class="hash-link" aria-label="Direct link to Metadata Operation Metrics" title="Direct link to Metadata Operation Metrics">‚Äã</a></h4>
<p>Metadata operation performance directly affects file system response speed, crucial for improving user experience and overall system performance. Analysis of metadata operation duration helps identify metadata management bottlenecks, optimize directory structure, and improve file system operation efficiency.</p>
<p><img decoding="async" loading="lazy" alt="Metadata Operation Metrics" src="https://curvineio.github.io/assets/images/8-6b70554665977d51aec86ab4c9b860a1.png" width="1196" height="224" class="img_ev3q"></p>
<table><thead><tr><th>Metric Name</th><th>Description</th></tr></thead><tbody><tr><td>client_metadata_operation_duration</td><td>Metadata operation duration</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="worker-node-metrics">Worker Node Metrics<a href="https://curvineio.github.io/blog/2025/11/27/observability#worker-node-metrics" class="hash-link" aria-label="Direct link to Worker Node Metrics" title="Direct link to Worker Node Metrics">‚Äã</a></h3>
<p>As data storage nodes, Worker nodes provide comprehensive storage and performance metrics:</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="capacity-metrics-1">Capacity Metrics<a href="https://curvineio.github.io/blog/2025/11/27/observability#capacity-metrics-1" class="hash-link" aria-label="Direct link to Capacity Metrics" title="Direct link to Capacity Metrics">‚Äã</a></h4>
<p>Worker node capacity metrics are core to data storage management, playing a key role in load balancing, data migration, and capacity planning. By monitoring storage usage of each node, intelligent data distribution can be achieved, preventing single-point overload and ensuring optimal utilization of storage resources across the entire cache cluster.</p>
<p><img decoding="async" loading="lazy" alt="Capacity Metrics" src="https://curvineio.github.io/assets/images/9-e482560bc04145b1abfd4be83ac49333.png" width="920" height="343" class="img_ev3q"></p>
<table><thead><tr><th>Metric Name</th><th>Description</th></tr></thead><tbody><tr><td>capacity</td><td>Total storage capacity</td></tr><tr><td>available</td><td>Available storage space</td></tr><tr><td>fs_used</td><td>File system used space</td></tr><tr><td>num_blocks</td><td>Total number of blocks</td></tr><tr><td>num_blocks_to_delete</td><td>Number of blocks to be deleted</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="io-metrics-1">I/O Metrics<a href="https://curvineio.github.io/blog/2025/11/27/observability#io-metrics-1" class="hash-link" aria-label="Direct link to I/O Metrics" title="Direct link to I/O Metrics">‚Äã</a></h4>
<p>Worker node I/O metrics reflect the actual performance of data storage, crucial for evaluating storage hardware efficiency and optimizing data access patterns. Detailed read/write statistics help identify hot data, optimize data layout, and improve overall storage performance and response speed.</p>
<p><img decoding="async" loading="lazy" alt="I/O Metrics" src="https://curvineio.github.io/assets/images/10-a735389fe953fa838c80692c3fa2ce89.png" width="789" height="457" class="img_ev3q"></p>
<table><thead><tr><th>Metric Name</th><th>Description</th></tr></thead><tbody><tr><td>write_bytes</td><td>Write bytes</td></tr><tr><td>write_time_us</td><td>Write time (microseconds)</td></tr><tr><td>write_count</td><td>Write count</td></tr><tr><td>write_blocks</td><td>Write blocks (classified by type)</td></tr><tr><td>read_bytes</td><td>Read bytes</td></tr><tr><td>read_time_us</td><td>Read time (microseconds)</td></tr><tr><td>read_count</td><td>Read count</td></tr><tr><td>read_blocks</td><td>Read blocks (classified by type)</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="resource-metrics-1">Resource Metrics<a href="https://curvineio.github.io/blog/2025/11/27/observability#resource-metrics-1" class="hash-link" aria-label="Direct link to Resource Metrics" title="Direct link to Resource Metrics">‚Äã</a></h4>
<p>Worker node resource usage directly affects the stability and performance of data storage services, significant for resource scheduling and performance optimization. Reasonable memory usage is the foundation for ensuring data cache efficiency and needs precise monitoring to avoid resource competition and performance degradation.</p>
<p><img decoding="async" loading="lazy" alt="Resource Metrics" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQYAAAByCAYAAACx8X9fAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAABbbSURBVHhe7d17dNPnfcfxt3X5Sbbki2x8xZJtLIMxBNsEAoGSQM2ckhuD5dIlpUtgXd1mc7YDzTlhOynuQrK1ZjuQdaXtknRj2SnLTjJaFjoKa1qSJkCIIYRbsA2+YWzjC7Yky5Jl7Q/ZxtLPxrJxSCK+r3N0Djy/R48e6/LRc/lJirIkpvoRQogRNKEFQgghwSCEUJFgEEKoRI1cYzCZzSQkJKDRaoNrCSEi0oDPR1dXF06HI6g8KBimZ2Zytbsbr9cTVEkIEZn0eoX4uDiaGhuDyoOmEhqtVkJBiFuI1+sZdYYgawxCCBUJBiGEigSDEEJFgkEIoSLBIIRQkWAQQqhIMAghVCQYhBAqEw4Gi72YwiI7lqBSM9aCYgoLbJiCyhPJLSqm0J4YVDoxgTbyM82hB6aUKbNglL+Lm3T7g/ffWPdTkp3CotHu90EmG/lFxRQWFWANfgCEmJQJB4Nt9Sa2Vmzj6RUjCk1fY9OLlWx98UU2ZI0oX1rOlopKNn+1eEThRD1CeUUlFU8sCj0wpRY+8SJbK77D2tADN+X2F7Hh2Uq2/vkjoQcC/vA7bK2oZGvFNjatCj0I1idepLKikq0VL7LhjtCjQkzchIPhxPlmPJixFtiuFd4/BysAaeSOCAxrUR4WPFR/dPBaoZg8nxn74tUhhYtYd3saHo+cyi6mzoSDgV9UUeuB1Lx7h6cNpbNsKN31NHSD1f7wcNXSGWngqeajXwwWJJVQVvEqL+/ax64fvsTmh4pHTD1Ws2nbj9nyxCrWPPMqu3a/xqalwwdHMFNa/hLbt1VSXpIWKBpudw8v76ikfFXBiPrhths+022rKR/z7xivPwCJLC+r5Ec/28euH1ZStlgJOT4aBy2tHkwFK1k38sZWrKYwyUPthcsjCgddtx+h98seXq5YT6HJTOFDW/jRz/bxxs9eZfOakL5P4jFcUlbJ9m2bWRN0JwXqVpaPMgQSn7mJBwN7ONMEpNspBaCYeVYztB7m7WYPSlYxywF4mBmZQNMp9gLMKmP7zs3cn2/G01qPI9rOknWV7HymZLDddKx2O/PuK2dDkYKjsZngD4ICmFny1EuUldhRavfw8sHLIe1exqHkUVq2je0bhp7Q4bQ7AVllvPBcOaV50HD0IDU+G0vWvUDFo4NrEOP2x8yj33+NTauKSXTW0+FOYkX5enLDyIaGk6fwKHYKV19b77h/+RxM1HPmfMiIYdx+DN4vpWWszfLQ0eLBUvQ4m77/Et9dm4en/TLOaBtLnvhrNi0crc3wH8Pfdxqw2ktY/tVr/TY9tpIldhtcOTRcJj4/JhEMDvafvwzGPApXAFklzE6Bltq32HuuHuKymJcFLJ2DzQgt59/CCdz/2Cpylcvsf+5hvrXxm3xr/cPsPufBsvQRNox4J1HaD7Lpscf51sZN7Hx35O1C/oZtbCq14Ty6g00/PHStXerZO9ju02XPsr9ZIbdkPfePuO712p2Qu4rJVeDs3ifZsqOSLeXPsvPNf2f/YJvj9qeonNJZCs6TO1n/1Dd5euOTrP95HYox5HZGc/oQZ5wK+UvXD07dHubOfDOec4f5+UBw1XH7MaRxD2VPfZOny59k10kPlkyFtyse5+mNT7LuJ4dxksbsOwLTxkk/hrsPcMYJufOH+m1mbZEdxVPN0f+4oZgWn5JJBAM0vHuKlqF1hhV5pHKZM+/W4zxWRwtp5K40D64vOGg4XQ8sY16WGZqrePPcUCsOdh2rxoON2SOeqc7GKs5e++8wfdZ6Kh60w8mdlD2/Dydca7enHe4qp+wb5ZR9YyWK0wGmJDJHPFnHanfCfldFjQfyH3qdH1VsZsODSZz55Wvsb3SE15/bs0jFQ/WR1wf/BnD+4iBnukNuZ1R7eO+8AzIXsSYLTI/dxWyjh9rj/zncVkAY/Rjk7a4bvK6DTrcHcOAceowGw8ZsybvBx3APvz7tgMxi7ssCTI9QmKPgPH2A3UH1xOfFpIKB44dp6IbUGfeyxm6D7jo+OH6t3JqzKrC+4D7Pid8AKChawO2gYWQ7V3rwoqAPYydQSUlE7wZl1kq+Omu4NNCuMZ3Z+XOGL1YuU1PdjDcvuI0pUbeTzd/bwf6TDsz5y1izYQvbf/o6m0vME+iPB2/PyEbDXzjcu7eKTtIofKiY+4vsKM5TvK161w23HxNxY4/h2/9bRSc2ClfZMH11EflKByf27gmtJj4nJhcMHOREnQdS5rA0VcHTfIq3R5QrmSuZlwSeuireBOAwDe2BdYk1I1pZcHseJjpoCeOt3HlsB2uf20MDdtY8+wKlJq6166vjzY3f5OnBy+YXnmXzxs28fDy0lbHVdDoAG7MfC36Gm9bYsQKO3o7hMqX3FLu++yTrHl3F/etf4aw3kSUPfC28/lxsxxm6q5NVjDXu2n+v6+grHG2G1Lz1LMxScJ4/FFjDCRJGPybsBh/DwX5bix5hw212aD/F/qOhlcTnxSSDAd48WY0nzs6MBGg4dy353zxZjcdiJ9cystzBz987jcdYzNrnH2dJUTGFD27hWwsTofkwb4Qz5x/wwLkdbP9VNR7LItb91SpMQ+3GLWLD84+zxG4nd+njbN72Ortf2cKC0Dauo2HvIWo8CvkPvcb2jY9TWrSKRzf+mFfWFaN4qvn9f1UBYC17lV3bXmJL2TKspkRyb8/CogFPb8+1v/N6/TkYmDakLq+gvLSYwqJVlD9TQmpoh8ZUz5vH6yG9gHzjWO+6YfRjwm70MRzsd9Iylk6HhiOv8EFoFfG5MelgYO95WlBQlMvUHBgxlN17anCoGVzu3P0slfurUQrWs7mikq0blmFpP8zL/1g5obn/2Zc3svNoB5aF5bywoSC43W0/Zvsz6ynUVrP3J5UTe+LV7WTz917jbLeZ3LvWU16xiXV32TF1V7N320ZergtUa9j5A3af9pC7ags/+o/X2f5UCZb2w+z62WsQ+neO2p+D/OCH+6jx2ih9qpKtFZtY2LiPD8JaYwho2HWIsx6gtYr/GeNdd/x+TNyNPoYNuw5xFjMmpZ4T++pDD4vPkaAvg7VmZdHa2hJcY8olkluUhf7Kec42hs6Nb8QUtptkp9Aai6Ohipr20IODTDby85LwjllnvP6YsRbkYeoe6/hUGa8fkzHZNh9m6+4yZte9xrpnXglZMBWflZSUVBrqBt/5Bn0GwSBuPTZK1/0h+QXLKC1QOLFzNX+9L7SO+KyMFgyTn0oIES7TSkrvX03pDKjZW8kLEgqfezJiEOIWJyMGIURYJBiEECoSDEIIFQkGIYSKBIMQQkWCQQihIsEghFCRYBBCqEgwCCFUJBiEECoSDEIIFQkGIYSKBIMQQkWCQQihIsEghFCRYBBCqEgwCCFUJBiEECoSDEIIFQkGIYSKBIMQQkWCQQihIsEghFCRYBBCqEgwCCFUJBiEECoSDEIIFQkGIYSKBIMQQkWCQQihIsEghFCRYBBCqEgwCCFUJBiEECpRlsRU/9B/rFlZtLa2BNcQUyoqKoq0uUnkLM0gJimGgf4BWk5fofZQE71dfUF149JisC7KQKuNCiofTU9rLxfeaQwtHpaYE09mcUpocZDx2hCRKSUllYa6uqAyCYabyJQczbK/mE9STjyEvNb7+/r56I1qzvxP7XBZ9pIMFv/pbWgVbVDd0bR90sn+770XWjxswdfnMKs0K7Q4yHhtiMg0WjDIVOIm0Rl13PUX80maEY/f76fnspOa3zbScrqd/r5+dAYd89bayV46ffg6/R4fHqd3zIvX5cU/MJzr16XE6gEY8A2o2hlur7c/9GriFiUjhpskvzSb+V+bDcCpvbV89Pon+P2Buz55poW7nr4dY7zClZouDm49TL/HF9KCmn2FjYV/UoBGq+HjX9Zw4j/PhVYZVvrcnSTPtNzwqMCcHIPepAOfn562Xvrdo4eJzqgjNjkatFH4PD56ml34/X5MydHM/+N8elpdnNgduA9G1h3J2daLx+kNKhNTb7QRgzY62rxl6D/xCQk4nc6gCmJqzPxKNhZbHK52Nx/uOk3fiCe8q92NJScOizUWrU5DU1Ur7m5P0PVD6Yw6Fn69gJikaBxtLj7YdRqva/QXqWLSk1dixRhvoPNCN3XvN4dWCdvyTQsoengWeSuzMJoVmqpaQ6sAcNvaPJZ+u4i8EhsZtyXTcOQyXnc/M0tszLonh/gMM80fX8Hd1YftjjSWb1zArD/IJu/LtuHLnAdyySux4fMO0HGhO/QmxBQxmcx0X70aVCZTiZuk+cQVTr5xnlN7a1SLjAD4BgduGlTvnKPJvjODBFss+OHi+80423pDqwzTGXTD6xQjA+lGpc1NwpQcHVqMTtGSNicpMCIKmelcfL+Z+iPNnP3VRbrqeoKOeXt9tJ3roOVM4OJqdxMdZ+D2r80ed31ETC0JhpvkwjuNfPTGec4fqFdNE3RGHfEZZgB6O93XfZEzWD9vhRWNToOjzUX1b+pDqwQxxOlRTIE1ht5ON0WP5vPA9+/moX9eSelzd5J7dyaaMMJoiM87QG+nm5ikaNLnJoceJv22aSRkmunv8zHgGwg65mzr5dCOKj7+7+rhqdQQ91U377x0nANb3+fA1vf577/8DRffu4RGq8F6R1pQXfHpkmD4HJh9bw4JWbH4B/zUH2kZd15tvzuThKzwRgsAMQlGNNrAiKHggVzmPDCDuAwThjiF5JkWFn9jHvd8d8mo7/6j8vtpr7mKRhOF7Y40oqKCQyWjMAWdQUdXQ49qcTRzQSprX/oyK76zMKh8NH6/n6bjrfi8A+iNOvTRutAq4lMiwfAZy146nYL7ctBoNbSe6+TMvguhVYIYzAoz7rai0YY3WgDQx+jQDO54enu9XHjvEsd/fo5Te6qHQyVxRjyLvzEPXRhbowDttV30OT0k5sRhyY4bLjclR5M2Nwlvr48r5zuDrsPgNEMx6cN6kUdFRTG9KAWtXkNPi1N2TW4i2ZX4DNkWpbNo/VwUk57uS07+7wdHxn33z78nm+LH8tFoxt+JGCkqKorY1GhcXZ6gnQSdUcfyjQtInZ1If18/v//nEzQcG/s5UPrcnSRmx3H4pyfJW2kjeWZiUD9m3JXJovVz6W52cO5/61jw9QJcHW4OPH8YV5d7+NyMjovdw7sjQ2XeXh+1hxrweQbQKBrSC6ZhyY6j42I3h176cNz7Ziqt/ofldDX2oNVp8AOuK72B3ZO0GLqbHPi8A5iSAyeo9Xa60cfoMU2L5mqTA79vgNhUE153P+6rfejNekwJRrouOWDAT2yGGW+PF3dPH4ZYBUOsQvclB1FREJcRS+/VPjwOD8Y4I3qTjp5mB2g0JEw34Wx343V5MSYY0ClaHK0uNHoNcRmxOFqc9Lv7iUmMRqOJwnHFhdagJT7dzNVmB74+H6bkGPwDflztvWijdbg73TQe6FTtSqiCweHoweVyBVUSUy9tzjSWfrsIY7yCq8vNOzuqaPtE/Q47ksGsULJ5ERZbLI5WFwdePDwlLxbr7aks+XYhOoOOc/vr+ODfToVWGTYUDO//y0mM8Qbm/3E+3c0Ofv23h/E4vax4ZiHpc6fx8S9ruNrYw+I/vS3sYBjtRC5vbz9171/i+O5P6HNcf6dmqmQtTif/Kzkc/dex74dI0dvpJlZJUAWDaiohofDpS55pGQ4F91VPWKEAkLM0g/jpJvwDfmoPNU1JKAA42nvxeQOLhErM+EP8IU3HWnB1uDFNiyZlloWETDMJtlg8Li/NJ9pCq4/L0ebi4ItHeOtv3uGtv3mHtys/wNHWi32FjWVPz0dnDL9vE2VdkMaMZdOZVZpN4R/NpPHY5dAqtxRVMIhP18iTmdxXPfxu+7GwQiFobaHVRc1vGkKrjCkmwYglO44Ea9yEdh/G09Pqor22C51BR0ZhCqmzkzDGKrTXXg3rbwrl9/npbnLQebGbzovdNB1v5Z1/+hBXu5uk3Hgy5ql3QKaCwaxw55/NI+vODDIKk7lS20Xzx+2h1W4pEgw3UfJMC18qL8YYr9DX7eH9n34U9gsoZ9l0EjLN+Af8XHj3Eq4ud2iVMRU8mMu9z3+Je7YsZnqR+oNUtgVpKDF6/AN+OmqDT3QZz8V3L9Hf18+0vHjSCwMv3EtVraqtyMlyXXHj7u5Dp9eGv2syQXkrbTR/3MaJ1z/hxH99wtlfXQytcsuRYLhJkmbEs/TbRcQkGOl393P6rQu4utxYsgOr+iMvQ+ccDDGYFezLM4nSRI05WohJMHLf3y3j8V33UrJ5UdCwu/FYC16XF51Bx+3rCkifOw0AjTaK2ffNIH9VNlGaKHqandQfmdgQuuVsB45WF+aUGJJy43Fe6aWhauzFy4nKXJhGXIYJr9tHd5Mj9PCEGcwKyfmJzCzNImtxOsn5icz+SjaNR6euz5FATom+Sb7058VYbIFtPY1OQ/rcaUGn/468eF3eoJFEXomN7DszwA/n9tfRdFx9GvL0+SnkLstEo9Ogj9bRdLwV9+AZlo42Fxq9luSZFgxmhZwvTWfuajtzV+eSMS8ZjU5DX7eHo/96io6L1x8x5N5tJTrBQOOHrXQ19ODzDhCTFE1awTR0Bi1NVa3U/i7w0e0EayyZ81Px9vZT+7smvO7+4bLerj5qfhtcTzHrsa+wMueBXOY8kMvcB3PJWpyOVq+l7Xwnp/bUMDB0hugkffmZhcxYlklcmom0giTS50yj9VwXTR9NfE0kEvS7+zFojXJK9Gcl9CSgcIUzWgBoO9+J80pgetHd7MQ1+O8hJ984z9FXTwUWLP2B0YJGq2HAN0DruQ4O/v2RUQMnHPXvXaK3u4/+vn4ajk5sxDGSRqtBMQXO0gyc66DH4/JS/X8N/PYfjqnOGJ2oe7Ysoberj0M7PuTIqx/z3k8+4vCrH3Pu1zJ1CKXarpTzGL64NNoozKkxOFpc131njUkwYkhQxv2EZCRZtGEuMUnRnHj9k9BDt7SwtyvFF9eAz0/3Jed1QwHA1eUOrPw39NwSoZCzdDpJdouEwgSogiEmJia0SIgvtFml2Vw4JF9ZNxGqYJATnEQkSb8tGX20lpYzHaGHxHWogkGISDLvj+xcqb7+TotQk2AQESvBGkdsqkl2HSZBgkFErJkrbTR8MPnt01uZBIOISOaUGJJmxFN/RLbfJ0OCQUQkv98f+EzKTfqodqSRYBARSTHp8cg3Pk2aKhjkPAYRCQwmZcyv0xfjUwWDnMcgIoFi0t8SZ3V+WlTBIEQkUMx6+fLYGyDBICKSwaTD23tjn8a8lUkwiIikmBS8fTJimCwJBhGRDGaFfll8nDQJBhGRDGY9Xll8nDQJBhGRlFgFj+v6P/V3qzMoRgyKMbQYJBhEpFJMOvpl8XFMZlMss/PmkJKs/tZwJBhEpDKYZLtyLGZTLPbsPHoc3TReGv0LbCQYRETSx8gp0aO5Fgo91NbX4PcHfoEslASDiDganQaNToPvBr9VOtLERJvCCgUkGEQkMpj0eGXhMYgpxkxeziwcTgcXGgKhkJyYQpIlKbQqSDCISKSYA79HIQJMMSbs2TNxuhzU1lczMDBAanI6mRk2NFr1L4wjwSAikWLSy+nQgwLTh1m4ep1BoZCROp1LLU20XRn9R4YkGETEMZgU2ZEAYowx5OUEQqGm7rwqFFramkOvMkwVDPJ9DOKLLvDJylt7KmFQDOTNmIWr10X1xUAoTEtMDisUCA2GAZ8PvT74l5aF+KLRm3R4+2Qq0d1zleqLnwzvPvj9fpouNwaFgl7RM+BT31dBv11pMptJSEgYc0FCCBFZBnw+urq6cDocQeVBwSCEEIROJYQQAgkGIcRoJBiEECr/DwQJo9tv/Iz7AAAAAElFTkSuQmCC" width="262" height="114" class="img_ev3q"></p>
<table><thead><tr><th>Metric Name</th><th>Description</th></tr></thead><tbody><tr><td>used_memory_bytes</td><td>Used memory in bytes</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="hardware-status-metrics">Hardware Status Metrics<a href="https://curvineio.github.io/blog/2025/11/27/observability#hardware-status-metrics" class="hash-link" aria-label="Direct link to Hardware Status Metrics" title="Direct link to Hardware Status Metrics">‚Äã</a></h4>
<p>Hardware status metrics are an important monitoring dimension for ensuring data reliability and system availability, crucial for preventive maintenance and rapid fault response. By monitoring disk health status in real-time, hardware failure risks can be identified early, enabling timely data migration and hardware replacement, ensuring data security and continuous availability of the cache system.</p>
<p><img decoding="async" loading="lazy" alt="Hardware Status Metrics" src="https://curvineio.github.io/assets/images/12-21afdbda2d97fe2e497d608b4ae22947.png" width="527" height="229" class="img_ev3q"></p>
<table><thead><tr><th>Metric Name</th><th>Description</th></tr></thead><tbody><tr><td>failed_disks</td><td>Number of failed storage devices</td></tr><tr><td>total_disks</td><td>Total number of storage disks</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="global-dashboards">Global Dashboards<a href="https://curvineio.github.io/blog/2025/11/27/observability#global-dashboards" class="hash-link" aria-label="Direct link to Global Dashboards" title="Direct link to Global Dashboards">‚Äã</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="master">Master<a href="https://curvineio.github.io/blog/2025/11/27/observability#master" class="hash-link" aria-label="Direct link to Master" title="Direct link to Master">‚Äã</a></h3>
<p><img decoding="async" loading="lazy" alt="Master" src="https://curvineio.github.io/assets/images/master-caae2ec878a7c8ea740c43babae291c0.png" width="1386" height="1452" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="worker">Worker<a href="https://curvineio.github.io/blog/2025/11/27/observability#worker" class="hash-link" aria-label="Direct link to Worker" title="Direct link to Worker">‚Äã</a></h3>
<p><img decoding="async" loading="lazy" alt="Worker" src="https://curvineio.github.io/assets/images/worker-4b1dc660f48e493b50fdd3cf2834f774.png" width="1122" height="943" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="client">Client<a href="https://curvineio.github.io/blog/2025/11/27/observability#client" class="hash-link" aria-label="Direct link to Client" title="Direct link to Client">‚Äã</a></h3>
<p><img decoding="async" loading="lazy" alt="Client" src="https://curvineio.github.io/assets/images/client-a7f0c52f354649be2578571698a17df7.png" width="1203" height="463" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="summary">Summary<a href="https://curvineio.github.io/blog/2025/11/27/observability#summary" class="hash-link" aria-label="Direct link to Summary" title="Direct link to Summary">‚Äã</a></h2>
<p>The observability design of the Curvine distributed cache system covers the complete chain from metadata management to data storage, achieving the following through fine-grained metric collection:</p>
<ul>
<li><strong>End-to-End Monitoring</strong>: Complete monitoring from client requests to data storage, ensuring performance and status of each link are observable</li>
<li><strong>Multi-Dimensional Observation</strong>: Covering multiple dimensions including performance, capacity, and status, providing a comprehensive view of system health</li>
<li><strong>Real-Time Alerting</strong>: Real-time monitoring and alerting based on key metrics, enabling timely detection of anomalies and rapid response</li>
<li><strong>Fault Diagnosis</strong>: Detailed metric data supports rapid fault location, reducing fault recovery time</li>
<li><strong>Performance Optimization</strong>: Continuous monitoring and analysis provide data support for system performance tuning</li>
<li><strong>Capacity Planning</strong>: Based on historical trends and real-time data, providing decision-making basis for capacity expansion and resource optimization</li>
</ul>
<p>Through this comprehensive monitoring system, Curvine can maintain high availability and high performance in complex distributed environments, providing users with stable and reliable cache services.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Curvine Distributed Cache System User Guide]]></title>
            <link>https://curvineio.github.io/blog/2025/09/28/user-guide</link>
            <guid>https://curvineio.github.io/blog/2025/09/28/user-guide</guid>
            <pubDate>Sun, 28 Sep 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[Version]]></description>
            <content:encoded><![CDATA[<p><a href="https://github.com/curvine/curvine" target="_blank" rel="noopener noreferrer"><img decoding="async" loading="lazy" src="https://img.shields.io/badge/version-v1.0-blue.svg" alt="Version" class="img_ev3q"></a>
<a href="https://www.apache.org/licenses/LICENSE-2.0" target="_blank" rel="noopener noreferrer"><img decoding="async" loading="lazy" src="https://img.shields.io/badge/license-Apache%202.0-green.svg" alt="License" class="img_ev3q"></a>
<a href="https://docs.curvine.io/" target="_blank" rel="noopener noreferrer"><img decoding="async" loading="lazy" src="https://img.shields.io/badge/docs-latest-brightgreen.svg" alt="Documentation" class="img_ev3q"></a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-table-of-contents">üìö Table of Contents<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#-table-of-contents" class="hash-link" aria-label="Direct link to üìö Table of Contents" title="Direct link to üìö Table of Contents">‚Äã</a></h2>
<ul>
<li><a href="https://curvineio.github.io/blog/2025/09/28/user-guide#-system-overview">üéØ System Overview</a></li>
<li><a href="https://curvineio.github.io/blog/2025/09/28/user-guide#-path-mount-management">üìÇ Path Mount Management</a></li>
<li><a href="https://curvineio.github.io/blog/2025/09/28/user-guide#-intelligent-caching-strategies">üíæ Intelligent Caching Strategies</a></li>
<li><a href="https://curvineio.github.io/blog/2025/09/28/user-guide#-data-consistency-guarantees">üîÑ Data Consistency Guarantees</a></li>
<li><a href="https://curvineio.github.io/blog/2025/09/28/user-guide#-aiml-scenario-applications">ü§ñ AI/ML Scenario Applications</a></li>
<li><a href="https://curvineio.github.io/blog/2025/09/28/user-guide#%EF%B8%8F-big-data-ecosystem-integration">üóÑÔ∏è Big Data Ecosystem Integration</a></li>
<li><a href="https://curvineio.github.io/blog/2025/09/28/user-guide#-best-practices">üí° Best Practices</a></li>
<li><a href="https://curvineio.github.io/blog/2025/09/28/user-guide#-summary">üéØ Summary</a></li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-system-overview">üéØ System Overview<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#-system-overview" class="hash-link" aria-label="Direct link to üéØ System Overview" title="Direct link to üéØ System Overview">‚Äã</a></h2>
<p>Curvine is a high-performance, cloud-native distributed caching system designed for modern data-intensive applications. It provides an intelligent caching layer between underlying storage (UFS) and compute engines, significantly improving data access performance.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-performance-advantages">üèÜ Performance Advantages<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#-performance-advantages" class="hash-link" aria-label="Direct link to üèÜ Performance Advantages" title="Direct link to üèÜ Performance Advantages">‚Äã</a></h3>
<p>Compared to traditional storage access methods, Curvine can provide:</p>
<table><thead><tr><th>Metric</th><th>Cloud Storage</th><th>Curvine Cache</th><th>Performance Improvement</th></tr></thead><tbody><tr><td><strong>Read Latency</strong></td><td>100-500ms</td><td>1-10ms</td><td><strong>10-50x</strong></td></tr><tr><td><strong>Throughput</strong></td><td>100-500 MB/s</td><td>1-10 GB/s</td><td><strong>10-20x</strong></td></tr><tr><td><strong>IOPS</strong></td><td>1K-10K</td><td>100K-1M</td><td><strong>100x</strong></td></tr><tr><td><strong>Concurrent Connections</strong></td><td>100-1K</td><td>10K-100K</td><td><strong>100x</strong></td></tr></tbody></table>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="core-components">Core Components<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#core-components" class="hash-link" aria-label="Direct link to Core Components" title="Direct link to Core Components">‚Äã</a></h3>
<ul>
<li><strong>Master Cluster</strong>: Metadata management, cache scheduling, consistency guarantees</li>
<li><strong>Worker Nodes</strong>: Data caching, I/O processing, task execution</li>
<li><strong>Client SDK</strong>: Multi-language clients, supporting Rust, Fuse, Java, Python</li>
<li><strong>Job Manager</strong>: Distributed task scheduling and management</li>
<li><strong>Metrics System</strong>: Real-time monitoring and performance analysis</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-path-mount-management">üìÇ Path Mount Management<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#-path-mount-management" class="hash-link" aria-label="Direct link to üìÇ Path Mount Management" title="Direct link to üìÇ Path Mount Management">‚Äã</a></h2>
<p>Mounting is the first step in using Curvine cache, which establishes the mapping relationship between underlying storage (UFS) and cache paths.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="mounting-modes-explained">Mounting Modes Explained<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#mounting-modes-explained" class="hash-link" aria-label="Direct link to Mounting Modes Explained" title="Direct link to Mounting Modes Explained">‚Äã</a></h3>
<p>Curvine supports two flexible mounting modes:</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="-cst-mode-consistent-path-mode">üéØ CST Mode (Consistent Path Mode)<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#-cst-mode-consistent-path-mode" class="hash-link" aria-label="Direct link to üéØ CST Mode (Consistent Path Mode)" title="Direct link to üéØ CST Mode (Consistent Path Mode)">‚Äã</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Consistent path, easy to manage and maintain</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bin/cv mount s3://bucket/data /bucket/data --mnt-type cst</span><br></span></code></pre></div></div>
<p><strong>Ideal scenarios</strong>:</p>
<ul>
<li>Data lake scenarios with clear path structures</li>
<li>Production environments requiring intuitive path mapping</li>
<li>Data platforms with multi-team collaboration</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="-arch-mode-orchestration-mode">üîÄ Arch Mode (Orchestration Mode)<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#-arch-mode-orchestration-mode" class="hash-link" aria-label="Direct link to üîÄ Arch Mode (Orchestration Mode)" title="Direct link to üîÄ Arch Mode (Orchestration Mode)">‚Äã</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Flexible path mapping, supporting complex path transformations</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bin/cv mount s3://complex-bucket/deep/nested/path /simple/data --mnt-type arch</span><br></span></code></pre></div></div>
<p><strong>Ideal scenarios</strong>:</p>
<ul>
<li>Complex storage hierarchies</li>
<li>Scenarios requiring path abstraction</li>
<li>Multi-cloud storage unified access</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="complete-mounting-example">Complete Mounting Example<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#complete-mounting-example" class="hash-link" aria-label="Direct link to Complete Mounting Example" title="Direct link to Complete Mounting Example">‚Äã</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Mount S3 storage to Curvine (production-grade configuration)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bin/cv mount \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">s3://bucket/warehouse/tpch_500g.db/orders \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/bucket/warehouse/tpch_500g.db/orders \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--ttl-ms 24h \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--ttl-action delete \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--replicas 3 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--block-size 128MB \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--consistency-strategy always \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--storage-type ssd \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-c s3.endpoint_url=https://s3.ap-southeast-1.amazonaws.com \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-c s3.credentials.access=access_key \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-c s3.credentials.secret=secret_key \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-c s3.region_name=ap-southeast-1 </span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="mounting-parameters-explained">Mounting Parameters Explained<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#mounting-parameters-explained" class="hash-link" aria-label="Direct link to Mounting Parameters Explained" title="Direct link to Mounting Parameters Explained">‚Äã</a></h3>
<table><thead><tr><th>Parameter</th><th>Type</th><th>Default</th><th>Description</th><th>Example</th></tr></thead><tbody><tr><td><code>--ttl-ms</code></td><td>duration</td><td><code>0</code></td><td>Cache data expiration time</td><td><code>24h</code>, <code>7d</code>, <code>30d</code></td></tr><tr><td><code>--ttl-action</code></td><td>enum</td><td><code>none</code></td><td>Expiration policy: <code>delete</code>/<code>none</code></td><td><code>delete</code></td></tr><tr><td><code>--replicas</code></td><td>int</td><td><code>1</code></td><td>Number of data replicas (1-5)</td><td><code>3</code></td></tr><tr><td><code>--block-size</code></td><td>size</td><td><code>128MB</code></td><td>Cache block size</td><td><code>64MB</code>, <code>128MB</code>, <code>256MB</code></td></tr><tr><td><code>--consistency-strategy</code></td><td>enum</td><td><code>always</code></td><td>Consistency strategy</td><td><code>none</code>/<code>always</code>/<code>period</code></td></tr><tr><td><code>--storage-type</code></td><td>enum</td><td><code>disk</code></td><td>Storage medium type</td><td><code>mem</code>/<code>ssd</code>/<code>disk</code></td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="mount-point-management">Mount Point Management<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#mount-point-management" class="hash-link" aria-label="Direct link to Mount Point Management" title="Direct link to Mount Point Management">‚Äã</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># View all mount points</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bin/cv mount</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Unmount path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bin/cv unmount /bucket/warehouse/tpch_500g.db/orders</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-intelligent-caching-strategies">üíæ Intelligent Caching Strategies<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#-intelligent-caching-strategies" class="hash-link" aria-label="Direct link to üíæ Intelligent Caching Strategies" title="Direct link to üíæ Intelligent Caching Strategies">‚Äã</a></h2>
<p>Curvine provides multiple intelligent caching strategies, from passive response to active prediction, comprehensively optimizing data access performance.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="active-data-preloading">Active Data Preloading<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#active-data-preloading" class="hash-link" aria-label="Direct link to Active Data Preloading" title="Direct link to Active Data Preloading">‚Äã</a></h3>
<p>Active loading allows you to warm up the cache before business peaks to ensure optimal performance:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Basic loading</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bin/cv load s3:/bucket/warehouse/critical-dataset</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Synchronous loading with progress monitoring</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bin/cv load s3:/bucket/warehouse/critical-dataset -w</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="automatic-caching-strategy">Automatic Caching Strategy<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#automatic-caching-strategy" class="hash-link" aria-label="Direct link to Automatic Caching Strategy" title="Direct link to Automatic Caching Strategy">‚Äã</a></h3>
<p>Curvine's automatic caching system has significant advantages over traditional solutions:</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="-curvine-intelligent-cache-architecture">‚ú® Curvine Intelligent Cache Architecture<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#-curvine-intelligent-cache-architecture" class="hash-link" aria-label="Direct link to ‚ú® Curvine Intelligent Cache Architecture" title="Direct link to ‚ú® Curvine Intelligent Cache Architecture">‚Äã</a></h4>
<p><img decoding="async" loading="lazy" alt="curvine" src="https://curvineio.github.io/assets/images/curvine-deb0b650a65e65f55f8b4799da90a348.png" width="539" height="969" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="core-advantage-comparison">Core Advantage Comparison<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#core-advantage-comparison" class="hash-link" aria-label="Direct link to Core Advantage Comparison" title="Direct link to Core Advantage Comparison">‚Äã</a></h4>
<table><thead><tr><th>Feature</th><th>Open Source Competitors</th><th>Curvine</th><th>Advantage Description</th></tr></thead><tbody><tr><td><strong>Loading Granularity</strong></td><td>Block-level</td><td>File/Directory-level</td><td>Avoid fragmentation, ensure integrity</td></tr><tr><td><strong>Duplicate Processing</strong></td><td>Exists duplicate loading</td><td>Intelligent deduplication</td><td>Save bandwidth and storage resources</td></tr><tr><td><strong>Task Scheduling</strong></td><td>Simple queue</td><td>Distributed Job Manager</td><td>Efficient concurrency, load balancing</td></tr><tr><td><strong>Consistency Guarantee</strong></td><td>Passive checking</td><td>Active awareness</td><td>Real-time data synchronization</td></tr></tbody></table>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-data-consistency-guarantees">üîÑ Data Consistency Guarantees<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#-data-consistency-guarantees" class="hash-link" aria-label="Direct link to üîÑ Data Consistency Guarantees" title="Direct link to üîÑ Data Consistency Guarantees">‚Äã</a></h2>
<p>Data consistency is a core challenge for caching systems, and Curvine provides multi-level consistency guarantee mechanisms.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="consistency-strategy-details">Consistency Strategy Details<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#consistency-strategy-details" class="hash-link" aria-label="Direct link to Consistency Strategy Details" title="Direct link to Consistency Strategy Details">‚Äã</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="1--none-mode---highest-performance">1. üö´ None Mode - Highest Performance<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#1--none-mode---highest-performance" class="hash-link" aria-label="Direct link to 1. üö´ None Mode - Highest Performance" title="Direct link to 1. üö´ None Mode - Highest Performance">‚Äã</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">bin/cv mount s3://bucket/path /bucket/path --consistency-strategy=none</span><br></span></code></pre></div></div>
<ul>
<li><strong>Ideal scenarios</strong>: Static data, archived data, read-only datasets</li>
<li><strong>Performance</strong>: ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (fastest)</li>
<li><strong>Consistency</strong>: ‚≠ê‚≠ê (TTL-dependent)</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2--always-mode---strong-consistency">2. ‚úÖ Always Mode - Strong Consistency<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#2--always-mode---strong-consistency" class="hash-link" aria-label="Direct link to 2. ‚úÖ Always Mode - Strong Consistency" title="Direct link to 2. ‚úÖ Always Mode - Strong Consistency">‚Äã</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">bin/cv mount s3://bucket/path /bucket/path --consistency-strategy=always</span><br></span></code></pre></div></div>
<ul>
<li><strong>Ideal scenarios</strong>: Frequently updated business data, critical business systems</li>
<li><strong>Performance</strong>: ‚≠ê‚≠ê‚≠ê (has overhead)</li>
<li><strong>Consistency</strong>: ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (strong consistency)</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="3-Ô∏è-period-mode---balanced-solution">3. üï∞Ô∏è Period Mode - Balanced Solution<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#3-%EF%B8%8F-period-mode---balanced-solution" class="hash-link" aria-label="Direct link to 3. üï∞Ô∏è Period Mode - Balanced Solution" title="Direct link to 3. üï∞Ô∏è Period Mode - Balanced Solution">‚Äã</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">bin/cv mount s3://bucket/path /bucket/path \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --consistency-strategy=period \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --check-interval=5m</span><br></span></code></pre></div></div>
<ul>
<li><strong>Ideal scenarios</strong>: Data with predictable update frequency</li>
<li><strong>Performance</strong>: ‚≠ê‚≠ê‚≠ê‚≠ê (good)</li>
<li><strong>Consistency</strong>: ‚≠ê‚≠ê‚≠ê‚≠ê (periodically guaranteed)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cache-performance-monitoring">Cache Performance Monitoring<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#cache-performance-monitoring" class="hash-link" aria-label="Direct link to Cache Performance Monitoring" title="Direct link to Cache Performance Monitoring">‚Äã</a></h3>
<p>Monitoring cache hit ratio is an important way to evaluate the effectiveness of consistency strategies:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Get cache hit ratio</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">curl -s http://master:9001/metrics | grep -E "(cache_hits|cache_misses)"</span><br></span></code></pre></div></div>
<div class="language-prometheus codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-prometheus codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">client_mount_cache_hits{id="3108497238"} 823307</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">client_mount_cache_misses{id="3108497238"} 4380</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-aiml-scenario-applications">ü§ñ AI/ML Scenario Applications<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#-aiml-scenario-applications" class="hash-link" aria-label="Direct link to ü§ñ AI/ML Scenario Applications" title="Direct link to ü§ñ AI/ML Scenario Applications">‚Äã</a></h2>
<p>AI and machine learning workloads have extremely high requirements for storage performance, and Curvine provides specially optimized functions for this.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="deep-learning-training-optimization">Deep Learning Training Optimization<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#deep-learning-training-optimization" class="hash-link" aria-label="Direct link to Deep Learning Training Optimization" title="Direct link to Deep Learning Training Optimization">‚Äã</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Optimized data loading for GPU clusters</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bin/cv mount s3://datasets/imagenet /datasets/imagenet \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --storage-type=mem \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --block-size=1GB \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --replicas=2 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="model-serving-scenarios">Model Serving Scenarios<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#model-serving-scenarios" class="hash-link" aria-label="Direct link to Model Serving Scenarios" title="Direct link to Model Serving Scenarios">‚Äã</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Model file caching (low-latency access)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bin/cv mount s3://model/bert-large /models/bert-large \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --storage-type=mem \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --ttl-ms=none \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --consistency-strategy=always </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Inference data caching</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bin/cv mount s3://inference/input /inference/input \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --storage-type=ssd \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --ttl-ms=1h \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --consistency-strategy=none </span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-posix-semantics-and-fuse-access">üîó POSIX Semantics and FUSE Access<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#-posix-semantics-and-fuse-access" class="hash-link" aria-label="Direct link to üîó POSIX Semantics and FUSE Access" title="Direct link to üîó POSIX Semantics and FUSE Access">‚Äã</a></h3>
<p>Curvine perfectly supports POSIX semantics through the FUSE (Filesystem in Userspace) interface, allowing the Curvine cluster to be mounted as a local file system, providing a transparent file access experience for AI/ML applications.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="fuse-usage-in-aiml-training">FUSE Usage in AI/ML Training<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#fuse-usage-in-aiml-training" class="hash-link" aria-label="Direct link to FUSE Usage in AI/ML Training" title="Direct link to FUSE Usage in AI/ML Training">‚Äã</a></h4>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="1-deep-learning-training-data-access">1. Deep Learning Training Data Access<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#1-deep-learning-training-data-access" class="hash-link" aria-label="Direct link to 1. Deep Learning Training Data Access" title="Direct link to 1. Deep Learning Training Data Access">‚Äã</a></h5>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># PyTorch training script</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> torch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> torch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">utils</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">data </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Dataset</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> DataLoader</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> torchvision </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> transforms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> PIL </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Image</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> os</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">CurvineImageDataset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Dataset</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">__init__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> root_dir</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> transform</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token triple-quoted-string string" style="color:#e3116c">"""</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        Directly access data in Curvine through FUSE mount point</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        root_dir: FUSE mount point path, such as /curvine-fuse/datasets/imagenet</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        """</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">root_dir </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> root_dir</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">transform </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> transform</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">image_paths </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Directly traverse the FUSE-mounted directory</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> class_dir </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">listdir</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">root_dir</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            class_path </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">root_dir</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> class_dir</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">isdir</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">class_path</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> img_file </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">listdir</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">class_path</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> img_file</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lower</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">endswith</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'.png'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'.jpg'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'.jpeg'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">image_paths</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">append</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">class_path</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> img_file</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">__len__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token builtin">len</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">image_paths</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">__getitem__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> idx</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Access data through standard file operations, enjoying Curvine cache acceleration</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        img_path </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">image_paths</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">idx</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        image </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Image</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">open</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">img_path</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">convert</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'RGB'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">transform</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            image </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">transform</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">image</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Extract label from path</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        label </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">basename</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">dirname</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">img_path</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> image</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> label</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Usage example</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">transform </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> transforms</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Compose</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    transforms</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Resize</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">224</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">224</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    transforms</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ToTensor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    transforms</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Normalize</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">mean</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0.485</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.456</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.406</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        std</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0.229</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.224</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.225</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Directly use the path of the FUSE mount point</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dataset </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> CurvineImageDataset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    root_dir</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">'/curvine-fuse/datasets/imagenet/train'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    transform</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">transform</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dataloader </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> DataLoader</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dataset</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    batch_size</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">64</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    shuffle</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    num_workers</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">8</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pin_memory</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Training loop</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> epoch </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin">range</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">num_epochs</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> batch_idx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> targets</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin">enumerate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">dataloader</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Data is automatically loaded from Curvine cache through FUSE</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Enjoy near-memory access speed</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        outputs </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> model</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cuda</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        loss </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> criterion</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">outputs</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> targets</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cuda</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># ... training logic</span><br></span></code></pre></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="2-tensorflowkeras-data-pipeline">2. TensorFlow/Keras Data Pipeline<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#2-tensorflowkeras-data-pipeline" class="hash-link" aria-label="Direct link to 2. TensorFlow/Keras Data Pipeline" title="Direct link to 2. TensorFlow/Keras Data Pipeline">‚Äã</a></h5>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> tensorflow </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> tf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> os</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">create_curvine_dataset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data_dir</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> batch_size</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">32</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#e3116c">"""</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    Create TensorFlow data pipeline through FUSE mount point</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    data_dir: FUSE-mounted data directory</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    """</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Directly access FUSE-mounted data using standard file APIs</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">load_and_preprocess_image</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># TensorFlow transparently accesses Curvine cache through FUSE</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        image </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> tf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">io</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">read_file</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        image </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> tf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">image</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">decode_jpeg</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">image</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> channels</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        image </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> tf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">image</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">resize</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">image</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">224</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">224</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        image </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> tf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cast</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">image</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> tf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">float32</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">255.0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> image</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Scan files in the FUSE-mounted directory</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    image_paths </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    labels </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> class_name </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">listdir</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data_dir</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        class_dir </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data_dir</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> class_name</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">isdir</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">class_dir</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> img_file </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">listdir</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">class_dir</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> img_file</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lower</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">endswith</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'.png'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'.jpg'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'.jpeg'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    image_paths</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">append</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">class_dir</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> img_file</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    labels</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">append</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">class_name</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Create dataset</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    path_ds </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> tf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Dataset</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_tensor_slices</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">image_paths</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    label_ds </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> tf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Dataset</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_tensor_slices</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">labels</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Apply preprocessing</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    image_ds </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> path_ds</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        load_and_preprocess_image</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        num_parallel_calls</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">tf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">AUTOTUNE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Combine data and labels</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dataset </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> tf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Dataset</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">zip</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">image_ds</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> label_ds</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> dataset</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">batch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">batch_size</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">prefetch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">AUTOTUNE</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Usage example</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">train_dataset </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> create_curvine_dataset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'/curvine-fuse/datasets/imagenet/train'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">val_dataset </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> create_curvine_dataset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'/curvine-fuse/datasets/imagenet/val'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Model training</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">fit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    train_dataset</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    validation_data</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">val_dataset</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    epochs</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    callbacks</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        tf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">keras</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">callbacks</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ModelCheckpoint</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'/curvine-fuse/models/checkpoints/'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        tf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">keras</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">callbacks</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">TensorBoard</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">log_dir</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">'/curvine-fuse/logs/'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="Ô∏è-big-data-ecosystem-integration">üóÑÔ∏è Big Data Ecosystem Integration<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#%EF%B8%8F-big-data-ecosystem-integration" class="hash-link" aria-label="Direct link to üóÑÔ∏è Big Data Ecosystem Integration" title="Direct link to üóÑÔ∏è Big Data Ecosystem Integration">‚Äã</a></h2>
<p>Curvine seamlessly integrates with mainstream big data frameworks, providing transparent cache acceleration capabilities.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hadoop-ecosystem-integration">Hadoop Ecosystem Integration<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#hadoop-ecosystem-integration" class="hash-link" aria-label="Direct link to Hadoop Ecosystem Integration" title="Direct link to Hadoop Ecosystem Integration">‚Äã</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="basic-configuration">Basic Configuration<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#basic-configuration" class="hash-link" aria-label="Direct link to Basic Configuration" title="Direct link to Basic Configuration">‚Äã</a></h4>
<p>Add in <code>hdfs-site.xml</code> or <code>core-site.xml</code>:</p>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- Curvine FileSystem implementation --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">fs.cv.impl</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">io.curvine.CurvineFileSystem</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- Single cluster configuration --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">fs.cv.master_addrs</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">master1:8995,master2:8995,master3:8995</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="multi-cluster-support">Multi-cluster Support<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#multi-cluster-support" class="hash-link" aria-label="Direct link to Multi-cluster Support" title="Direct link to Multi-cluster Support">‚Äã</a></h4>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- Cluster 1: Production environment --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">fs.cv.production.master_addrs</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">prod-master1:8995,prod-master2:8995,prod-master3:8995</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- Cluster 2: Development environment --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">fs.cv.development.master_addrs</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">dev-master1:8995,dev-master2:8995</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- Cluster 3: Machine learning dedicated cluster --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">fs.cv.ml-cluster.master_addrs</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">ml-master1:8995,ml-master2:8995,ml-master3:8995</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-ufs-transparent-proxy">üîÑ UFS Transparent Proxy<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#-ufs-transparent-proxy" class="hash-link" aria-label="Direct link to üîÑ UFS Transparent Proxy" title="Direct link to üîÑ UFS Transparent Proxy">‚Äã</a></h3>
<p>To better support existing Java applications to seamlessly access Curvine cache, we provide a UFS transparent proxy solution. The core advantage of this solution is <strong>zero code modification</strong>, allowing existing applications to immediately enjoy the cache acceleration effects of Curvine.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="-core-features-of-transparent-proxy">‚ú® Core Features of Transparent Proxy<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#-core-features-of-transparent-proxy" class="hash-link" aria-label="Direct link to ‚ú® Core Features of Transparent Proxy" title="Direct link to ‚ú® Core Features of Transparent Proxy">‚Äã</a></h4>
<ul>
<li><strong>üö´ Zero code modification</strong>: Preserves all original interfaces unchanged, no business code modifications required</li>
<li><strong>üîç Intelligent path recognition</strong>: Only determines whether the path has been mounted to Curvine when opening a file</li>
<li><strong>‚ö° Automatic cache acceleration</strong>: Automatically enables cache acceleration for mounted paths, native S3 access for unmounted paths</li>
<li><strong>üîÑ Smooth switching</strong>: Supports dynamically switching whether to use cache at runtime without restarting the application</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="Ô∏è-configuration-method">üõ†Ô∏è Configuration Method<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#%EF%B8%8F-configuration-method" class="hash-link" aria-label="Direct link to üõ†Ô∏è Configuration Method" title="Direct link to üõ†Ô∏è Configuration Method">‚Äã</a></h4>
<p>Simply replace the S3FileSystem implementation class in Hadoop configuration:</p>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- Traditional S3 access configuration --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">&lt;!--</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    &lt;name&gt;fs.s3a.impl&lt;/name&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    &lt;value&gt;org.apache.hadoop.fs.s3a.S3AFileSystem&lt;/value&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;/property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- Replace with Curvine transparent proxy --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">fs.s3a.impl</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">io.curvine.S3AProxyFileSystem</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">fs.cv.impl</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">io.curvine.CurvineFileSystem</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- Curvine cluster configuration --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">fs.curvine.master_addrs</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">master1:8995,master2:8995,master3:8995</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="-working-principle">üîß Working Principle<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#-working-principle" class="hash-link" aria-label="Direct link to üîß Working Principle" title="Direct link to üîß Working Principle">‚Äã</a></h4>
<p><img decoding="async" loading="lazy" alt="Working Principle" src="https://curvineio.github.io/assets/images/WorkingPrinciple-979779bc596e9fffaf9a3cf2406536c2.png" width="993" height="668" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="-usage-example">üöÄ Usage Example<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#-usage-example" class="hash-link" aria-label="Direct link to üöÄ Usage Example" title="Direct link to üöÄ Usage Example">‚Äã</a></h4>
<p><strong>No need to modify any business code, original code directly enjoys acceleration:</strong></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Business code remains completely unchanged!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Configuration conf = new Configuration();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FileSystem fs = FileSystem.get(URI.create("s3a://my-bucket/"), conf);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// If this path is mounted to Curvine, automatically enjoy cache acceleration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FSDataInputStream input = fs.open(new Path("s3a://my-bucket/warehouse/data.parquet"));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// If this path is not mounted, use native S3 access</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FSDataInputStream input2 = fs.open(new Path("s3a://my-bucket/archive/old-data.parquet"));</span><br></span></code></pre></div></div>
<p><strong>Spark/MapReduce code example:</strong></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Spark code does not need any modification</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Dataset&lt;Row&gt; df = spark.read()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .option("header", "true")</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // If /warehouse/ path is mounted, automatically use cache acceleration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .csv("s3a://data-lake/warehouse/customer_data/");</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">df.groupBy("region")</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .agg(sum("revenue").alias("total_revenue"))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .orderBy(desc("total_revenue"))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .show(20);</span><br></span></code></pre></div></div>
<p><strong>Python PySpark example:</strong></p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Python code also does not need modification</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> pyspark</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sql </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> SparkSession</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> pyspark</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sql</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">functions </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token builtin">sum</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> desc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spark </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> SparkSession</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">builder</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">appName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"TransparentCache"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">getOrCreate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Automatically determine whether to use cache</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">df </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> spark</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">read \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">option</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"header"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"true"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">csv</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"s3a://data-lake/analytics/events/"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> df</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">groupBy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"event_type"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">agg</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">sum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"count"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">alias</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"total_events"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">orderBy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">desc</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"total_events"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">show</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="apache-spark-optimization-configuration">Apache Spark Optimization Configuration<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#apache-spark-optimization-configuration" class="hash-link" aria-label="Direct link to Apache Spark Optimization Configuration" title="Direct link to Apache Spark Optimization Configuration">‚Äã</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Spark application startup configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spark-submit \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --class com.example.SparkApp \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --master yarn \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --deploy-mode cluster \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --conf spark.hadoop.fs.cv.impl=io.curvine.CurvineFileSystem \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --conf spark.hadoop.fs.cv.master_addrs=master1:8995,master2:8995,master3:8995 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --conf spark.sql.adaptive.enabled=true \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --jars curvine-hadoop-client.jar \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  app.jar</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="spark-code-example">Spark Code Example<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#spark-code-example" class="hash-link" aria-label="Direct link to Spark Code Example" title="Direct link to Spark Code Example">‚Äã</a></h4>
<div class="language-scala codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-scala codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Scala example</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">val spark = SparkSession.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .appName("Curvine Demo")</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .config("spark.hadoop.fs.cv.impl", "io.curvine.CurvineFileSystem")</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .getOrCreate()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Directly use cv:// protocol to access cached data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">val df = spark.read</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .option("multiline", "true")</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .json("cv://production/warehouse/events/2024/01/01/")</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">df.groupBy("event_type")</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .count()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .show()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Multi-cluster access</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">val prodData = spark.read.parquet("cv://production/warehouse/sales/")</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">val mlData = spark.read.parquet("cv://ml-cluster/features/user_profiles/")</span><br></span></code></pre></div></div>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Python example</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> pyspark</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sql </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> SparkSession</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spark </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> SparkSession</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">builder \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">appName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Curvine Python Demo"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"spark.hadoop.fs.cv.impl"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"io.curvine.CurvineFileSystem"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"spark.hadoop.fs.cv.master_addrs"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"master1:8995,master2:8995"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">getOrCreate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Read data from cache</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">df </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> spark</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">read</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">option</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"header"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"true"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">csv</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"cv://warehouse/customer_data/"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Complex queries automatically enjoy cache acceleration</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> df</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">groupBy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"region"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">agg</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">"revenue"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"sum"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"orders"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"count"</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">orderBy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"sum(revenue)"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ascending</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">show</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">20</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="trinopresto-plugin-integration">Trino/Presto Plugin Integration<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#trinopresto-plugin-integration" class="hash-link" aria-label="Direct link to Trino/Presto Plugin Integration" title="Direct link to Trino/Presto Plugin Integration">‚Äã</a></h3>
<p>Curvine provides an intelligent path replacement plugin, which can achieve non-invasive cache acceleration without requiring business code modifications, achieving completely transparent cache acceleration:</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="plugin-workflow">Plugin Workflow<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#plugin-workflow" class="hash-link" aria-label="Direct link to Plugin Workflow" title="Direct link to Plugin Workflow">‚Äã</a></h4>
<p><img decoding="async" loading="lazy" alt="Plugin Workflow" src="https://curvineio.github.io/assets/images/PluginWorkflow-d8cf7027cd68b74434060e68c06e4705.png" width="1117" height="596" class="img_ev3q"></p>
<p>Spark plugin usage example:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">spark-submit \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--class main.scala.Tpch \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--name tpch_demo \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--conf spark.hadoop.fs.cv.impl=io.curvine.CurvineFileSystem \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--conf spark.hadoop.fs.cv.default.master_addrs=master1:8995,master2:8995 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--conf spark.sql.extensions=io.curvine.spark.CurvineSparkExtension \</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="flink-real-time-computing-integration">Flink Real-time Computing Integration<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#flink-real-time-computing-integration" class="hash-link" aria-label="Direct link to Flink Real-time Computing Integration" title="Direct link to Flink Real-time Computing Integration">‚Äã</a></h3>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Flink Table API integration example</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TableEnvironment tableEnv = TableEnvironment.create(settings);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Configure Curvine FileSystem</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Configuration config = new Configuration();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">config.setString("fs.cv.impl", "io.curvine.CurvineFileSystem");</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">config.setString("fs.cv.master_addrs", "master1:8995,master2:8995");</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Create Curvine table</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tableEnv.executeSql(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "CREATE TABLE user_events (" +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "  user_id BIGINT," +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "  event_type STRING," +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "  timestamp_ms BIGINT," +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "  properties MAP&lt;STRING, STRING&gt;" +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ") WITH (" +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "  'connector' = 'filesystem'," +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "  'path' = 'cv://streaming/events/'," +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "  'format' = 'json'" +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ")"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Real-time query enjoys cache acceleration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Table result = tableEnv.sqlQuery(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "SELECT user_id, COUNT(*) as event_count " +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "FROM user_events " +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "WHERE timestamp_ms &gt; UNIX_TIMESTAMP() * 1000 - 3600000 " +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "GROUP BY user_id"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span></code></pre></div></div>
<hr>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-best-practices">üí° Best Practices<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#-best-practices" class="hash-link" aria-label="Direct link to üí° Best Practices" title="Direct link to üí° Best Practices">‚Äã</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-mounting-strategy-best-practices">üéØ Mounting Strategy Best Practices<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#-mounting-strategy-best-practices" class="hash-link" aria-label="Direct link to üéØ Mounting Strategy Best Practices" title="Direct link to üéØ Mounting Strategy Best Practices">‚Äã</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="tiered-mounting-by-business-scenarios">Tiered Mounting by Business Scenarios<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#tiered-mounting-by-business-scenarios" class="hash-link" aria-label="Direct link to Tiered Mounting by Business Scenarios" title="Direct link to Tiered Mounting by Business Scenarios">‚Äã</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Hot data: high-frequency access, using memory cache</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bin/cv mount s3://bucket/hot /bucket/hot \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --storage-type=mem \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --replicas=3 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --ttl-ms=1d \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --ttl-action=delete</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Warm data: regular access, using SSD cache</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bin/cv mount s3://bucket/warm /bucket/warm \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --storage-type=ssd \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --replicas=2 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --ttl-ms=7d \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --ttl-action=delete</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Cold data: low-frequency access, using disk cache</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bin/cv mount s3://bucket/cold /bucket/cold \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --storage-type=disk \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --replicas=1 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --ttl-ms=30d \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --ttl-action=delete</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="optimization-by-data-type">Optimization by Data Type<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#optimization-by-data-type" class="hash-link" aria-label="Direct link to Optimization by Data Type" title="Direct link to Optimization by Data Type">‚Äã</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Small file intensive (e.g., logs, configurations)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bin/cv mount s3://bucket/logs /bucket/logs \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --block-size=4MB \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --consistency-strategy=none </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Large file type (e.g., videos, models)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bin/cv mount s3://bucket/models /bucket/models \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --block-size=1GB \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --consistency-strategy=always </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Analytical data (e.g., Parquet)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bin/cv mount s3://bucket/analytics /bucket/analytics \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --block-size=128MB \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --consistency-strategy=none \</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-summary">üéØ Summary<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#-summary" class="hash-link" aria-label="Direct link to üéØ Summary" title="Direct link to üéØ Summary">‚Äã</a></h2>
<p>As a new generation distributed caching system, Curvine provides excellent performance improvements for modern data-intensive applications through intelligent caching strategies, strong consistency guarantees, and seamless ecosystem integration.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-core-values">üèÜ Core Values<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#-core-values" class="hash-link" aria-label="Direct link to üèÜ Core Values" title="Direct link to üèÜ Core Values">‚Äã</a></h3>
<ul>
<li><strong>üöÄ Performance Improvement</strong>: 10-100x access acceleration, significantly reducing data access latency</li>
<li><strong>üí∞ Cost Optimization</strong>: Reduce cloud storage access costs, improve computing resource utilization</li>
<li><strong>üõ°Ô∏è Data Security</strong>: Multiple consistency guarantees to ensure data accuracy and integrity</li>
<li><strong>üåê Ecosystem Friendly</strong>: Seamless integration with mainstream big data and AI frameworks</li>
</ul>
<hr>
<p><em>Curvine - Make data access lightning fast ‚ö°</em></p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Building a Curvine Cluster from Scratch & FIO Testing]]></title>
            <link>https://curvineio.github.io/blog/2025/08/08/fio-bench</link>
            <guid>https://curvineio.github.io/blog/2025/08/08/fio-bench</guid>
            <pubDate>Fri, 08 Aug 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[How to quickly get started and try out Curvine's performance? This article will introduce how to build a local small cluster from scratch, allowing everyone to get hands-on experience quickly.]]></description>
            <content:encoded><![CDATA[<p>How to quickly get started and try out Curvine's performance? This article will introduce how to build a local small cluster from scratch, allowing everyone to get hands-on experience quickly.</p>
<blockquote>
<p>GitHub: <a href="https://github.com/CurvineIO/curvine" target="_blank" rel="noopener noreferrer">https://github.com/CurvineIO/curvine</a></p>
</blockquote>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-download-the-code">1. Download the Code:<a href="https://curvineio.github.io/blog/2025/08/08/fio-bench#1-download-the-code" class="hash-link" aria-label="Direct link to 1. Download the Code:" title="Direct link to 1. Download the Code:">‚Äã</a></h2>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">git clone https://github.com/CurvineIO/curvine.git</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-environment-requirements">2. Environment Requirements:<a href="https://curvineio.github.io/blog/2025/08/08/fio-bench#2-environment-requirements" class="hash-link" aria-label="Direct link to 2. Environment Requirements:" title="Direct link to 2. Environment Requirements:">‚Äã</a></h2>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">GCC: version 10 or later </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Rust: version 1.86 or later </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Protobuf: version 3.x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Maven: version 3.8 or later</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LLVM: version 12 or later</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FUSE: libfuse2 or libfuse3 development packages</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">JDK: version 1.8 or later </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm: version 9 or later</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Python: version 3.7 or later </span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-compile--run">3. Compile &amp; Run<a href="https://curvineio.github.io/blog/2025/08/08/fio-bench#3-compile--run" class="hash-link" aria-label="Direct link to 3. Compile &amp; Run" title="Direct link to 3. Compile &amp; Run">‚Äã</a></h2>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">make all</span><br></span></code></pre></div></div>
<p>To facilitate compilation, our build script will check dependencies in advance. For macOS users, we will temporarily skip FUSE compilation (currently not adapted for macOS). Interested users can consider using the <code>macfuse</code> project for adaptation.</p>
<p><img decoding="async" loading="lazy" alt="make-checkenv" src="https://curvineio.github.io/assets/images/make-checkenv-f5dbd19e6cb852ce3b7bcecf4a6be804.png" width="1080" height="692" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-after-compilation-start-local-cluster">4. After Compilation, Start Local Cluster<a href="https://curvineio.github.io/blog/2025/08/08/fio-bench#4-after-compilation-start-local-cluster" class="hash-link" aria-label="Direct link to 4. After Compilation, Start Local Cluster" title="Direct link to 4. After Compilation, Start Local Cluster">‚Äã</a></h2>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd build/dist</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./bin/restart-all.sh</span><br></span></code></pre></div></div>
<p>After successful startup, execute the report command to check if it's working:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bin/cv report</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       active_master: localhost:8995</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       journal_nodes: 1,localhost:8996</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            capacity: 233.5GB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           available: 105.0GB (44.99%)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             fs_used: 0.0B (0.00%)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         non_fs_used: 128.4GB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     live_worker_num: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     lost_worker_num: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           inode_num: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           block_num: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    live_worker_list: 192.168.xxx.xxx:8997,105.0GB/233.5GB (44.99%)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    lost_worker_list:</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="5-view-local-master-and-worker-webui">5. View Local Master and Worker WebUI<a href="https://curvineio.github.io/blog/2025/08/08/fio-bench#5-view-local-master-and-worker-webui" class="hash-link" aria-label="Direct link to 5. View Local Master and Worker WebUI" title="Direct link to 5. View Local Master and Worker WebUI">‚Äã</a></h2>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">http://localhost:9000/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">http://localhost:9001/</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" alt="webui" src="https://curvineio.github.io/assets/images/webui-99651178199aa9d72a8134fbccfd482e.png" width="1080" height="479" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="6-fio-testing">6. FIO Testing<a href="https://curvineio.github.io/blog/2025/08/08/fio-bench#6-fio-testing" class="hash-link" aria-label="Direct link to 6. FIO Testing" title="Direct link to 6. FIO Testing">‚Äã</a></h2>
<p>Test Environment: Alibaba Cloud <code>ecs.r8a.8xlarge</code> instance with one master/worker/client each</p>
<ul>
<li>32 cores (vCPU)</li>
<li>256 GiB memory</li>
<li>System disk and data disk both: ESSD cloud disk 500 GiB (7800 IOPS)</li>
<li>Maximum bandwidth: 25Gb</li>
</ul>
<p>Prepare data (on worker machine):</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">bin/curvine-bench.sh fuse.write</span><br></span></code></pre></div></div>
<p><strong>FIO Sequential Read Test, 8 Concurrent Jobs</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">fio -iodepth=1 -rw=read -ioengine=libaio -bs=256k</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> -group_reporting -size=200gb </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> -filename=/curvine-fuse/fs-bench/0  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> -name=read_test --readonly -direct=1 --runtime=60 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> -numjobs=8</span><br></span></code></pre></div></div>
<p><strong>FIO Random Read Test, 8 Concurrent Jobs</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fio -iodepth=1 -rw=randread -ioengine=libaio -bs=256k</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> -group_reporting -size=200gb </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> -filename=/curvine-fuse/fs-bench/0  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> -name=read_test --readonly -direct=1 --runtime=60</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> -numjobs=8</span><br></span></code></pre></div></div>
<p>Finally, here's a video demonstration of the FIO testing results:</p>]]></content:encoded>
            <category>benchmark</category>
        </item>
        <item>
            <title><![CDATA[Curvine: High-Performance Distributed Cache‚Äî‚ÄîDataFun Intelligent Conference]]></title>
            <link>https://curvineio.github.io/blog/2025/07/25/datafun-conference</link>
            <guid>https://curvineio.github.io/blog/2025/07/25/datafun-conference</guid>
            <pubDate>Fri, 25 Jul 2025 00:00:00 GMT</pubDate>
            <content:encoded><![CDATA[<div style="text-align:center"><img src="https://curvineio.github.io/assets/images/page1-912612ed651048729fa4b448bab3b5f1.png" alt="page1" style="width:100%;max-width:800px"></div>
<div style="text-align:center"><img src="https://curvineio.github.io/assets/images/page2-a7ddc73d802a201dc601a72dbd287816.png" alt="page2" style="width:100%;max-width:800px"></div>
<div style="text-align:center"><img src="https://curvineio.github.io/assets/images/page3-611b160328efcb266a5701e6ac019b85.png" alt="page3" style="width:100%;max-width:800px"></div>
<div style="text-align:center"><img src="https://curvineio.github.io/assets/images/page4-61f192ed965aeb23cba081f116e23d1e.png" alt="page4" style="width:100%;max-width:800px"></div>
<div style="text-align:center"><img src="https://curvineio.github.io/assets/images/page5-4f78f429a8655773a0a12f1539f141e5.png" alt="page5" style="width:100%;max-width:800px"></div>
<div style="text-align:center"><img src="https://curvineio.github.io/assets/images/page6-9183dd3ca76b5388cc5ecc79d046aad5.png" alt="page6" style="width:100%;max-width:800px"></div>
<div style="text-align:center"><img src="https://curvineio.github.io/assets/images/page7-b3f9771510dcedff83141aeb3caed1c4.png" alt="page7" style="width:100%;max-width:800px"></div>
<div style="text-align:center"><img src="https://curvineio.github.io/assets/images/page8-5393f9d2a2f092f8a172e349c4ac11fc.png" alt="page8" style="width:100%;max-width:800px"></div>
<div style="text-align:center"><img src="https://curvineio.github.io/assets/images/page9-b69465dda0612a817a88bb622636c094.png" alt="page9" style="width:100%;max-width:800px"></div>
<div style="text-align:center"><img src="https://curvineio.github.io/assets/images/page10-ee025d1b2093cddefaecd1312304824f.png" alt="page10" style="width:100%;max-width:800px"></div>
<div style="text-align:center"><img src="https://curvineio.github.io/assets/images/page11-2ced0189de014cbaa5b9adfd0c208ceb.png" alt="page11" style="width:100%;max-width:800px"></div>
<div style="text-align:center"><img src="https://curvineio.github.io/assets/images/page12-d3f1722949f4bc3874cbf98b4dd2d597.png" alt="page12" style="width:100%;max-width:800px"></div>
<div style="text-align:center"><img src="https://curvineio.github.io/assets/images/page13-8863c5fc8748a8b9e7f20e88c74aec4d.png" alt="page13" style="width:100%;max-width:800px"></div>
<div style="text-align:center"><img src="https://curvineio.github.io/assets/images/page14-50fbc590fec04a9fb605b25bf13d320f.png" alt="page14" style="width:100%;max-width:800px"></div>
<div style="text-align:center"><img src="https://curvineio.github.io/assets/images/page15-1968f523aa5566ee0d98c2a718d5f645.png" alt="page15" style="width:100%;max-width:800px"></div>
<div style="text-align:center"><img src="https://curvineio.github.io/assets/images/page16-b8594c0cbabadccad225f1ae2f193fb9.png" alt="page16" style="width:100%;max-width:800px"></div>
<div style="text-align:center"><img src="https://curvineio.github.io/assets/images/page17-93ab759298cc1c5716e63bd18f782eb9.png" alt="page17" style="width:100%;max-width:800px"></div>
<div style="text-align:center"><img src="https://curvineio.github.io/assets/images/page18-bf503a945154dcfe2cabf6712058d27e.png" alt="page18" style="width:100%;max-width:800px"></div>
<div style="text-align:center"><img src="https://curvineio.github.io/assets/images/page19-2a49019ab98180989195d2a52689afff.png" alt="page19" style="width:100%;max-width:800px"></div>
<div style="text-align:center"><img src="https://curvineio.github.io/assets/images/page20-4dea66f210914537626b26f5c46f8cf6.png" alt="page20" style="width:100%;max-width:800px"></div>]]></content:encoded>
            <category>teams</category>
        </item>
        <item>
            <title><![CDATA[what-is-curvine]]></title>
            <link>https://curvineio.github.io/blog/2025/07/15/what-is-curvine</link>
            <guid>https://curvineio.github.io/blog/2025/07/15/what-is-curvine</guid>
            <pubDate>Tue, 15 Jul 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[What is Curvine]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-curvine">What is Curvine<a href="https://curvineio.github.io/blog/2025/07/15/what-is-curvine#what-is-curvine" class="hash-link" aria-label="Direct link to What is Curvine" title="Direct link to What is Curvine">‚Äã</a></h2>
<p>‚ÄÉCurvine is a distributed caching system implemented in Rust, featuring high concurrency, high throughput, low latency, and low resource consumption. Unlike KV caches like Redis or TiKV, Curvine exclusively provides file caching capabilities. It is not a storage system but rather a caching layer - data persistence still relies on underlying file systems or object storage systems for support.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-problem-does-it-solve">What problem does it solve<a href="https://curvineio.github.io/blog/2025/07/15/what-is-curvine#what-problem-does-it-solve" class="hash-link" aria-label="Direct link to What problem does it solve" title="Direct link to What problem does it solve">‚Äã</a></h2>
<ol>
<li>Large-scale Data I/O Performance Bottlenecks;</li>
<li>Single-Machine Cache Capacity Limitations.</li>
</ol>
<p>‚ÄÉIn practical applications, what scenarios are suitable for Curvine acceleration?</p>
<div style="text-align:center"><img src="https://curvineio.github.io/assets/images/Curvine-application-d648229ff01cab5c013e96616f9c4e1a.png" alt="Curvine Application Scenarios." style="width:80%;max-width:800px"><p style="font-size:0.8em;color:#666;margin-top:8px"></p><p><b>Fig. 1</b>ÔºöCurvine Application Scenarios.</p><p></p></div>
<p>‚ÄÉAs shown in the figure above, Curvine is designed for the following five core scenarios:</p>
<ol>
<li>Accelerating intermediate data processing in big data shuffle operations</li>
<li>Caching hot table data for faster big data analytics</li>
<li>Boosting AI training efficiency through dataset caching</li>
<li>Accelerating model file distribution via caching layer</li>
<li>Cross-cloud data caching to mitigate performance bottlenecks of dedicated cloud connections</li>
</ol>
<p>‚ÄÉThese use cases are just the beginning. In simple terms, Curvine fundamentally addresses: The growing conflict between escalating computational demands and the I/O bottlenecks of distributed cache systems.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="performance">Performance<a href="https://curvineio.github.io/blog/2025/07/15/what-is-curvine#performance" class="hash-link" aria-label="Direct link to Performance" title="Direct link to Performance">‚Äã</a></h2>
<p>‚ÄÉWe demonstrate performance and resource utilization from the following aspects:‚Äã</p>
<p><strong>1. Metadata operation performance</strong></p>
<table><thead><tr style="background-color:#2ecc71;color:white"><th>Operation Type</th><th>Curvine (QPS)</th><th>Juicefs (QPS)</th><th>oss (QPS)</th></tr></thead><tbody><tr><td>create</td><td style="text-align:right">19,985</td><td style="text-align:right">16,000</td><td style="text-align:right">2,000</td></tr><tr><td>open</td><td style="text-align:right">60,376</td><td style="text-align:right">50,000</td><td style="text-align:right">3,900</td></tr><tr><td>rename</td><td style="text-align:right">43,009</td><td style="text-align:right">21,000</td><td style="text-align:right">200</td></tr><tr><td>delete</td><td style="text-align:right">39,013</td><td style="text-align:right">41,000</td><td style="text-align:right">1,900</td></tr></tbody></table>
<p>‚ÄÉ<strong>Note</strong>: All benchmark comparisons were conducted with a concurrency level of 40.</p>
<p>‚ÄÉ<strong>Detailed results</strong>: <a href="https://curvineio.github.io/docs/Benchmark/meta/" target="_blank" rel="noopener noreferrer">https://curvineio.github.io/docs/Benchmark/meta/</a></p>
<p>‚ÄÉ<strong>Industry benchmark test data of comparable products</strong>: <a href="https://juicefs.com/zh-cn/blog/engineering/meta-perf-hdfs-oss-jfs" target="_blank" rel="noopener noreferrer">https://juicefs.com/zh-cn/blog/engineering/meta-perf-hdfs-oss-jfs</a></p>
<p><strong>2. Data Read/Write Performance</strong></p>
<p>‚ÄÉBenchmarking Alluxio performance under identical hardware conditions:</p>
<p>‚óè 256K sequential read</p>
<table style="width:100%;border-collapse:collapse"><thead><tr style="background-color:#2ecc71;color:white"><th>Thread count</th><th>Curvine Open Source Edition (GiB/s)</th><th>Throughput of Open Source Alluxio (GiB/s)</th></tr></thead><tbody><tr style="border-bottom:1px solid #e1e4e8"><td style="text-align:right">1</td><td style="text-align:right">2.2</td><td style="text-align:right">0.6</td></tr><tr style="border-bottom:1px solid #e1e4e8"><td style="text-align:right">2</td><td style="text-align:right">3.7</td><td style="text-align:right">1.1</td></tr><tr style="border-bottom:1px solid #e1e4e8"><td style="text-align:right">4</td><td style="text-align:right">6.8</td><td style="text-align:right">2.3</td></tr><tr style="border-bottom:1px solid #e1e4e8"><td style="text-align:right">8</td><td style="text-align:right">8.9</td><td style="text-align:right">4.5</td></tr><tr style="border-bottom:1px solid #e1e4e8"><td style="text-align:right">16</td><td style="text-align:right">9.2</td><td style="text-align:right">7.9</td></tr><tr style="border-bottom:1px solid #e1e4e8"><td style="text-align:right">32</td><td style="text-align:right">9.5</td><td style="text-align:right">8.8</td></tr><tr style="border-bottom:1px solid #e1e4e8"><td style="text-align:right">64</td><td style="text-align:right">9.2</td><td style="text-align:right">N/A</td></tr><tr style="border-bottom:1px solid #e1e4e8"><td style="text-align:right">128</td><td style="text-align:right">9.2</td><td style="text-align:right">N/A</td></tr></tbody></table>
<p>‚óè 256K random read</p>
<table style="width:100%;border-collapse:collapse"><thead><tr style="background-color:#2ecc71;color:white"><th>Thread count</th><th>Curvine Open Source Edition (GiB/s)</th><th>Throughput of Open Source Alluxio (GiB/s)</th></tr></thead><tbody><tr style="border-bottom:1px solid #e1e4e8"><td style="text-align:right">1</td><td style="text-align:right">0.3</td><td style="text-align:right">0.0</td></tr><tr style="border-bottom:1px solid #e1e4e8"><td style="text-align:right">2</td><td style="text-align:right">0.7</td><td style="text-align:right">0.1</td></tr><tr style="border-bottom:1px solid #e1e4e8"><td style="text-align:right">4</td><td style="text-align:right">1.4</td><td style="text-align:right">0.1</td></tr><tr style="border-bottom:1px solid #e1e4e8"><td style="text-align:right">8</td><td style="text-align:right">2.8</td><td style="text-align:right">0.2</td></tr><tr style="border-bottom:1px solid #e1e4e8"><td style="text-align:right">16</td><td style="text-align:right">5.2</td><td style="text-align:right">0.4</td></tr><tr style="border-bottom:1px solid #e1e4e8"><td style="text-align:right">32</td><td style="text-align:right">7.8</td><td style="text-align:right">0.3</td></tr><tr style="border-bottom:1px solid #e1e4e8"><td style="text-align:right">64</td><td style="text-align:right">8.7</td><td style="text-align:right">N/A</td></tr><tr style="border-bottom:1px solid #e1e4e8"><td style="text-align:right">128</td><td style="text-align:right">9.0</td><td style="text-align:right">N/A</td></tr></tbody></table>
<p>‚ÄÉ Data disclosure from Alluxio official website: <a href="https://www.alluxio.com.cn/alluxio-enterprise-vs-open-source/" target="_blank" rel="noopener noreferrer">https://www.alluxio.com.cn/alluxio-enterprise-vs-open-source/</a>.</p>
<p><strong>3. Resource consumption</strong></p>
<p>‚ÄÉ Thanks to Rust's language features, in the big data shuffle acceleration scenario, our comparison of online resource consumption between Curvine and Alluxio shows a ‚Äã90%+ reduction in memory usage‚Äã and ‚Äã50%+ reduction in CPU usage.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="architecture-overview">Architecture Overview<a href="https://curvineio.github.io/blog/2025/07/15/what-is-curvine#architecture-overview" class="hash-link" aria-label="Direct link to Architecture Overview" title="Direct link to Architecture Overview">‚Äã</a></h2>
<p>‚ÄÉ Curvine's architectural design philosophy: Simplicity, Excellence, and Universality.</p>
<div style="text-align:center"><img src="https://curvineio.github.io/assets/images/Curvine-architechure-ed8e3e75a50ee79638f22550d895668a.png" alt="Curvine Architecture Diagram." style="width:80%;max-width:800px"><p style="font-size:0.8em;color:#666;margin-top:8px"></p><p><b>Fig. 2</b>ÔºöCurvine Application Scenarios.</p><p></p></div>
<p>‚ÄÉ<strong>Simplicity</strong>: Lightweight design with only two roles in the caching service: master and worker. For non-performance-critical modules, maximize reuse of open-source or existing technologies, ensuring minimal code complexity.</p>
<p>‚ÄÉ<strong>Excellence</strong>: Key performance-impacting components (e.g., underlying RPC communication framework, Fuse implementation) are independently designed and optimized with a performance-first mindset.</p>
<p>‚ÄÉ<strong>Generality</strong>: Compatible with multiple existing access modes. The underlying storage supports mainstream distributed file and object storage systems, ensuring versatility and ease of use.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="on-open-source">On Open-Source<a href="https://curvineio.github.io/blog/2025/07/15/what-is-curvine#on-open-source" class="hash-link" aria-label="Direct link to On Open-Source" title="Direct link to On Open-Source">‚Äã</a></h2>
<p>‚ÄÉWe have achieved significant performance gains by deploying Curvine in high-concurrency, high-throughput big data scenarios internally. Now, we aim to collaborate with external partners to co-build this solution and collectively accelerate the infrastructure transition to Rust.</p>
<p>‚ÄÉ<a href="https://github.com/curvineio/curvine" target="_blank" rel="noopener noreferrer">https://github.com/curvineio/curvine</a></p>
<p>‚ÄÉPowered by OPPO Bigdata.</p>]]></content:encoded>
            <category>teams</category>
        </item>
        <item>
            <title><![CDATA[Curvine Caching now comming!]]></title>
            <link>https://curvineio.github.io/blog/welcome</link>
            <guid>https://curvineio.github.io/blog/welcome</guid>
            <pubDate>Thu, 29 May 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[Curvine is a high-performance distributed caching system implemented in Rust, designed for low-latency and high-throughput workloads with powerful data governance capabilities.]]></description>
            <content:encoded><![CDATA[<p>Curvine is a high-performance distributed caching system implemented in Rust, designed for low-latency and high-throughput workloads with powerful data governance capabilities.</p>]]></content:encoded>
            <category>teams</category>
        </item>
    </channel>
</rss>