<?xml version="1.0" encoding="utf-8"?><?xml-stylesheet type="text/xsl" href="atom.xsl"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://curvineio.github.io/blog</id>
    <title>Curvine Blog</title>
    <updated>2025-09-28T00:00:00.000Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://curvineio.github.io/blog"/>
    <subtitle>Curvine Blog</subtitle>
    <icon>https://curvineio.github.io/img/curvine_logo.ico</icon>
    <entry>
        <title type="html"><![CDATA[Curvine Distributed Cache System User Guide]]></title>
        <id>https://curvineio.github.io/blog/2025/09/28/user-guide</id>
        <link href="https://curvineio.github.io/blog/2025/09/28/user-guide"/>
        <updated>2025-09-28T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Version]]></summary>
        <content type="html"><![CDATA[<p><a href="https://github.com/curvine/curvine" target="_blank" rel="noopener noreferrer"><img decoding="async" loading="lazy" src="https://img.shields.io/badge/version-v1.0-blue.svg" alt="Version" class="img_ev3q"></a>
<a href="https://www.apache.org/licenses/LICENSE-2.0" target="_blank" rel="noopener noreferrer"><img decoding="async" loading="lazy" src="https://img.shields.io/badge/license-Apache%202.0-green.svg" alt="License" class="img_ev3q"></a>
<a href="https://docs.curvine.io/" target="_blank" rel="noopener noreferrer"><img decoding="async" loading="lazy" src="https://img.shields.io/badge/docs-latest-brightgreen.svg" alt="Documentation" class="img_ev3q"></a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-table-of-contents">📚 Table of Contents<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#-table-of-contents" class="hash-link" aria-label="Direct link to 📚 Table of Contents" title="Direct link to 📚 Table of Contents">​</a></h2>
<ul>
<li><a href="https://curvineio.github.io/blog/2025/09/28/user-guide#-system-overview">🎯 System Overview</a></li>
<li><a href="https://curvineio.github.io/blog/2025/09/28/user-guide#-path-mount-management">📂 Path Mount Management</a></li>
<li><a href="https://curvineio.github.io/blog/2025/09/28/user-guide#-intelligent-caching-strategies">💾 Intelligent Caching Strategies</a></li>
<li><a href="https://curvineio.github.io/blog/2025/09/28/user-guide#-data-consistency-guarantees">🔄 Data Consistency Guarantees</a></li>
<li><a href="https://curvineio.github.io/blog/2025/09/28/user-guide#-aiml-scenario-applications">🤖 AI/ML Scenario Applications</a></li>
<li><a href="https://curvineio.github.io/blog/2025/09/28/user-guide#-big-data-ecosystem-integration">🗄️ Big Data Ecosystem Integration</a></li>
<li><a href="https://curvineio.github.io/blog/2025/09/28/user-guide#-best-practices">💡 Best Practices</a></li>
<li><a href="https://curvineio.github.io/blog/2025/09/28/user-guide#-summary">🎯 Summary</a></li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-system-overview">🎯 System Overview<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#-system-overview" class="hash-link" aria-label="Direct link to 🎯 System Overview" title="Direct link to 🎯 System Overview">​</a></h2>
<p>Curvine is a high-performance, cloud-native distributed caching system designed for modern data-intensive applications. It provides an intelligent caching layer between underlying storage (UFS) and compute engines, significantly improving data access performance.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-performance-advantages">🏆 Performance Advantages<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#-performance-advantages" class="hash-link" aria-label="Direct link to 🏆 Performance Advantages" title="Direct link to 🏆 Performance Advantages">​</a></h3>
<p>Compared to traditional storage access methods, Curvine can provide:</p>
<table><thead><tr><th>Metric</th><th>Cloud Storage</th><th>Curvine Cache</th><th>Performance Improvement</th></tr></thead><tbody><tr><td><strong>Read Latency</strong></td><td>100-500ms</td><td>1-10ms</td><td><strong>10-50x</strong></td></tr><tr><td><strong>Throughput</strong></td><td>100-500 MB/s</td><td>1-10 GB/s</td><td><strong>10-20x</strong></td></tr><tr><td><strong>IOPS</strong></td><td>1K-10K</td><td>100K-1M</td><td><strong>100x</strong></td></tr><tr><td><strong>Concurrent Connections</strong></td><td>100-1K</td><td>10K-100K</td><td><strong>100x</strong></td></tr></tbody></table>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="core-components">Core Components<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#core-components" class="hash-link" aria-label="Direct link to Core Components" title="Direct link to Core Components">​</a></h3>
<ul>
<li><strong>Master Cluster</strong>: Metadata management, cache scheduling, consistency guarantees</li>
<li><strong>Worker Nodes</strong>: Data caching, I/O processing, task execution</li>
<li><strong>Client SDK</strong>: Multi-language clients, supporting Rust, Fuse, Java, Python</li>
<li><strong>Job Manager</strong>: Distributed task scheduling and management</li>
<li><strong>Metrics System</strong>: Real-time monitoring and performance analysis</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-path-mount-management">📂 Path Mount Management<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#-path-mount-management" class="hash-link" aria-label="Direct link to 📂 Path Mount Management" title="Direct link to 📂 Path Mount Management">​</a></h2>
<p>Mounting is the first step in using Curvine cache, which establishes the mapping relationship between underlying storage (UFS) and cache paths.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="mounting-modes-explained">Mounting Modes Explained<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#mounting-modes-explained" class="hash-link" aria-label="Direct link to Mounting Modes Explained" title="Direct link to Mounting Modes Explained">​</a></h3>
<p>Curvine supports two flexible mounting modes:</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="-cst-mode-consistent-path-mode">🎯 CST Mode (Consistent Path Mode)<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#-cst-mode-consistent-path-mode" class="hash-link" aria-label="Direct link to 🎯 CST Mode (Consistent Path Mode)" title="Direct link to 🎯 CST Mode (Consistent Path Mode)">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Consistent path, easy to manage and maintain</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bin/cv mount s3://bucket/data /bucket/data --mnt-type cst</span><br></span></code></pre></div></div>
<p><strong>Ideal scenarios</strong>:</p>
<ul>
<li>Data lake scenarios with clear path structures</li>
<li>Production environments requiring intuitive path mapping</li>
<li>Data platforms with multi-team collaboration</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="-arch-mode-orchestration-mode">🔀 Arch Mode (Orchestration Mode)<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#-arch-mode-orchestration-mode" class="hash-link" aria-label="Direct link to 🔀 Arch Mode (Orchestration Mode)" title="Direct link to 🔀 Arch Mode (Orchestration Mode)">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Flexible path mapping, supporting complex path transformations</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bin/cv mount s3://complex-bucket/deep/nested/path /simple/data --mnt-type arch</span><br></span></code></pre></div></div>
<p><strong>Ideal scenarios</strong>:</p>
<ul>
<li>Complex storage hierarchies</li>
<li>Scenarios requiring path abstraction</li>
<li>Multi-cloud storage unified access</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="complete-mounting-example">Complete Mounting Example<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#complete-mounting-example" class="hash-link" aria-label="Direct link to Complete Mounting Example" title="Direct link to Complete Mounting Example">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Mount S3 storage to Curvine (production-grade configuration)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bin/cv mount \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">s3://bucket/warehouse/tpch_500g.db/orders \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/bucket/warehouse/tpch_500g.db/orders \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--ttl-ms 24h \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--ttl-action delete \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--replicas 3 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--block-size 128MB \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--consistency-strategy always \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--storage-type ssd \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-c s3.endpoint_url=https://s3.ap-southeast-1.amazonaws.com \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-c s3.credentials.access=access_key \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-c s3.credentials.secret=secret_key \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-c s3.region_name=ap-southeast-1 </span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="mounting-parameters-explained">Mounting Parameters Explained<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#mounting-parameters-explained" class="hash-link" aria-label="Direct link to Mounting Parameters Explained" title="Direct link to Mounting Parameters Explained">​</a></h3>
<table><thead><tr><th>Parameter</th><th>Type</th><th>Default</th><th>Description</th><th>Example</th></tr></thead><tbody><tr><td><code>--ttl-ms</code></td><td>duration</td><td><code>0</code></td><td>Cache data expiration time</td><td><code>24h</code>, <code>7d</code>, <code>30d</code></td></tr><tr><td><code>--ttl-action</code></td><td>enum</td><td><code>none</code></td><td>Expiration policy: <code>delete</code>/<code>none</code></td><td><code>delete</code></td></tr><tr><td><code>--replicas</code></td><td>int</td><td><code>1</code></td><td>Number of data replicas (1-5)</td><td><code>3</code></td></tr><tr><td><code>--block-size</code></td><td>size</td><td><code>128MB</code></td><td>Cache block size</td><td><code>64MB</code>, <code>128MB</code>, <code>256MB</code></td></tr><tr><td><code>--consistency-strategy</code></td><td>enum</td><td><code>always</code></td><td>Consistency strategy</td><td><code>none</code>/<code>always</code>/<code>period</code></td></tr><tr><td><code>--storage-type</code></td><td>enum</td><td><code>disk</code></td><td>Storage medium type</td><td><code>mem</code>/<code>ssd</code>/<code>disk</code></td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="mount-point-management">Mount Point Management<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#mount-point-management" class="hash-link" aria-label="Direct link to Mount Point Management" title="Direct link to Mount Point Management">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># View all mount points</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bin/cv mount</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Unmount path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bin/cv unmount /bucket/warehouse/tpch_500g.db/orders</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-intelligent-caching-strategies">💾 Intelligent Caching Strategies<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#-intelligent-caching-strategies" class="hash-link" aria-label="Direct link to 💾 Intelligent Caching Strategies" title="Direct link to 💾 Intelligent Caching Strategies">​</a></h2>
<p>Curvine provides multiple intelligent caching strategies, from passive response to active prediction, comprehensively optimizing data access performance.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="active-data-preloading">Active Data Preloading<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#active-data-preloading" class="hash-link" aria-label="Direct link to Active Data Preloading" title="Direct link to Active Data Preloading">​</a></h3>
<p>Active loading allows you to warm up the cache before business peaks to ensure optimal performance:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Basic loading</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bin/cv load s3:/bucket/warehouse/critical-dataset</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Synchronous loading with progress monitoring</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bin/cv load s3:/bucket/warehouse/critical-dataset -w</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="automatic-caching-strategy">Automatic Caching Strategy<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#automatic-caching-strategy" class="hash-link" aria-label="Direct link to Automatic Caching Strategy" title="Direct link to Automatic Caching Strategy">​</a></h3>
<p>Curvine's automatic caching system has significant advantages over traditional solutions:</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="-curvine-intelligent-cache-architecture">✨ Curvine Intelligent Cache Architecture<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#-curvine-intelligent-cache-architecture" class="hash-link" aria-label="Direct link to ✨ Curvine Intelligent Cache Architecture" title="Direct link to ✨ Curvine Intelligent Cache Architecture">​</a></h4>
<div class="language-mermaid codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-mermaid codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">graph TB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    A[Access Request] --&gt; C{Cache Status Check}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    C --&gt;|Hit| D[Read Cache Directly]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    C --&gt;|Miss| K{Async Load}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    K --&gt;|AsyncLoad| E[Submit Load File Task]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    K --&gt;|Read| L[Read UFS Directly]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    E --&gt; F[Distributed Task Scheduling]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    F --&gt; G[Consistency &amp; Integrity &amp; Uniqueness Check]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    G --&gt; J[Cache Data]</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="core-advantage-comparison">Core Advantage Comparison<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#core-advantage-comparison" class="hash-link" aria-label="Direct link to Core Advantage Comparison" title="Direct link to Core Advantage Comparison">​</a></h4>
<table><thead><tr><th>Feature</th><th>Open Source Competitors</th><th>Curvine</th><th>Advantage Description</th></tr></thead><tbody><tr><td><strong>Loading Granularity</strong></td><td>Block-level</td><td>File/Directory-level</td><td>Avoid fragmentation, ensure integrity</td></tr><tr><td><strong>Duplicate Processing</strong></td><td>Exists duplicate loading</td><td>Intelligent deduplication</td><td>Save bandwidth and storage resources</td></tr><tr><td><strong>Task Scheduling</strong></td><td>Simple queue</td><td>Distributed Job Manager</td><td>Efficient concurrency, load balancing</td></tr><tr><td><strong>Consistency Guarantee</strong></td><td>Passive checking</td><td>Active awareness</td><td>Real-time data synchronization</td></tr></tbody></table>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-data-consistency-guarantees">🔄 Data Consistency Guarantees<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#-data-consistency-guarantees" class="hash-link" aria-label="Direct link to 🔄 Data Consistency Guarantees" title="Direct link to 🔄 Data Consistency Guarantees">​</a></h2>
<p>Data consistency is a core challenge for caching systems, and Curvine provides multi-level consistency guarantee mechanisms.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="consistency-strategy-details">Consistency Strategy Details<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#consistency-strategy-details" class="hash-link" aria-label="Direct link to Consistency Strategy Details" title="Direct link to Consistency Strategy Details">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="1--none-mode---highest-performance">1. 🚫 None Mode - Highest Performance<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#1--none-mode---highest-performance" class="hash-link" aria-label="Direct link to 1. 🚫 None Mode - Highest Performance" title="Direct link to 1. 🚫 None Mode - Highest Performance">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">bin/cv mount s3://bucket/path /bucket/path --consistency-strategy=none</span><br></span></code></pre></div></div>
<ul>
<li><strong>Ideal scenarios</strong>: Static data, archived data, read-only datasets</li>
<li><strong>Performance</strong>: ⭐⭐⭐⭐⭐ (fastest)</li>
<li><strong>Consistency</strong>: ⭐⭐ (TTL-dependent)</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2--always-mode---strong-consistency">2. ✅ Always Mode - Strong Consistency<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#2--always-mode---strong-consistency" class="hash-link" aria-label="Direct link to 2. ✅ Always Mode - Strong Consistency" title="Direct link to 2. ✅ Always Mode - Strong Consistency">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">bin/cv mount s3://bucket/path /bucket/path --consistency-strategy=always</span><br></span></code></pre></div></div>
<ul>
<li><strong>Ideal scenarios</strong>: Frequently updated business data, critical business systems</li>
<li><strong>Performance</strong>: ⭐⭐⭐ (has overhead)</li>
<li><strong>Consistency</strong>: ⭐⭐⭐⭐⭐ (strong consistency)</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="3-️-period-mode---balanced-solution">3. 🕰️ Period Mode - Balanced Solution<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#3-%EF%B8%8F-period-mode---balanced-solution" class="hash-link" aria-label="Direct link to 3. 🕰️ Period Mode - Balanced Solution" title="Direct link to 3. 🕰️ Period Mode - Balanced Solution">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">bin/cv mount s3://bucket/path /bucket/path \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --consistency-strategy=period \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --check-interval=5m</span><br></span></code></pre></div></div>
<ul>
<li><strong>Ideal scenarios</strong>: Data with predictable update frequency</li>
<li><strong>Performance</strong>: ⭐⭐⭐⭐ (good)</li>
<li><strong>Consistency</strong>: ⭐⭐⭐⭐ (periodically guaranteed)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cache-performance-monitoring">Cache Performance Monitoring<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#cache-performance-monitoring" class="hash-link" aria-label="Direct link to Cache Performance Monitoring" title="Direct link to Cache Performance Monitoring">​</a></h3>
<p>Monitoring cache hit ratio is an important way to evaluate the effectiveness of consistency strategies:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Get cache hit ratio</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">curl -s http://master:9001/metrics | grep -E "(cache_hits|cache_misses)"</span><br></span></code></pre></div></div>
<div class="language-prometheus codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-prometheus codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">client_mount_cache_hits{id="3108497238"} 823307</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">client_mount_cache_misses{id="3108497238"} 4380</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-aiml-scenario-applications">🤖 AI/ML Scenario Applications<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#-aiml-scenario-applications" class="hash-link" aria-label="Direct link to 🤖 AI/ML Scenario Applications" title="Direct link to 🤖 AI/ML Scenario Applications">​</a></h2>
<p>AI and machine learning workloads have extremely high requirements for storage performance, and Curvine provides specially optimized functions for this.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="deep-learning-training-optimization">Deep Learning Training Optimization<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#deep-learning-training-optimization" class="hash-link" aria-label="Direct link to Deep Learning Training Optimization" title="Direct link to Deep Learning Training Optimization">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Optimized data loading for GPU clusters</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bin/cv mount s3://datasets/imagenet /datasets/imagenet \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --storage-type=mem \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --block-size=1GB \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --replicas=2 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="model-serving-scenarios">Model Serving Scenarios<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#model-serving-scenarios" class="hash-link" aria-label="Direct link to Model Serving Scenarios" title="Direct link to Model Serving Scenarios">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Model file caching (low-latency access)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bin/cv mount s3://model/bert-large /models/bert-large \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --storage-type=mem \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --ttl-ms=none \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --consistency-strategy=always </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Inference data caching</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bin/cv mount s3://inference/input /inference/input \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --storage-type=ssd \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --ttl-ms=1h \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --consistency-strategy=none </span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-posix-semantics-and-fuse-access">🔗 POSIX Semantics and FUSE Access<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#-posix-semantics-and-fuse-access" class="hash-link" aria-label="Direct link to 🔗 POSIX Semantics and FUSE Access" title="Direct link to 🔗 POSIX Semantics and FUSE Access">​</a></h3>
<p>Curvine perfectly supports POSIX semantics through the FUSE (Filesystem in Userspace) interface, allowing the Curvine cluster to be mounted as a local file system, providing a transparent file access experience for AI/ML applications.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="fuse-usage-in-aiml-training">FUSE Usage in AI/ML Training<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#fuse-usage-in-aiml-training" class="hash-link" aria-label="Direct link to FUSE Usage in AI/ML Training" title="Direct link to FUSE Usage in AI/ML Training">​</a></h4>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="1-deep-learning-training-data-access">1. Deep Learning Training Data Access<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#1-deep-learning-training-data-access" class="hash-link" aria-label="Direct link to 1. Deep Learning Training Data Access" title="Direct link to 1. Deep Learning Training Data Access">​</a></h5>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># PyTorch training script</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> torch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> torch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">utils</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">data </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Dataset</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> DataLoader</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> torchvision </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> transforms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> PIL </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Image</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> os</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">CurvineImageDataset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Dataset</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">__init__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> root_dir</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> transform</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token triple-quoted-string string" style="color:#e3116c">"""</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        Directly access data in Curvine through FUSE mount point</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        root_dir: FUSE mount point path, such as /curvine-fuse/datasets/imagenet</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        """</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">root_dir </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> root_dir</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">transform </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> transform</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">image_paths </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Directly traverse the FUSE-mounted directory</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> class_dir </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">listdir</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">root_dir</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            class_path </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">root_dir</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> class_dir</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">isdir</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">class_path</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> img_file </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">listdir</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">class_path</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> img_file</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lower</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">endswith</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'.png'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'.jpg'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'.jpeg'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">image_paths</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">append</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">class_path</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> img_file</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">__len__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token builtin">len</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">image_paths</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">__getitem__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> idx</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Access data through standard file operations, enjoying Curvine cache acceleration</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        img_path </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">image_paths</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">idx</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        image </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Image</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">open</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">img_path</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">convert</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'RGB'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">transform</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            image </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">transform</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">image</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Extract label from path</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        label </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">basename</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">dirname</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">img_path</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> image</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> label</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Usage example</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">transform </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> transforms</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Compose</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    transforms</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Resize</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">224</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">224</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    transforms</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ToTensor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    transforms</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Normalize</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">mean</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0.485</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.456</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.406</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        std</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0.229</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.224</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.225</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Directly use the path of the FUSE mount point</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dataset </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> CurvineImageDataset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    root_dir</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">'/curvine-fuse/datasets/imagenet/train'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    transform</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">transform</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dataloader </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> DataLoader</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dataset</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    batch_size</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">64</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    shuffle</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    num_workers</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">8</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pin_memory</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Training loop</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> epoch </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin">range</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">num_epochs</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> batch_idx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> targets</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin">enumerate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">dataloader</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Data is automatically loaded from Curvine cache through FUSE</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Enjoy near-memory access speed</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        outputs </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> model</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cuda</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        loss </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> criterion</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">outputs</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> targets</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cuda</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># ... training logic</span><br></span></code></pre></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="2-tensorflowkeras-data-pipeline">2. TensorFlow/Keras Data Pipeline<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#2-tensorflowkeras-data-pipeline" class="hash-link" aria-label="Direct link to 2. TensorFlow/Keras Data Pipeline" title="Direct link to 2. TensorFlow/Keras Data Pipeline">​</a></h5>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> tensorflow </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> tf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> os</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">create_curvine_dataset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data_dir</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> batch_size</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">32</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#e3116c">"""</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    Create TensorFlow data pipeline through FUSE mount point</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    data_dir: FUSE-mounted data directory</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    """</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Directly access FUSE-mounted data using standard file APIs</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">load_and_preprocess_image</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># TensorFlow transparently accesses Curvine cache through FUSE</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        image </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> tf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">io</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">read_file</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        image </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> tf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">image</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">decode_jpeg</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">image</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> channels</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        image </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> tf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">image</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">resize</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">image</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">224</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">224</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        image </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> tf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cast</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">image</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> tf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">float32</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">255.0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> image</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Scan files in the FUSE-mounted directory</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    image_paths </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    labels </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> class_name </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">listdir</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data_dir</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        class_dir </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data_dir</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> class_name</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">isdir</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">class_dir</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> img_file </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">listdir</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">class_dir</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> img_file</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lower</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">endswith</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'.png'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'.jpg'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'.jpeg'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    image_paths</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">append</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">class_dir</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> img_file</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    labels</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">append</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">class_name</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Create dataset</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    path_ds </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> tf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Dataset</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_tensor_slices</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">image_paths</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    label_ds </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> tf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Dataset</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_tensor_slices</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">labels</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Apply preprocessing</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    image_ds </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> path_ds</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        load_and_preprocess_image</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        num_parallel_calls</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">tf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">AUTOTUNE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Combine data and labels</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dataset </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> tf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Dataset</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">zip</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">image_ds</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> label_ds</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> dataset</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">batch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">batch_size</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">prefetch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">AUTOTUNE</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Usage example</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">train_dataset </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> create_curvine_dataset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'/curvine-fuse/datasets/imagenet/train'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">val_dataset </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> create_curvine_dataset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'/curvine-fuse/datasets/imagenet/val'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Model training</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">fit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    train_dataset</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    validation_data</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">val_dataset</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    epochs</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    callbacks</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        tf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">keras</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">callbacks</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ModelCheckpoint</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'/curvine-fuse/models/checkpoints/'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        tf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">keras</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">callbacks</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">TensorBoard</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">log_dir</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">'/curvine-fuse/logs/'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="️-big-data-ecosystem-integration">🗄️ Big Data Ecosystem Integration<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#%EF%B8%8F-big-data-ecosystem-integration" class="hash-link" aria-label="Direct link to 🗄️ Big Data Ecosystem Integration" title="Direct link to 🗄️ Big Data Ecosystem Integration">​</a></h2>
<p>Curvine seamlessly integrates with mainstream big data frameworks, providing transparent cache acceleration capabilities.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hadoop-ecosystem-integration">Hadoop Ecosystem Integration<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#hadoop-ecosystem-integration" class="hash-link" aria-label="Direct link to Hadoop Ecosystem Integration" title="Direct link to Hadoop Ecosystem Integration">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="basic-configuration">Basic Configuration<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#basic-configuration" class="hash-link" aria-label="Direct link to Basic Configuration" title="Direct link to Basic Configuration">​</a></h4>
<p>Add in <code>hdfs-site.xml</code> or <code>core-site.xml</code>:</p>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- Curvine FileSystem implementation --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">fs.cv.impl</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">io.curvine.CurvineFileSystem</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- Single cluster configuration --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">fs.cv.master_addrs</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">master1:8995,master2:8995,master3:8995</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="multi-cluster-support">Multi-cluster Support<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#multi-cluster-support" class="hash-link" aria-label="Direct link to Multi-cluster Support" title="Direct link to Multi-cluster Support">​</a></h4>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- Cluster 1: Production environment --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">fs.cv.production.master_addrs</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">prod-master1:8995,prod-master2:8995,prod-master3:8995</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- Cluster 2: Development environment --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">fs.cv.development.master_addrs</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">dev-master1:8995,dev-master2:8995</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- Cluster 3: Machine learning dedicated cluster --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">fs.cv.ml-cluster.master_addrs</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">ml-master1:8995,ml-master2:8995,ml-master3:8995</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-ufs-transparent-proxy">🔄 UFS Transparent Proxy<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#-ufs-transparent-proxy" class="hash-link" aria-label="Direct link to 🔄 UFS Transparent Proxy" title="Direct link to 🔄 UFS Transparent Proxy">​</a></h3>
<p>To better support existing Java applications to seamlessly access Curvine cache, we provide a UFS transparent proxy solution. The core advantage of this solution is <strong>zero code modification</strong>, allowing existing applications to immediately enjoy the cache acceleration effects of Curvine.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="-core-features-of-transparent-proxy">✨ Core Features of Transparent Proxy<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#-core-features-of-transparent-proxy" class="hash-link" aria-label="Direct link to ✨ Core Features of Transparent Proxy" title="Direct link to ✨ Core Features of Transparent Proxy">​</a></h4>
<ul>
<li><strong>🚫 Zero code modification</strong>: Preserves all original interfaces unchanged, no business code modifications required</li>
<li><strong>🔍 Intelligent path recognition</strong>: Only determines whether the path has been mounted to Curvine when opening a file</li>
<li><strong>⚡ Automatic cache acceleration</strong>: Automatically enables cache acceleration for mounted paths, native S3 access for unmounted paths</li>
<li><strong>🔄 Smooth switching</strong>: Supports dynamically switching whether to use cache at runtime without restarting the application</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="️-configuration-method">🛠️ Configuration Method<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#%EF%B8%8F-configuration-method" class="hash-link" aria-label="Direct link to 🛠️ Configuration Method" title="Direct link to 🛠️ Configuration Method">​</a></h4>
<p>Simply replace the S3FileSystem implementation class in Hadoop configuration:</p>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- Traditional S3 access configuration --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">&lt;!--</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    &lt;name&gt;fs.s3a.impl&lt;/name&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    &lt;value&gt;org.apache.hadoop.fs.s3a.S3AFileSystem&lt;/value&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;/property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- Replace with Curvine transparent proxy --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">fs.s3a.impl</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">io.curvine.S3AProxyFileSystem</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">fs.cv.impl</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">io.curvine.CurvineFileSystem</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- Curvine cluster configuration --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">fs.curvine.master_addrs</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">master1:8995,master2:8995,master3:8995</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="-working-principle">🔧 Working Principle<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#-working-principle" class="hash-link" aria-label="Direct link to 🔧 Working Principle" title="Direct link to 🔧 Working Principle">​</a></h4>
<div class="language-mermaid codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-mermaid codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sequenceDiagram</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    participant App as Java Application</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    participant Proxy as S3AProxyFileSystem</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    participant Curvine as Curvine Cluster</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    participant S3 as Native S3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    App-&gt;&gt;Proxy: Open file(s3a://bucket/data/file.parquet)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Proxy-&gt;&gt;Curvine: Query path mount status</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    alt Path is mounted</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Curvine--&gt;&gt;Proxy: Return cv://path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Proxy-&gt;&gt;Curvine: Access with cache</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Curvine--&gt;&gt;App: Return data at high speed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    else Path is not mounted</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Curvine--&gt;&gt;Proxy: Path not mounted</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Proxy-&gt;&gt;S3: Use native S3 access</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        S3--&gt;&gt;App: Return data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    end</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="-usage-example">🚀 Usage Example<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#-usage-example" class="hash-link" aria-label="Direct link to 🚀 Usage Example" title="Direct link to 🚀 Usage Example">​</a></h4>
<p><strong>No need to modify any business code, original code directly enjoys acceleration:</strong></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Business code remains completely unchanged!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Configuration conf = new Configuration();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FileSystem fs = FileSystem.get(URI.create("s3a://my-bucket/"), conf);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// If this path is mounted to Curvine, automatically enjoy cache acceleration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FSDataInputStream input = fs.open(new Path("s3a://my-bucket/warehouse/data.parquet"));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// If this path is not mounted, use native S3 access</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FSDataInputStream input2 = fs.open(new Path("s3a://my-bucket/archive/old-data.parquet"));</span><br></span></code></pre></div></div>
<p><strong>Spark/MapReduce code example:</strong></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Spark code does not need any modification</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Dataset&lt;Row&gt; df = spark.read()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .option("header", "true")</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // If /warehouse/ path is mounted, automatically use cache acceleration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .csv("s3a://data-lake/warehouse/customer_data/");</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">df.groupBy("region")</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .agg(sum("revenue").alias("total_revenue"))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .orderBy(desc("total_revenue"))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .show(20);</span><br></span></code></pre></div></div>
<p><strong>Python PySpark example:</strong></p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Python code also does not need modification</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> pyspark</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sql </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> SparkSession</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> pyspark</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sql</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">functions </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token builtin">sum</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> desc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spark </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> SparkSession</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">builder</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">appName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"TransparentCache"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">getOrCreate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Automatically determine whether to use cache</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">df </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> spark</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">read \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">option</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"header"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"true"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">csv</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"s3a://data-lake/analytics/events/"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> df</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">groupBy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"event_type"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">agg</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">sum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"count"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">alias</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"total_events"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">orderBy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">desc</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"total_events"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">show</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="apache-spark-optimization-configuration">Apache Spark Optimization Configuration<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#apache-spark-optimization-configuration" class="hash-link" aria-label="Direct link to Apache Spark Optimization Configuration" title="Direct link to Apache Spark Optimization Configuration">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Spark application startup configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spark-submit \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --class com.example.SparkApp \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --master yarn \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --deploy-mode cluster \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --conf spark.hadoop.fs.cv.impl=io.curvine.CurvineFileSystem \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --conf spark.hadoop.fs.cv.master_addrs=master1:8995,master2:8995,master3:8995 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --conf spark.sql.adaptive.enabled=true \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --jars curvine-hadoop-client.jar \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  app.jar</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="spark-code-example">Spark Code Example<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#spark-code-example" class="hash-link" aria-label="Direct link to Spark Code Example" title="Direct link to Spark Code Example">​</a></h4>
<div class="language-scala codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-scala codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Scala example</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">val spark = SparkSession.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .appName("Curvine Demo")</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .config("spark.hadoop.fs.cv.impl", "io.curvine.CurvineFileSystem")</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .getOrCreate()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Directly use cv:// protocol to access cached data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">val df = spark.read</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .option("multiline", "true")</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .json("cv://production/warehouse/events/2024/01/01/")</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">df.groupBy("event_type")</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .count()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .show()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Multi-cluster access</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">val prodData = spark.read.parquet("cv://production/warehouse/sales/")</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">val mlData = spark.read.parquet("cv://ml-cluster/features/user_profiles/")</span><br></span></code></pre></div></div>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Python example</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> pyspark</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sql </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> SparkSession</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spark </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> SparkSession</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">builder \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">appName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Curvine Python Demo"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"spark.hadoop.fs.cv.impl"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"io.curvine.CurvineFileSystem"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"spark.hadoop.fs.cv.master_addrs"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"master1:8995,master2:8995"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">getOrCreate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Read data from cache</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">df </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> spark</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">read</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">option</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"header"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"true"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">csv</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"cv://warehouse/customer_data/"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Complex queries automatically enjoy cache acceleration</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> df</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">groupBy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"region"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">agg</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">"revenue"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"sum"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"orders"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"count"</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">orderBy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"sum(revenue)"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ascending</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">show</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">20</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="trinopresto-plugin-integration">Trino/Presto Plugin Integration<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#trinopresto-plugin-integration" class="hash-link" aria-label="Direct link to Trino/Presto Plugin Integration" title="Direct link to Trino/Presto Plugin Integration">​</a></h3>
<p>Curvine provides an intelligent path replacement plugin, which can achieve non-invasive cache acceleration without requiring business code modifications, achieving completely transparent cache acceleration:</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="plugin-workflow">Plugin Workflow<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#plugin-workflow" class="hash-link" aria-label="Direct link to Plugin Workflow" title="Direct link to Plugin Workflow">​</a></h4>
<div class="language-mermaid codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-mermaid codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sequenceDiagram</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    participant User as User</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    participant Trino as Trino Engine</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    participant Plugin as Curvine Plugin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    participant Master as Curvine Master</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    participant Storage as Underlying Storage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    User-&gt;&gt;Trino: SELECT * FROM table</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Trino-&gt;&gt;Plugin: Parse SQL, extract path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Plugin-&gt;&gt;Master: Query path mount status</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Master--&gt;&gt;Plugin: Return mount information</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Plugin-&gt;&gt;Plugin: Decide whether to rewrite path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Plugin--&gt;&gt;Trino: Return rewritten path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Trino-&gt;&gt;Storage: Access data using cv:// protocol</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Storage--&gt;&gt;User: Return query results</span><br></span></code></pre></div></div>
<p>Spark plugin usage example:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">spark-submit \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--class main.scala.Tpch \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--name tpch_demo \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--conf spark.hadoop.fs.cv.impl=io.curvine.CurvineFileSystem \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--conf spark.hadoop.fs.cv.default.master_addrs=master1:8995,master2:8995 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--conf spark.sql.extensions=io.curvine.spark.CurvineSparkExtension \</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="flink-real-time-computing-integration">Flink Real-time Computing Integration<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#flink-real-time-computing-integration" class="hash-link" aria-label="Direct link to Flink Real-time Computing Integration" title="Direct link to Flink Real-time Computing Integration">​</a></h3>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Flink Table API integration example</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TableEnvironment tableEnv = TableEnvironment.create(settings);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Configure Curvine FileSystem</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Configuration config = new Configuration();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">config.setString("fs.cv.impl", "io.curvine.CurvineFileSystem");</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">config.setString("fs.cv.master_addrs", "master1:8995,master2:8995");</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Create Curvine table</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tableEnv.executeSql(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "CREATE TABLE user_events (" +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "  user_id BIGINT," +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "  event_type STRING," +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "  timestamp_ms BIGINT," +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "  properties MAP&lt;STRING, STRING&gt;" +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ") WITH (" +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "  'connector' = 'filesystem'," +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "  'path' = 'cv://streaming/events/'," +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "  'format' = 'json'" +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ")"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Real-time query enjoys cache acceleration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Table result = tableEnv.sqlQuery(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "SELECT user_id, COUNT(*) as event_count " +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "FROM user_events " +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "WHERE timestamp_ms &gt; UNIX_TIMESTAMP() * 1000 - 3600000 " +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "GROUP BY user_id"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span></code></pre></div></div>
<hr>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-best-practices">💡 Best Practices<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#-best-practices" class="hash-link" aria-label="Direct link to 💡 Best Practices" title="Direct link to 💡 Best Practices">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-mounting-strategy-best-practices">🎯 Mounting Strategy Best Practices<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#-mounting-strategy-best-practices" class="hash-link" aria-label="Direct link to 🎯 Mounting Strategy Best Practices" title="Direct link to 🎯 Mounting Strategy Best Practices">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="tiered-mounting-by-business-scenarios">Tiered Mounting by Business Scenarios<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#tiered-mounting-by-business-scenarios" class="hash-link" aria-label="Direct link to Tiered Mounting by Business Scenarios" title="Direct link to Tiered Mounting by Business Scenarios">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Hot data: high-frequency access, using memory cache</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bin/cv mount s3://bucket/hot /bucket/hot \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --storage-type=mem \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --replicas=3 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --ttl-ms=1d \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --ttl-action=delete</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Warm data: regular access, using SSD cache</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bin/cv mount s3://bucket/warm /bucket/warm \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --storage-type=ssd \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --replicas=2 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --ttl-ms=7d \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --ttl-action=delete</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Cold data: low-frequency access, using disk cache</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bin/cv mount s3://bucket/cold /bucket/cold \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --storage-type=disk \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --replicas=1 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --ttl-ms=30d \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --ttl-action=delete</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="optimization-by-data-type">Optimization by Data Type<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#optimization-by-data-type" class="hash-link" aria-label="Direct link to Optimization by Data Type" title="Direct link to Optimization by Data Type">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Small file intensive (e.g., logs, configurations)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bin/cv mount s3://bucket/logs /bucket/logs \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --block-size=4MB \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --consistency-strategy=none </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Large file type (e.g., videos, models)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bin/cv mount s3://bucket/models /bucket/models \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --block-size=1GB \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --consistency-strategy=always </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Analytical data (e.g., Parquet)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bin/cv mount s3://bucket/analytics /bucket/analytics \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --block-size=128MB \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --consistency-strategy=none \</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-summary">🎯 Summary<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#-summary" class="hash-link" aria-label="Direct link to 🎯 Summary" title="Direct link to 🎯 Summary">​</a></h2>
<p>As a new generation distributed caching system, Curvine provides excellent performance improvements for modern data-intensive applications through intelligent caching strategies, strong consistency guarantees, and seamless ecosystem integration.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-core-values">🏆 Core Values<a href="https://curvineio.github.io/blog/2025/09/28/user-guide#-core-values" class="hash-link" aria-label="Direct link to 🏆 Core Values" title="Direct link to 🏆 Core Values">​</a></h3>
<ul>
<li><strong>🚀 Performance Improvement</strong>: 10-100x access acceleration, significantly reducing data access latency</li>
<li><strong>💰 Cost Optimization</strong>: Reduce cloud storage access costs, improve computing resource utilization</li>
<li><strong>🛡️ Data Security</strong>: Multiple consistency guarantees to ensure data accuracy and integrity</li>
<li><strong>🌐 Ecosystem Friendly</strong>: Seamless integration with mainstream big data and AI frameworks</li>
</ul>
<hr>
<p><em>Curvine - Make data access lightning fast ⚡</em></p>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Building a Curvine Cluster from Scratch & FIO Testing]]></title>
        <id>https://curvineio.github.io/blog/2025/08/08/fio-bench</id>
        <link href="https://curvineio.github.io/blog/2025/08/08/fio-bench"/>
        <updated>2025-08-08T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[How to quickly get started and try out Curvine's performance? This article will introduce how to build a local small cluster from scratch, allowing everyone to get hands-on experience quickly.]]></summary>
        <content type="html"><![CDATA[<p>How to quickly get started and try out Curvine's performance? This article will introduce how to build a local small cluster from scratch, allowing everyone to get hands-on experience quickly.</p>
<blockquote>
<p>GitHub: <a href="https://github.com/CurvineIO/curvine" target="_blank" rel="noopener noreferrer">https://github.com/CurvineIO/curvine</a></p>
</blockquote>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-download-the-code">1. Download the Code:<a href="https://curvineio.github.io/blog/2025/08/08/fio-bench#1-download-the-code" class="hash-link" aria-label="Direct link to 1. Download the Code:" title="Direct link to 1. Download the Code:">​</a></h2>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">git clone https://github.com/CurvineIO/curvine.git</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-environment-requirements">2. Environment Requirements:<a href="https://curvineio.github.io/blog/2025/08/08/fio-bench#2-environment-requirements" class="hash-link" aria-label="Direct link to 2. Environment Requirements:" title="Direct link to 2. Environment Requirements:">​</a></h2>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">GCC: version 10 or later </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Rust: version 1.86 or later </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Protobuf: version 3.x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Maven: version 3.8 or later</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LLVM: version 12 or later</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FUSE: libfuse2 or libfuse3 development packages</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">JDK: version 1.8 or later </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm: version 9 or later</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Python: version 3.7 or later </span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-compile--run">3. Compile &amp; Run<a href="https://curvineio.github.io/blog/2025/08/08/fio-bench#3-compile--run" class="hash-link" aria-label="Direct link to 3. Compile &amp; Run" title="Direct link to 3. Compile &amp; Run">​</a></h2>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">make all</span><br></span></code></pre></div></div>
<p>To facilitate compilation, our build script will check dependencies in advance. For macOS users, we will temporarily skip FUSE compilation (currently not adapted for macOS). Interested users can consider using the <code>macfuse</code> project for adaptation.</p>
<p><img decoding="async" loading="lazy" alt="make-checkenv" src="https://curvineio.github.io/assets/images/make-checkenv-f5dbd19e6cb852ce3b7bcecf4a6be804.png" width="1080" height="692" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-after-compilation-start-local-cluster">4. After Compilation, Start Local Cluster<a href="https://curvineio.github.io/blog/2025/08/08/fio-bench#4-after-compilation-start-local-cluster" class="hash-link" aria-label="Direct link to 4. After Compilation, Start Local Cluster" title="Direct link to 4. After Compilation, Start Local Cluster">​</a></h2>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd build/dist</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./bin/restart-all.sh</span><br></span></code></pre></div></div>
<p>After successful startup, execute the report command to check if it's working:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bin/cv report</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       active_master: localhost:8995</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       journal_nodes: 1,localhost:8996</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            capacity: 233.5GB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           available: 105.0GB (44.99%)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             fs_used: 0.0B (0.00%)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         non_fs_used: 128.4GB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     live_worker_num: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     lost_worker_num: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           inode_num: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           block_num: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    live_worker_list: 192.168.xxx.xxx:8997,105.0GB/233.5GB (44.99%)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    lost_worker_list:</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="5-view-local-master-and-worker-webui">5. View Local Master and Worker WebUI<a href="https://curvineio.github.io/blog/2025/08/08/fio-bench#5-view-local-master-and-worker-webui" class="hash-link" aria-label="Direct link to 5. View Local Master and Worker WebUI" title="Direct link to 5. View Local Master and Worker WebUI">​</a></h2>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">http://localhost:9000/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">http://localhost:9001/</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" alt="webui" src="https://curvineio.github.io/assets/images/webui-99651178199aa9d72a8134fbccfd482e.png" width="1080" height="479" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="6-fio-testing">6. FIO Testing<a href="https://curvineio.github.io/blog/2025/08/08/fio-bench#6-fio-testing" class="hash-link" aria-label="Direct link to 6. FIO Testing" title="Direct link to 6. FIO Testing">​</a></h2>
<p>Test Environment: Alibaba Cloud <code>ecs.r8a.8xlarge</code> instance with one master/worker/client each</p>
<ul>
<li>32 cores (vCPU)</li>
<li>256 GiB memory</li>
<li>System disk and data disk both: ESSD cloud disk 500 GiB (7800 IOPS)</li>
<li>Maximum bandwidth: 25Gb</li>
</ul>
<p>Prepare data (on worker machine):</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">bin/curvine-bench.sh fuse.write</span><br></span></code></pre></div></div>
<p><strong>FIO Sequential Read Test, 8 Concurrent Jobs</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">fio -iodepth=1 -rw=read -ioengine=libaio -bs=256k</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> -group_reporting -size=200gb </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> -filename=/curvine-fuse/fs-bench/0  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> -name=read_test --readonly -direct=1 --runtime=60 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> -numjobs=8</span><br></span></code></pre></div></div>
<p><strong>FIO Random Read Test, 8 Concurrent Jobs</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fio -iodepth=1 -rw=randread -ioengine=libaio -bs=256k</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> -group_reporting -size=200gb </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> -filename=/curvine-fuse/fs-bench/0  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> -name=read_test --readonly -direct=1 --runtime=60</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> -numjobs=8</span><br></span></code></pre></div></div>
<p>Finally, here's a video demonstration of the FIO testing results:</p>]]></content>
        <author>
            <name>David</name>
            <uri>https://curvine.io</uri>
        </author>
        <category label="benchmark" term="benchmark"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Curvine: High-Performance Distributed Cache——DataFun Intelligent Conference]]></title>
        <id>https://curvineio.github.io/blog/2025/07/25/datafun-conference</id>
        <link href="https://curvineio.github.io/blog/2025/07/25/datafun-conference"/>
        <updated>2025-07-25T00:00:00.000Z</updated>
        <content type="html"><![CDATA[<div style="text-align:center"><img src="https://curvineio.github.io/assets/images/page1-912612ed651048729fa4b448bab3b5f1.png" alt="page1" style="width:100%;max-width:800px"></div>
<div style="text-align:center"><img src="https://curvineio.github.io/assets/images/page2-a7ddc73d802a201dc601a72dbd287816.png" alt="page2" style="width:100%;max-width:800px"></div>
<div style="text-align:center"><img src="https://curvineio.github.io/assets/images/page3-611b160328efcb266a5701e6ac019b85.png" alt="page3" style="width:100%;max-width:800px"></div>
<div style="text-align:center"><img src="https://curvineio.github.io/assets/images/page4-61f192ed965aeb23cba081f116e23d1e.png" alt="page4" style="width:100%;max-width:800px"></div>
<div style="text-align:center"><img src="https://curvineio.github.io/assets/images/page5-4f78f429a8655773a0a12f1539f141e5.png" alt="page5" style="width:100%;max-width:800px"></div>
<div style="text-align:center"><img src="https://curvineio.github.io/assets/images/page6-9183dd3ca76b5388cc5ecc79d046aad5.png" alt="page6" style="width:100%;max-width:800px"></div>
<div style="text-align:center"><img src="https://curvineio.github.io/assets/images/page7-b3f9771510dcedff83141aeb3caed1c4.png" alt="page7" style="width:100%;max-width:800px"></div>
<div style="text-align:center"><img src="https://curvineio.github.io/assets/images/page8-5393f9d2a2f092f8a172e349c4ac11fc.png" alt="page8" style="width:100%;max-width:800px"></div>
<div style="text-align:center"><img src="https://curvineio.github.io/assets/images/page9-b69465dda0612a817a88bb622636c094.png" alt="page9" style="width:100%;max-width:800px"></div>
<div style="text-align:center"><img src="https://curvineio.github.io/assets/images/page10-ee025d1b2093cddefaecd1312304824f.png" alt="page10" style="width:100%;max-width:800px"></div>
<div style="text-align:center"><img src="https://curvineio.github.io/assets/images/page11-2ced0189de014cbaa5b9adfd0c208ceb.png" alt="page11" style="width:100%;max-width:800px"></div>
<div style="text-align:center"><img src="https://curvineio.github.io/assets/images/page12-d3f1722949f4bc3874cbf98b4dd2d597.png" alt="page12" style="width:100%;max-width:800px"></div>
<div style="text-align:center"><img src="https://curvineio.github.io/assets/images/page13-8863c5fc8748a8b9e7f20e88c74aec4d.png" alt="page13" style="width:100%;max-width:800px"></div>
<div style="text-align:center"><img src="https://curvineio.github.io/assets/images/page14-50fbc590fec04a9fb605b25bf13d320f.png" alt="page14" style="width:100%;max-width:800px"></div>
<div style="text-align:center"><img src="https://curvineio.github.io/assets/images/page15-1968f523aa5566ee0d98c2a718d5f645.png" alt="page15" style="width:100%;max-width:800px"></div>
<div style="text-align:center"><img src="https://curvineio.github.io/assets/images/page16-b8594c0cbabadccad225f1ae2f193fb9.png" alt="page16" style="width:100%;max-width:800px"></div>
<div style="text-align:center"><img src="https://curvineio.github.io/assets/images/page17-93ab759298cc1c5716e63bd18f782eb9.png" alt="page17" style="width:100%;max-width:800px"></div>
<div style="text-align:center"><img src="https://curvineio.github.io/assets/images/page18-bf503a945154dcfe2cabf6712058d27e.png" alt="page18" style="width:100%;max-width:800px"></div>
<div style="text-align:center"><img src="https://curvineio.github.io/assets/images/page19-2a49019ab98180989195d2a52689afff.png" alt="page19" style="width:100%;max-width:800px"></div>
<div style="text-align:center"><img src="https://curvineio.github.io/assets/images/page20-4dea66f210914537626b26f5c46f8cf6.png" alt="page20" style="width:100%;max-width:800px"></div>]]></content>
        <author>
            <name>David</name>
            <uri>https://curvine.io</uri>
        </author>
        <category label="teams" term="teams"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[what-is-curvine]]></title>
        <id>https://curvineio.github.io/blog/2025/07/15/what-is-curvine</id>
        <link href="https://curvineio.github.io/blog/2025/07/15/what-is-curvine"/>
        <updated>2025-07-15T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[What is Curvine]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-curvine">What is Curvine<a href="https://curvineio.github.io/blog/2025/07/15/what-is-curvine#what-is-curvine" class="hash-link" aria-label="Direct link to What is Curvine" title="Direct link to What is Curvine">​</a></h2>
<p> Curvine is a distributed caching system implemented in Rust, featuring high concurrency, high throughput, low latency, and low resource consumption. Unlike KV caches like Redis or TiKV, Curvine exclusively provides file caching capabilities. It is not a storage system but rather a caching layer - data persistence still relies on underlying file systems or object storage systems for support.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-problem-does-it-solve">What problem does it solve<a href="https://curvineio.github.io/blog/2025/07/15/what-is-curvine#what-problem-does-it-solve" class="hash-link" aria-label="Direct link to What problem does it solve" title="Direct link to What problem does it solve">​</a></h2>
<ol>
<li>Large-scale Data I/O Performance Bottlenecks;</li>
<li>Single-Machine Cache Capacity Limitations.</li>
</ol>
<p> In practical applications, what scenarios are suitable for Curvine acceleration?</p>
<div style="text-align:center"><img src="https://curvineio.github.io/assets/images/Curvine-application-d648229ff01cab5c013e96616f9c4e1a.png" alt="Curvine Application Scenarios." style="width:80%;max-width:800px"><p style="font-size:0.8em;color:#666;margin-top:8px"></p><p><b>Fig. 1</b>：Curvine Application Scenarios.</p><p></p></div>
<p> As shown in the figure above, Curvine is designed for the following five core scenarios:</p>
<ol>
<li>Accelerating intermediate data processing in big data shuffle operations</li>
<li>Caching hot table data for faster big data analytics</li>
<li>Boosting AI training efficiency through dataset caching</li>
<li>Accelerating model file distribution via caching layer</li>
<li>Cross-cloud data caching to mitigate performance bottlenecks of dedicated cloud connections</li>
</ol>
<p> These use cases are just the beginning. In simple terms, Curvine fundamentally addresses: The growing conflict between escalating computational demands and the I/O bottlenecks of distributed cache systems.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="performance">Performance<a href="https://curvineio.github.io/blog/2025/07/15/what-is-curvine#performance" class="hash-link" aria-label="Direct link to Performance" title="Direct link to Performance">​</a></h2>
<p> We demonstrate performance and resource utilization from the following aspects:​</p>
<p><strong>1. Metadata operation performance</strong></p>
<table><thead><tr style="background-color:#2ecc71;color:white"><th>Operation Type</th><th>Curvine (QPS)</th><th>Juicefs (QPS)</th><th>oss (QPS)</th></tr></thead><tbody><tr><td>create</td><td style="text-align:right">19,985</td><td style="text-align:right">16,000</td><td style="text-align:right">2,000</td></tr><tr><td>open</td><td style="text-align:right">60,376</td><td style="text-align:right">50,000</td><td style="text-align:right">3,900</td></tr><tr><td>rename</td><td style="text-align:right">43,009</td><td style="text-align:right">21,000</td><td style="text-align:right">200</td></tr><tr><td>delete</td><td style="text-align:right">39,013</td><td style="text-align:right">41,000</td><td style="text-align:right">1,900</td></tr></tbody></table>
<p> <strong>Note</strong>: All benchmark comparisons were conducted with a concurrency level of 40.</p>
<p> <strong>Detailed results</strong>: <a href="https://curvineio.github.io/docs/Benchmark/meta/" target="_blank" rel="noopener noreferrer">https://curvineio.github.io/docs/Benchmark/meta/</a></p>
<p> <strong>Industry benchmark test data of comparable products</strong>: <a href="https://juicefs.com/zh-cn/blog/engineering/meta-perf-hdfs-oss-jfs" target="_blank" rel="noopener noreferrer">https://juicefs.com/zh-cn/blog/engineering/meta-perf-hdfs-oss-jfs</a></p>
<p><strong>2. Data Read/Write Performance</strong></p>
<p> Benchmarking Alluxio performance under identical hardware conditions:</p>
<p>● 256K sequential read</p>
<table style="width:100%;border-collapse:collapse"><thead><tr style="background-color:#2ecc71;color:white"><th>Thread count</th><th>Curvine Open Source Edition (GiB/s)</th><th>Throughput of Open Source Alluxio (GiB/s)</th></tr></thead><tbody><tr style="border-bottom:1px solid #e1e4e8"><td style="text-align:right">1</td><td style="text-align:right">2.2</td><td style="text-align:right">0.6</td></tr><tr style="border-bottom:1px solid #e1e4e8"><td style="text-align:right">2</td><td style="text-align:right">3.7</td><td style="text-align:right">1.1</td></tr><tr style="border-bottom:1px solid #e1e4e8"><td style="text-align:right">4</td><td style="text-align:right">6.8</td><td style="text-align:right">2.3</td></tr><tr style="border-bottom:1px solid #e1e4e8"><td style="text-align:right">8</td><td style="text-align:right">8.9</td><td style="text-align:right">4.5</td></tr><tr style="border-bottom:1px solid #e1e4e8"><td style="text-align:right">16</td><td style="text-align:right">9.2</td><td style="text-align:right">7.9</td></tr><tr style="border-bottom:1px solid #e1e4e8"><td style="text-align:right">32</td><td style="text-align:right">9.5</td><td style="text-align:right">8.8</td></tr><tr style="border-bottom:1px solid #e1e4e8"><td style="text-align:right">64</td><td style="text-align:right">9.2</td><td style="text-align:right">N/A</td></tr><tr style="border-bottom:1px solid #e1e4e8"><td style="text-align:right">128</td><td style="text-align:right">9.2</td><td style="text-align:right">N/A</td></tr></tbody></table>
<p>● 256K random read</p>
<table style="width:100%;border-collapse:collapse"><thead><tr style="background-color:#2ecc71;color:white"><th>Thread count</th><th>Curvine Open Source Edition (GiB/s)</th><th>Throughput of Open Source Alluxio (GiB/s)</th></tr></thead><tbody><tr style="border-bottom:1px solid #e1e4e8"><td style="text-align:right">1</td><td style="text-align:right">0.3</td><td style="text-align:right">0.0</td></tr><tr style="border-bottom:1px solid #e1e4e8"><td style="text-align:right">2</td><td style="text-align:right">0.7</td><td style="text-align:right">0.1</td></tr><tr style="border-bottom:1px solid #e1e4e8"><td style="text-align:right">4</td><td style="text-align:right">1.4</td><td style="text-align:right">0.1</td></tr><tr style="border-bottom:1px solid #e1e4e8"><td style="text-align:right">8</td><td style="text-align:right">2.8</td><td style="text-align:right">0.2</td></tr><tr style="border-bottom:1px solid #e1e4e8"><td style="text-align:right">16</td><td style="text-align:right">5.2</td><td style="text-align:right">0.4</td></tr><tr style="border-bottom:1px solid #e1e4e8"><td style="text-align:right">32</td><td style="text-align:right">7.8</td><td style="text-align:right">0.3</td></tr><tr style="border-bottom:1px solid #e1e4e8"><td style="text-align:right">64</td><td style="text-align:right">8.7</td><td style="text-align:right">N/A</td></tr><tr style="border-bottom:1px solid #e1e4e8"><td style="text-align:right">128</td><td style="text-align:right">9.0</td><td style="text-align:right">N/A</td></tr></tbody></table>
<p>  Data disclosure from Alluxio official website: <a href="https://www.alluxio.com.cn/alluxio-enterprise-vs-open-source/" target="_blank" rel="noopener noreferrer">https://www.alluxio.com.cn/alluxio-enterprise-vs-open-source/</a>.</p>
<p><strong>3. Resource consumption</strong></p>
<p>  Thanks to Rust's language features, in the big data shuffle acceleration scenario, our comparison of online resource consumption between Curvine and Alluxio shows a ​90%+ reduction in memory usage​ and ​50%+ reduction in CPU usage.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="architecture-overview">Architecture Overview<a href="https://curvineio.github.io/blog/2025/07/15/what-is-curvine#architecture-overview" class="hash-link" aria-label="Direct link to Architecture Overview" title="Direct link to Architecture Overview">​</a></h2>
<p>  Curvine's architectural design philosophy: Simplicity, Excellence, and Universality.</p>
<div style="text-align:center"><img src="https://curvineio.github.io/assets/images/Curvine-architechure-ed8e3e75a50ee79638f22550d895668a.png" alt="Curvine Architecture Diagram." style="width:80%;max-width:800px"><p style="font-size:0.8em;color:#666;margin-top:8px"></p><p><b>Fig. 2</b>：Curvine Application Scenarios.</p><p></p></div>
<p> <strong>Simplicity</strong>: Lightweight design with only two roles in the caching service: master and worker. For non-performance-critical modules, maximize reuse of open-source or existing technologies, ensuring minimal code complexity.</p>
<p> <strong>Excellence</strong>: Key performance-impacting components (e.g., underlying RPC communication framework, Fuse implementation) are independently designed and optimized with a performance-first mindset.</p>
<p> <strong>Generality</strong>: Compatible with multiple existing access modes. The underlying storage supports mainstream distributed file and object storage systems, ensuring versatility and ease of use.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="on-open-source">On Open-Source<a href="https://curvineio.github.io/blog/2025/07/15/what-is-curvine#on-open-source" class="hash-link" aria-label="Direct link to On Open-Source" title="Direct link to On Open-Source">​</a></h2>
<p> We have achieved significant performance gains by deploying Curvine in high-concurrency, high-throughput big data scenarios internally. Now, we aim to collaborate with external partners to co-build this solution and collectively accelerate the infrastructure transition to Rust.</p>
<p> <a href="https://github.com/curvineio/curvine" target="_blank" rel="noopener noreferrer">https://github.com/curvineio/curvine</a></p>
<p> Powered by OPPO Bigdata.</p>]]></content>
        <author>
            <name>David</name>
            <uri>https://curvine.io</uri>
        </author>
        <category label="teams" term="teams"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Curvine Caching now comming!]]></title>
        <id>https://curvineio.github.io/blog/welcome</id>
        <link href="https://curvineio.github.io/blog/welcome"/>
        <updated>2025-05-29T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Curvine is a high-performance distributed caching system implemented in Rust, designed for low-latency and high-throughput workloads with powerful data governance capabilities.]]></summary>
        <content type="html"><![CDATA[<p>Curvine is a high-performance distributed caching system implemented in Rust, designed for low-latency and high-throughput workloads with powerful data governance capabilities.</p>]]></content>
        <author>
            <name>Barry</name>
            <uri>https://curvine.io</uri>
        </author>
        <author>
            <name>David</name>
            <uri>https://curvine.io</uri>
        </author>
        <category label="teams" term="teams"/>
    </entry>
</feed>