<?xml version="1.0" encoding="utf-8"?><?xml-stylesheet type="text/xsl" href="atom.xsl"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://curvineio.github.io/zh-cn/blog</id>
    <title>Curvine Blog</title>
    <updated>2025-11-27T00:00:00.000Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://curvineio.github.io/zh-cn/blog"/>
    <subtitle>Curvine Blog</subtitle>
    <icon>https://curvineio.github.io/zh-cn/img/curvine_logo.ico</icon>
    <entry>
        <title type="html"><![CDATA[Curvine 可观测性建设]]></title>
        <id>https://curvineio.github.io/zh-cn/blog/2025/11/27/observability</id>
        <link href="https://curvineio.github.io/zh-cn/blog/2025/11/27/observability"/>
        <updated>2025-11-27T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Curvine 作为一款高性能分布式缓存系统，对性能、稳定性和可靠性有着严苛的要求。]]></summary>
        <content type="html"><![CDATA[<p>Curvine 作为一款高性能分布式缓存系统，对性能、稳定性和可靠性有着严苛的要求。
为确保系统在各种负载条件下保持最优性能，并快速定位和解决潜在问题，我们构建了基于 Prometheus 和 Grafana 的全方位监控解决方案。该监控体系为 Master 节点、Worker 节点、Fuse 节点和 S3 Gateway 提供深度可观测性能力，通过收集各组件的关键指标，实现对缓存集群规模、运行状态、性能表现和资源使用情况的实时监控。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="监控架构">监控架构<a href="https://curvineio.github.io/zh-cn/blog/2025/11/27/observability#%E7%9B%91%E6%8E%A7%E6%9E%B6%E6%9E%84" class="hash-link" aria-label="监控架构的直接链接" title="监控架构的直接链接">​</a></h2>
<p>本监控系统采用以下核心组件：</p>
<ul>
<li><strong>Prometheus</strong>: 负责指标收集、存储和查询</li>
<li><strong>Grafana</strong>: 提供数据可视化和仪表板展示</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="可观测性指标">可观测性指标<a href="https://curvineio.github.io/zh-cn/blog/2025/11/27/observability#%E5%8F%AF%E8%A7%82%E6%B5%8B%E6%80%A7%E6%8C%87%E6%A0%87" class="hash-link" aria-label="可观测性指标的直接链接" title="可观测性指标的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="master-节点指标">Master 节点指标<a href="https://curvineio.github.io/zh-cn/blog/2025/11/27/observability#master-%E8%8A%82%E7%82%B9%E6%8C%87%E6%A0%87" class="hash-link" aria-label="Master 节点指标的直接链接" title="Master 节点指标的直接链接">​</a></h3>
<p>Master 节点作为集群的元数据管理中心，提供以下关键指标：</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="容量指标">容量指标<a href="https://curvineio.github.io/zh-cn/blog/2025/11/27/observability#%E5%AE%B9%E9%87%8F%E6%8C%87%E6%A0%87" class="hash-link" aria-label="容量指标的直接链接" title="容量指标的直接链接">​</a></h4>
<p>容量指标是评估系统存储资源使用状况的基础，对容量规划、资源优化和预防性维护至关重要。通过监控这些指标，可以及时发现存储瓶颈，预测容量需求，确保系统有足够空间应对业务增长。</p>
<p><img decoding="async" loading="lazy" alt="容量指标" src="https://curvineio.github.io/zh-cn/assets/images/1-077a749f26cfbb75badd1d58ebf61bb0.png" width="864" height="428" class="img_ev3q"></p>
<table><thead><tr><th>指标名称</th><th>描述</th></tr></thead><tbody><tr><td>inode_dir_num</td><td>目录数量</td></tr><tr><td>inode_file_num</td><td>文件数量</td></tr><tr><td>num_blocks</td><td>block 总数</td></tr><tr><td>blocks_size_avg</td><td>block 平均大小</td></tr><tr><td>capacity</td><td>总存储容量</td></tr><tr><td>available</td><td>可用存储空间</td></tr><tr><td>fs_used</td><td>文件系统已用空间</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="资源指标">资源指标<a href="https://curvineio.github.io/zh-cn/blog/2025/11/27/observability#%E8%B5%84%E6%BA%90%E6%8C%87%E6%A0%87" class="hash-link" aria-label="资源指标的直接链接" title="资源指标的直接链接">​</a></h4>
<p>资源指标反映了系统对计算资源的使用情况，对性能调优、资源分配和故障预防具有重要意义。内存使用情况直接影响系统性能和稳定性，特别是 RocksDB 作为核心存储引擎，其内存占用需要精确监控以避免内存溢出和性能下降。</p>
<p><img decoding="async" loading="lazy" alt="资源指标" src="https://curvineio.github.io/zh-cn/assets/images/2-9f034222e7c2428bd8f17a52a86490b0.png" width="662" height="385" class="img_ev3q"></p>
<table><thead><tr><th>指标名称</th><th>描述</th></tr></thead><tbody><tr><td>used_memory_bytes</td><td>已用内存字节数</td></tr><tr><td>rocksdb_used_memory_bytes</td><td>rocksdb 内存占用</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="集群状态指标">集群状态指标<a href="https://curvineio.github.io/zh-cn/blog/2025/11/27/observability#%E9%9B%86%E7%BE%A4%E7%8A%B6%E6%80%81%E6%8C%87%E6%A0%87" class="hash-link" aria-label="集群状态指标的直接链接" title="集群状态指标的直接链接">​</a></h4>
<p>集群状态指标提供了系统整体健康状况的实时视图，对保障高可用性和数据一致性至关重要。通过监控 Worker 节点状态和复制任务执行情况，可以快速发现节点故障、数据不一致等问题，确保分布式缓存系统的可靠运行。</p>
<p><img decoding="async" loading="lazy" alt="集群状态" src="https://curvineio.github.io/zh-cn/assets/images/3-96e8a3a57a8c6e1388978ce54ca765de.png" width="393" height="340" class="img_ev3q"></p>
<table><thead><tr><th>指标名称</th><th>描述</th></tr></thead><tbody><tr><td>worker_num</td><td>worker 数量（按状态分类）</td></tr><tr><td>replication_staging_number</td><td>等待复制的块数量</td></tr><tr><td>replication_inflight_number</td><td>正在进行复制的块数量</td></tr><tr><td>replication_failure_count</td><td>累计复制失败的总次数</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="性能指标">性能指标<a href="https://curvineio.github.io/zh-cn/blog/2025/11/27/observability#%E6%80%A7%E8%83%BD%E6%8C%87%E6%A0%87" class="hash-link" aria-label="性能指标的直接链接" title="性能指标的直接链接">​</a></h4>
<p>性能指标是衡量系统响应能力和处理效率的核心指标，对性能优化和容量规划具有关键作用。RPC 请求的总计数和总耗时可以计算出平均响应时间，直接反映系统的处理能力，而各类操作的耗时分析有助于识别性能瓶颈，指导系统优化。</p>
<p><img decoding="async" loading="lazy" alt="性能指标" src="https://curvineio.github.io/zh-cn/assets/images/4-1f0b071455311caac7e1d80d77ff8131.png" width="1185" height="494" class="img_ev3q"></p>
<table><thead><tr><th>指标名称</th><th>描述</th></tr></thead><tbody><tr><td>rpc_request_total_count</td><td>RPC 总请求计数</td></tr><tr><td>rpc_request_total_time</td><td>RPC 总请求时间</td></tr><tr><td>operation_duration</td><td>操作耗时（按类型分类，不包括心跳）</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="journal-系统指标">Journal 系统指标<a href="https://curvineio.github.io/zh-cn/blog/2025/11/27/observability#journal-%E7%B3%BB%E7%BB%9F%E6%8C%87%E6%A0%87" class="hash-link" aria-label="Journal 系统指标的直接链接" title="Journal 系统指标的直接链接">​</a></h4>
<p>Journal 系统是保证数据一致性和故障恢复的关键组件，其性能直接影响系统的写入性能和数据可靠性。监控 Journal 队列长度和刷新性能可以及时发现写入瓶颈，预防数据丢失风险，确保系统在高并发写入场景下的稳定性。</p>
<p><img decoding="async" loading="lazy" alt="journal指标" src="https://curvineio.github.io/zh-cn/assets/images/5-7ea07d7b4e56aadaacf098b7d5b082d4.png" width="727" height="115" class="img_ev3q"></p>
<table><thead><tr><th>指标名称</th><th>描述</th></tr></thead><tbody><tr><td>journal_queue_len</td><td>Journal 队列长度</td></tr><tr><td>journal_flush_count</td><td>Journal 刷新次数</td></tr><tr><td>journal_flush_time</td><td>Journal 刷新时间</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="client-指标fuses3-gateway">Client 指标（Fuse/S3 Gateway）<a href="https://curvineio.github.io/zh-cn/blog/2025/11/27/observability#client-%E6%8C%87%E6%A0%87fuses3-gateway" class="hash-link" aria-label="Client 指标（Fuse/S3 Gateway）的直接链接" title="Client 指标（Fuse/S3 Gateway）的直接链接">​</a></h3>
<p>Fuse 和 S3 Gateway 的指标通过 Client 收集</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="缓存指标">缓存指标<a href="https://curvineio.github.io/zh-cn/blog/2025/11/27/observability#%E7%BC%93%E5%AD%98%E6%8C%87%E6%A0%87" class="hash-link" aria-label="缓存指标的直接链接" title="缓存指标的直接链接">​</a></h4>
<p>缓存指标直接反映了缓存系统的核心价值——提升访问性能。挂载缓存的命中率是衡量缓存效果的关键指标，高命中率意味着更少的后端访问和更快的响应速度。这些指标对评估缓存策略有效性、优化缓存配置至关重要。</p>
<p><img decoding="async" loading="lazy" alt="缓存指标" src="data:image/png;base64,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" width="397" height="115" class="img_ev3q"></p>
<table><thead><tr><th>指标名称</th><th>描述</th></tr></thead><tbody><tr><td>client_mount_cache_hits</td><td>挂载缓存命中数</td></tr><tr><td>client_mount_cache_misses</td><td>挂载缓存未命中数</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="io-指标">I/O 指标<a href="https://curvineio.github.io/zh-cn/blog/2025/11/27/observability#io-%E6%8C%87%E6%A0%87" class="hash-link" aria-label="I/O 指标的直接链接" title="I/O 指标的直接链接">​</a></h4>
<p>I/O 指标是评估系统读写性能的核心数据，对性能调优和容量规划具有指导意义。通过监控读写字节数和耗时，可以计算出读写吞吐量，准确评估系统的 I/O 性能瓶颈，优化存储策略，确保在高并发访问场景下的稳定性能。</p>
<p><img decoding="async" loading="lazy" alt="I/O指标" src="https://curvineio.github.io/zh-cn/assets/images/7-5ef944092b3f22e2ee1abd5fa126e668.png" width="399" height="228" class="img_ev3q"></p>
<table><thead><tr><th>指标名称</th><th>描述</th></tr></thead><tbody><tr><td>client_write_bytes</td><td>写入字节数</td></tr><tr><td>client_write_time_us</td><td>写入时间（微秒）</td></tr><tr><td>client_read_bytes</td><td>读取字节数</td></tr><tr><td>client_read_time_us</td><td>读取时间（微秒）</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="元数据操作指标">元数据操作指标<a href="https://curvineio.github.io/zh-cn/blog/2025/11/27/observability#%E5%85%83%E6%95%B0%E6%8D%AE%E6%93%8D%E4%BD%9C%E6%8C%87%E6%A0%87" class="hash-link" aria-label="元数据操作指标的直接链接" title="元数据操作指标的直接链接">​</a></h4>
<p>元数据操作性能直接影响文件系统的响应速度，对提升用户体验和系统整体性能至关重要。元数据操作的耗时分析有助于识别元数据管理瓶颈，优化目录结构，提升文件系统操作效率。</p>
<p><img decoding="async" loading="lazy" alt="元数据操作指标" src="https://curvineio.github.io/zh-cn/assets/images/8-6b70554665977d51aec86ab4c9b860a1.png" width="1196" height="224" class="img_ev3q"></p>
<table><thead><tr><th>指标名称</th><th>描述</th></tr></thead><tbody><tr><td>client_metadata_operation_duration</td><td>元数据操作耗时</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="worker-节点指标">Worker 节点指标<a href="https://curvineio.github.io/zh-cn/blog/2025/11/27/observability#worker-%E8%8A%82%E7%82%B9%E6%8C%87%E6%A0%87" class="hash-link" aria-label="Worker 节点指标的直接链接" title="Worker 节点指标的直接链接">​</a></h3>
<p>Worker 节点作为数据存储节点，提供全面的存储和性能指标：</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="容量指标-1">容量指标<a href="https://curvineio.github.io/zh-cn/blog/2025/11/27/observability#%E5%AE%B9%E9%87%8F%E6%8C%87%E6%A0%87-1" class="hash-link" aria-label="容量指标的直接链接" title="容量指标的直接链接">​</a></h4>
<p>Worker 节点的容量指标是数据存储管理的核心，对负载均衡、数据迁移和容量规划具有关键作用。通过监控各节点的存储使用情况，可以实现智能的数据分布，防止单点过载，确保整个缓存集群的存储资源得到最优利用。</p>
<p><img decoding="async" loading="lazy" alt="容量指标" src="https://curvineio.github.io/zh-cn/assets/images/9-e482560bc04145b1abfd4be83ac49333.png" width="920" height="343" class="img_ev3q"></p>
<table><thead><tr><th>指标名称</th><th>描述</th></tr></thead><tbody><tr><td>capacity</td><td>总存储容量</td></tr><tr><td>available</td><td>可用存储空间</td></tr><tr><td>fs_used</td><td>文件系统已用空间</td></tr><tr><td>num_blocks</td><td>block 总数</td></tr><tr><td>num_blocks_to_delete</td><td>待删除 block 数</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="io-指标-1">I/O 指标<a href="https://curvineio.github.io/zh-cn/blog/2025/11/27/observability#io-%E6%8C%87%E6%A0%87-1" class="hash-link" aria-label="I/O 指标的直接链接" title="I/O 指标的直接链接">​</a></h4>
<p>Worker 节点的 I/O 指标反映了数据存储的实际性能，对评估存储硬件效率、优化数据访问模式至关重要。详细的读写统计信息有助于识别热点数据、优化数据布局，提升整体存储性能和响应速度。</p>
<p><img decoding="async" loading="lazy" alt="I/O指标" src="https://curvineio.github.io/zh-cn/assets/images/10-a735389fe953fa838c80692c3fa2ce89.png" width="789" height="457" class="img_ev3q"></p>
<table><thead><tr><th>指标名称</th><th>描述</th></tr></thead><tbody><tr><td>write_bytes</td><td>写入字节数</td></tr><tr><td>write_time_us</td><td>写入时间（微秒）</td></tr><tr><td>write_count</td><td>写入次数</td></tr><tr><td>write_blocks</td><td>写入块数（按类型分类）</td></tr><tr><td>read_bytes</td><td>读取字节数</td></tr><tr><td>read_time_us</td><td>读取时间（微秒）</td></tr><tr><td>read_count</td><td>读取次数</td></tr><tr><td>read_blocks</td><td>读取块数（按类型分类）</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="资源指标-1">资源指标<a href="https://curvineio.github.io/zh-cn/blog/2025/11/27/observability#%E8%B5%84%E6%BA%90%E6%8C%87%E6%A0%87-1" class="hash-link" aria-label="资源指标的直接链接" title="资源指标的直接链接">​</a></h4>
<p>Worker 节点的资源使用情况直接影响数据存储服务的稳定性和性能，对资源调度和性能优化具有重要意义。合理的内存使用是保证数据缓存效率的基础，需要精确监控以避免资源竞争和性能下降。</p>
<p><img decoding="async" loading="lazy" alt="资源指标" src="data:image/png;base64,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" width="262" height="114" class="img_ev3q"></p>
<table><thead><tr><th>指标名称</th><th>描述</th></tr></thead><tbody><tr><td>used_memory_bytes</td><td>已用内存字节数</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="硬件状态指标">硬件状态指标<a href="https://curvineio.github.io/zh-cn/blog/2025/11/27/observability#%E7%A1%AC%E4%BB%B6%E7%8A%B6%E6%80%81%E6%8C%87%E6%A0%87" class="hash-link" aria-label="硬件状态指标的直接链接" title="硬件状态指标的直接链接">​</a></h4>
<p>硬件状态指标是保障数据可靠性和系统可用性的重要监控维度，对预防性维护和故障快速响应至关重要。通过实时监控磁盘健康状态，可以提前发现硬件故障风险，及时进行数据迁移和硬件更换，确保缓存系统的数据安全和持续可用。</p>
<p><img decoding="async" loading="lazy" alt="硬件状态指标" src="https://curvineio.github.io/zh-cn/assets/images/12-21afdbda2d97fe2e497d608b4ae22947.png" width="527" height="229" class="img_ev3q"></p>
<table><thead><tr><th>指标名称</th><th>描述</th></tr></thead><tbody><tr><td>failed_disks</td><td>异常存储数量</td></tr><tr><td>total_disks</td><td>存储磁盘数量</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="全局面板">全局面板<a href="https://curvineio.github.io/zh-cn/blog/2025/11/27/observability#%E5%85%A8%E5%B1%80%E9%9D%A2%E6%9D%BF" class="hash-link" aria-label="全局面板的直接链接" title="全局面板的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="master">Master<a href="https://curvineio.github.io/zh-cn/blog/2025/11/27/observability#master" class="hash-link" aria-label="Master的直接链接" title="Master的直接链接">​</a></h3>
<p><img decoding="async" loading="lazy" alt="Master" src="https://curvineio.github.io/zh-cn/assets/images/master-caae2ec878a7c8ea740c43babae291c0.png" width="1386" height="1452" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="worker">Worker<a href="https://curvineio.github.io/zh-cn/blog/2025/11/27/observability#worker" class="hash-link" aria-label="Worker的直接链接" title="Worker的直接链接">​</a></h3>
<p><img decoding="async" loading="lazy" alt="Worker" src="https://curvineio.github.io/zh-cn/assets/images/worker-4b1dc660f48e493b50fdd3cf2834f774.png" width="1122" height="943" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="client">Client<a href="https://curvineio.github.io/zh-cn/blog/2025/11/27/observability#client" class="hash-link" aria-label="Client的直接链接" title="Client的直接链接">​</a></h3>
<p><img decoding="async" loading="lazy" alt="Client" src="https://curvineio.github.io/zh-cn/assets/images/client-a7f0c52f354649be2578571698a17df7.png" width="1203" height="463" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="总结">总结<a href="https://curvineio.github.io/zh-cn/blog/2025/11/27/observability#%E6%80%BB%E7%BB%93" class="hash-link" aria-label="总结的直接链接" title="总结的直接链接">​</a></h2>
<p>Curvine 分布式缓存系统的可观测性设计覆盖了从元数据管理到数据存储的完整链路，通过细粒度的指标收集实现了：</p>
<ul>
<li><strong>全链路监控</strong>: 从客户端请求到数据存储的完整监控，确保每个环节的性能和状态都可观测</li>
<li><strong>多维度观测</strong>: 涵盖性能、容量、状态等多个维度，提供系统健康度的全面视图</li>
<li><strong>实时告警</strong>: 基于关键指标的实时监控和告警，及时发现异常并快速响应</li>
<li><strong>故障诊断</strong>: 详细的指标数据支持快速故障定位，缩短故障恢复时间</li>
<li><strong>性能优化</strong>: 通过持续监控和分析，为系统性能调优提供数据支撑</li>
<li><strong>容量规划</strong>: 基于历史趋势和实时数据，为容量扩展和资源优化提供决策依据</li>
</ul>
<p>通过这套完善的监控体系，Curvine 能够在复杂的分布式环境中保持高可用性和高性能，为用户提供稳定可靠的缓存服务。</p>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Curvine 分布式缓存系统使用指南]]></title>
        <id>https://curvineio.github.io/zh-cn/blog/2025/09/28/user-guide</id>
        <link href="https://curvineio.github.io/zh-cn/blog/2025/09/28/user-guide"/>
        <updated>2025-09-28T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Version]]></summary>
        <content type="html"><![CDATA[<p><a href="https://github.com/curvine/curvine" target="_blank" rel="noopener noreferrer"><img decoding="async" loading="lazy" src="https://img.shields.io/badge/version-v1.0-blue.svg" alt="Version" class="img_ev3q"></a>
<a href="https://www.apache.org/licenses/LICENSE-2.0" target="_blank" rel="noopener noreferrer"><img decoding="async" loading="lazy" src="https://img.shields.io/badge/license-Apache%202.0-green.svg" alt="License" class="img_ev3q"></a>
<a href="https://docs.curvine.io/" target="_blank" rel="noopener noreferrer"><img decoding="async" loading="lazy" src="https://img.shields.io/badge/docs-latest-brightgreen.svg" alt="Documentation" class="img_ev3q"></a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-目录">📚 目录<a href="https://curvineio.github.io/zh-cn/blog/2025/09/28/user-guide#-%E7%9B%AE%E5%BD%95" class="hash-link" aria-label="📚 目录的直接链接" title="📚 目录的直接链接">​</a></h2>
<ul>
<li><a href="https://curvineio.github.io/zh-cn/blog/2025/09/28/user-guide#-%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%BF%B0">🎯 系统概述</a></li>
<li><a href="https://curvineio.github.io/zh-cn/blog/2025/09/28/user-guide#-%E8%B7%AF%E5%BE%84%E6%8C%82%E8%BD%BD%E7%AE%A1%E7%90%86">📂 路径挂载管理</a></li>
<li><a href="https://curvineio.github.io/zh-cn/blog/2025/09/28/user-guide#-%E6%99%BA%E8%83%BD%E7%BC%93%E5%AD%98%E7%AD%96%E7%95%A5">💾 智能缓存策略</a></li>
<li><a href="https://curvineio.github.io/zh-cn/blog/2025/09/28/user-guide#-%E6%95%B0%E6%8D%AE%E4%B8%80%E8%87%B4%E6%80%A7%E4%BF%9D%E9%9A%9C">🔄 数据一致性保障</a></li>
<li><a href="https://curvineio.github.io/zh-cn/blog/2025/09/28/user-guide#-aiml-%E5%9C%BA%E6%99%AF%E5%BA%94%E7%94%A8">🤖 AI/ML 场景应用</a></li>
<li><a href="https://curvineio.github.io/zh-cn/blog/2025/09/28/user-guide#-%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%94%9F%E6%80%81%E9%9B%86%E6%88%90">🗄️ 大数据生态集成</a></li>
<li><a href="https://curvineio.github.io/zh-cn/blog/2025/09/28/user-guide#-%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5">💡 最佳实践</a></li>
<li><a href="https://curvineio.github.io/zh-cn/blog/2025/09/28/user-guide#-%E6%80%BB%E7%BB%93">🎯 总结</a></li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-系统概述">🎯 系统概述<a href="https://curvineio.github.io/zh-cn/blog/2025/09/28/user-guide#-%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%BF%B0" class="hash-link" aria-label="🎯 系统概述的直接链接" title="🎯 系统概述的直接链接">​</a></h2>
<p>Curvine 是一个高性能、云原生的分布式缓存系统，专为现代数据密集型应用设计。它在底层存储（UFS）和计算引擎之间提供一个智能缓存层，显著提升数据访问性能。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-性能优势">🏆 性能优势<a href="https://curvineio.github.io/zh-cn/blog/2025/09/28/user-guide#-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8A%BF" class="hash-link" aria-label="🏆 性能优势的直接链接" title="🏆 性能优势的直接链接">​</a></h3>
<p>相比传统存储访问方式，Curvine 可以提供：</p>
<table><thead><tr><th>指标</th><th>云存储</th><th>Curvine 缓存</th><th>性能提升</th></tr></thead><tbody><tr><td><strong>读取延迟</strong></td><td>100-500ms</td><td>1-10ms</td><td><strong>10-50x</strong></td></tr><tr><td><strong>吞吐量</strong></td><td>100-500 MB/s</td><td>1-10 GB/s</td><td><strong>10-20x</strong></td></tr><tr><td><strong>IOPS</strong></td><td>1K-10K</td><td>100K-1M</td><td><strong>100x</strong></td></tr><tr><td><strong>并发连接</strong></td><td>100-1K</td><td>10K-100K</td><td><strong>100x</strong></td></tr></tbody></table>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="核心组件">核心组件<a href="https://curvineio.github.io/zh-cn/blog/2025/09/28/user-guide#%E6%A0%B8%E5%BF%83%E7%BB%84%E4%BB%B6" class="hash-link" aria-label="核心组件的直接链接" title="核心组件的直接链接">​</a></h3>
<ul>
<li><strong>Master 集群</strong>: 元数据管理、缓存调度、一致性保障</li>
<li><strong>Worker 节点</strong>: 数据缓存、I/O 处理、任务执行</li>
<li><strong>Client SDK</strong>: 多语言客户端，支持Rust、Fuse、Java、Python</li>
<li><strong>Job Manager</strong>: 分布式任务调度和管理</li>
<li><strong>Metrics 系统</strong>: 实时监控和性能分析</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-路径挂载管理">📂 路径挂载管理<a href="https://curvineio.github.io/zh-cn/blog/2025/09/28/user-guide#-%E8%B7%AF%E5%BE%84%E6%8C%82%E8%BD%BD%E7%AE%A1%E7%90%86" class="hash-link" aria-label="📂 路径挂载管理的直接链接" title="📂 路径挂载管理的直接链接">​</a></h2>
<p>挂载是使用 Curvine 缓存的第一步，它建立了底层存储（UFS）与缓存路径的映射关系。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="挂载模式详解">挂载模式详解<a href="https://curvineio.github.io/zh-cn/blog/2025/09/28/user-guide#%E6%8C%82%E8%BD%BD%E6%A8%A1%E5%BC%8F%E8%AF%A6%E8%A7%A3" class="hash-link" aria-label="挂载模式详解的直接链接" title="挂载模式详解的直接链接">​</a></h3>
<p>Curvine 支持两种灵活的挂载模式：</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="-cst-模式一致路径模式">🎯 CST 模式（一致路径模式）<a href="https://curvineio.github.io/zh-cn/blog/2025/09/28/user-guide#-cst-%E6%A8%A1%E5%BC%8F%E4%B8%80%E8%87%B4%E8%B7%AF%E5%BE%84%E6%A8%A1%E5%BC%8F" class="hash-link" aria-label="🎯 CST 模式（一致路径模式）的直接链接" title="🎯 CST 模式（一致路径模式）的直接链接">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 路径保持一致，便于管理和维护</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bin/cv mount s3://bucket/data /bucket/data --mnt-type cst</span><br></span></code></pre></div></div>
<p><strong>适用场景</strong>:</p>
<ul>
<li>路径结构清晰的数据湖场景</li>
<li>需要直观路径映射的生产环境</li>
<li>多团队协作的数据平台</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="-arch-模式编排模式">🔀 Arch 模式（编排模式）<a href="https://curvineio.github.io/zh-cn/blog/2025/09/28/user-guide#-arch-%E6%A8%A1%E5%BC%8F%E7%BC%96%E6%8E%92%E6%A8%A1%E5%BC%8F" class="hash-link" aria-label="🔀 Arch 模式（编排模式）的直接链接" title="🔀 Arch 模式（编排模式）的直接链接">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 灵活路径映射，支持复杂的路径变换</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bin/cv mount s3://complex-bucket/deep/nested/path /simple/data --mnt-type arch</span><br></span></code></pre></div></div>
<p><strong>适用场景</strong>:</p>
<ul>
<li>复杂的存储层次结构</li>
<li>需要路径抽象的场景</li>
<li>多云存储统一访问</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="完整挂载示例">完整挂载示例<a href="https://curvineio.github.io/zh-cn/blog/2025/09/28/user-guide#%E5%AE%8C%E6%95%B4%E6%8C%82%E8%BD%BD%E7%A4%BA%E4%BE%8B" class="hash-link" aria-label="完整挂载示例的直接链接" title="完整挂载示例的直接链接">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 挂载 S3 存储到 Curvine（生产级配置）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bin/cv mount \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">s3://bucket/warehouse/tpch_500g.db/orders \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/bucket/warehouse/tpch_500g.db/orders \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--ttl-ms 24h \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--ttl-action delete \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--replicas 3 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--block-size 128MB \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--consistency-strategy always \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--storage-type ssd \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-c s3.endpoint_url=https://s3.ap-southeast-1.amazonaws.com \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-c s3.credentials.access=access_key \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-c s3.credentials.secret=secret_key \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-c s3.region_name=ap-southeast-1 </span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="挂载参数详解">挂载参数详解<a href="https://curvineio.github.io/zh-cn/blog/2025/09/28/user-guide#%E6%8C%82%E8%BD%BD%E5%8F%82%E6%95%B0%E8%AF%A6%E8%A7%A3" class="hash-link" aria-label="挂载参数详解的直接链接" title="挂载参数详解的直接链接">​</a></h3>
<table><thead><tr><th>参数</th><th>类型</th><th>默认值</th><th>说明</th><th>示例</th></tr></thead><tbody><tr><td><code>--ttl-ms</code></td><td>duration</td><td><code>0</code></td><td>缓存数据过期时间</td><td><code>24h</code>, <code>7d</code>, <code>30d</code></td></tr><tr><td><code>--ttl-action</code></td><td>enum</td><td><code>none</code></td><td>过期策略：<code>delete</code>/<code>none</code></td><td><code>delete</code></td></tr><tr><td><code>--replicas</code></td><td>int</td><td><code>1</code></td><td>数据副本数（1-5）</td><td><code>3</code></td></tr><tr><td><code>--block-size</code></td><td>size</td><td><code>128MB</code></td><td>缓存块大小</td><td><code>64MB</code>, <code>128MB</code>, <code>256MB</code></td></tr><tr><td><code>--consistency-strategy</code></td><td>enum</td><td><code>always</code></td><td>一致性策略</td><td><code>none</code>/<code>always</code>/<code>period</code></td></tr><tr><td><code>--storage-type</code></td><td>enum</td><td><code>disk</code></td><td>存储介质类型</td><td><code>mem</code>/<code>ssd</code>/<code>disk</code></td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="挂载点管理">挂载点管理<a href="https://curvineio.github.io/zh-cn/blog/2025/09/28/user-guide#%E6%8C%82%E8%BD%BD%E7%82%B9%E7%AE%A1%E7%90%86" class="hash-link" aria-label="挂载点管理的直接链接" title="挂载点管理的直接链接">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 查看所有挂载点</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bin/cv mount</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 卸载路径</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bin/cv unmount /bucket/warehouse/tpch_500g.db/orders</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-智能缓存策略">💾 智能缓存策略<a href="https://curvineio.github.io/zh-cn/blog/2025/09/28/user-guide#-%E6%99%BA%E8%83%BD%E7%BC%93%E5%AD%98%E7%AD%96%E7%95%A5" class="hash-link" aria-label="💾 智能缓存策略的直接链接" title="💾 智能缓存策略的直接链接">​</a></h2>
<p>Curvine 提供多种智能缓存策略，从被动响应到主动预测，全方位优化数据访问性能。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="主动数据预加载">主动数据预加载<a href="https://curvineio.github.io/zh-cn/blog/2025/09/28/user-guide#%E4%B8%BB%E5%8A%A8%E6%95%B0%E6%8D%AE%E9%A2%84%E5%8A%A0%E8%BD%BD" class="hash-link" aria-label="主动数据预加载的直接链接" title="主动数据预加载的直接链接">​</a></h3>
<p>主动加载让您可以在业务高峰前预热缓存，确保最佳性能：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 基础加载</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bin/cv load s3:/bucket/warehouse/critical-dataset</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 带进度监控的同步加载</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bin/cv load s3:/bucket/warehouse/critical-dataset -w</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="自动缓存策略">自动缓存策略<a href="https://curvineio.github.io/zh-cn/blog/2025/09/28/user-guide#%E8%87%AA%E5%8A%A8%E7%BC%93%E5%AD%98%E7%AD%96%E7%95%A5" class="hash-link" aria-label="自动缓存策略的直接链接" title="自动缓存策略的直接链接">​</a></h3>
<p>Curvine 的自动缓存系统相比传统方案具有显著优势：</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="-curvine-智能缓存架构">✨ Curvine 智能缓存架构<a href="https://curvineio.github.io/zh-cn/blog/2025/09/28/user-guide#-curvine-%E6%99%BA%E8%83%BD%E7%BC%93%E5%AD%98%E6%9E%B6%E6%9E%84" class="hash-link" aria-label="✨ Curvine 智能缓存架构的直接链接" title="✨ Curvine 智能缓存架构的直接链接">​</a></h4>
<p><img decoding="async" loading="lazy" alt="curvine" src="https://curvineio.github.io/zh-cn/assets/images/curvine-c0484351e6e6f47508e6113abd1fbe3e.png" width="394" height="886" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="核心优势对比">核心优势对比<a href="https://curvineio.github.io/zh-cn/blog/2025/09/28/user-guide#%E6%A0%B8%E5%BF%83%E4%BC%98%E5%8A%BF%E5%AF%B9%E6%AF%94" class="hash-link" aria-label="核心优势对比的直接链接" title="核心优势对比的直接链接">​</a></h4>
<table><thead><tr><th>特性</th><th>开源竞品</th><th>Curvine</th><th>优势说明</th></tr></thead><tbody><tr><td><strong>加载粒度</strong></td><td>Block级别</td><td>File/Directory级别</td><td>避免碎片化，保证完整性</td></tr><tr><td><strong>重复处理</strong></td><td>存在重复加载</td><td>智能去重</td><td>节省带宽和存储资源</td></tr><tr><td><strong>任务调度</strong></td><td>简单队列</td><td>分布式Job Manager</td><td>高效并发，负载均衡</td></tr><tr><td><strong>一致性保障</strong></td><td>被动检查</td><td>主动感知</td><td>实时数据同步</td></tr></tbody></table>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-数据一致性保障">🔄 数据一致性保障<a href="https://curvineio.github.io/zh-cn/blog/2025/09/28/user-guide#-%E6%95%B0%E6%8D%AE%E4%B8%80%E8%87%B4%E6%80%A7%E4%BF%9D%E9%9A%9C" class="hash-link" aria-label="🔄 数据一致性保障的直接链接" title="🔄 数据一致性保障的直接链接">​</a></h2>
<p>数据一致性是缓存系统的核心挑战，Curvine 提供多层次的一致性保障机制。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="一致性策略详解">一致性策略详解<a href="https://curvineio.github.io/zh-cn/blog/2025/09/28/user-guide#%E4%B8%80%E8%87%B4%E6%80%A7%E7%AD%96%E7%95%A5%E8%AF%A6%E8%A7%A3" class="hash-link" aria-label="一致性策略详解的直接链接" title="一致性策略详解的直接链接">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="1--none-模式---最高性能">1. 🚫 None 模式 - 最高性能<a href="https://curvineio.github.io/zh-cn/blog/2025/09/28/user-guide#1--none-%E6%A8%A1%E5%BC%8F---%E6%9C%80%E9%AB%98%E6%80%A7%E8%83%BD" class="hash-link" aria-label="1. 🚫 None 模式 - 最高性能的直接链接" title="1. 🚫 None 模式 - 最高性能的直接链接">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">bin/cv mount s3://bucket/path /bucket/path --consistency-strategy=none</span><br></span></code></pre></div></div>
<ul>
<li><strong>适用场景</strong>: 静态数据、归档数据、只读数据集</li>
<li><strong>性能</strong>: ⭐⭐⭐⭐⭐ (最快)</li>
<li><strong>一致性</strong>: ⭐⭐ (依赖TTL)</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2--always-模式---强一致性">2. ✅ Always 模式 - 强一致性<a href="https://curvineio.github.io/zh-cn/blog/2025/09/28/user-guide#2--always-%E6%A8%A1%E5%BC%8F---%E5%BC%BA%E4%B8%80%E8%87%B4%E6%80%A7" class="hash-link" aria-label="2. ✅ Always 模式 - 强一致性的直接链接" title="2. ✅ Always 模式 - 强一致性的直接链接">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">bin/cv mount s3://bucket/path /bucket/path --consistency-strategy=always</span><br></span></code></pre></div></div>
<ul>
<li><strong>适用场景</strong>: 经常更新的业务数据、关键业务系统</li>
<li><strong>性能</strong>: ⭐⭐⭐ (有开销)</li>
<li><strong>一致性</strong>: ⭐⭐⭐⭐⭐ (强一致性)</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="3-️-period-模式---平衡方案">3. 🕰️ Period 模式 - 平衡方案<a href="https://curvineio.github.io/zh-cn/blog/2025/09/28/user-guide#3-%EF%B8%8F-period-%E6%A8%A1%E5%BC%8F---%E5%B9%B3%E8%A1%A1%E6%96%B9%E6%A1%88" class="hash-link" aria-label="3. 🕰️ Period 模式 - 平衡方案的直接链接" title="3. 🕰️ Period 模式 - 平衡方案的直接链接">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">bin/cv mount s3://bucket/path /bucket/path \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --consistency-strategy=period \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --check-interval=5m</span><br></span></code></pre></div></div>
<ul>
<li><strong>适用场景</strong>: 更新频率可预期的数据</li>
<li><strong>性能</strong>: ⭐⭐⭐⭐ (较好)</li>
<li><strong>一致性</strong>: ⭐⭐⭐⭐ (定期保证)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="缓存性能监控">缓存性能监控<a href="https://curvineio.github.io/zh-cn/blog/2025/09/28/user-guide#%E7%BC%93%E5%AD%98%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7" class="hash-link" aria-label="缓存性能监控的直接链接" title="缓存性能监控的直接链接">​</a></h3>
<p>监控缓存命中率是评估一致性策略效果的重要手段：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 获取缓存命中率</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">curl -s http://master:9001/metrics | grep -E "(cache_hits|cache_misses)"</span><br></span></code></pre></div></div>
<div class="language-prometheus codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-prometheus codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">client_mount_cache_hits{id="3108497238"} 823307</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">client_mount_cache_misses{id="3108497238"} 4380</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-aiml-场景应用">🤖 AI/ML 场景应用<a href="https://curvineio.github.io/zh-cn/blog/2025/09/28/user-guide#-aiml-%E5%9C%BA%E6%99%AF%E5%BA%94%E7%94%A8" class="hash-link" aria-label="🤖 AI/ML 场景应用的直接链接" title="🤖 AI/ML 场景应用的直接链接">​</a></h2>
<p>AI 和机器学习工作负载对存储性能有极高要求，Curvine 为此提供了专门优化的功能。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="深度学习训练优化">深度学习训练优化<a href="https://curvineio.github.io/zh-cn/blog/2025/09/28/user-guide#%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E8%AE%AD%E7%BB%83%E4%BC%98%E5%8C%96" class="hash-link" aria-label="深度学习训练优化的直接链接" title="深度学习训练优化的直接链接">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 为 GPU 集群优化的数据加载</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bin/cv mount s3://datasets/imagenet /datasets/imagenet \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --storage-type=mem \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --block-size=1GB \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --replicas=2 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="模型服务场景">模型服务场景<a href="https://curvineio.github.io/zh-cn/blog/2025/09/28/user-guide#%E6%A8%A1%E5%9E%8B%E6%9C%8D%E5%8A%A1%E5%9C%BA%E6%99%AF" class="hash-link" aria-label="模型服务场景的直接链接" title="模型服务场景的直接链接">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 模型文件缓存（低延迟访问）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bin/cv mount s3://model/bert-large /models/bert-large \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --storage-type=mem \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --ttl-ms=none \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --consistency-strategy=always \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 推理数据缓存</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bin/cv mount s3://inference/input /inference/input \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --storage-type=ssd \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --ttl-ms=1h \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --consistency-strategy=none </span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-posix-语义与-fuse-访问">🔗 POSIX 语义与 FUSE 访问<a href="https://curvineio.github.io/zh-cn/blog/2025/09/28/user-guide#-posix-%E8%AF%AD%E4%B9%89%E4%B8%8E-fuse-%E8%AE%BF%E9%97%AE" class="hash-link" aria-label="🔗 POSIX 语义与 FUSE 访问的直接链接" title="🔗 POSIX 语义与 FUSE 访问的直接链接">​</a></h3>
<p>Curvine 完美支持 POSIX 语义，通过 FUSE（Filesystem in Userspace）接口，可以将 Curvine 集群挂载为本地文件系统，为 AI/ML 应用提供透明的文件访问体验。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="aiml-训练中的-fuse-使用">AI/ML 训练中的 FUSE 使用<a href="https://curvineio.github.io/zh-cn/blog/2025/09/28/user-guide#aiml-%E8%AE%AD%E7%BB%83%E4%B8%AD%E7%9A%84-fuse-%E4%BD%BF%E7%94%A8" class="hash-link" aria-label="AI/ML 训练中的 FUSE 使用的直接链接" title="AI/ML 训练中的 FUSE 使用的直接链接">​</a></h4>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="1-深度学习训练数据访问">1. 深度学习训练数据访问<a href="https://curvineio.github.io/zh-cn/blog/2025/09/28/user-guide#1-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE" class="hash-link" aria-label="1. 深度学习训练数据访问的直接链接" title="1. 深度学习训练数据访问的直接链接">​</a></h5>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># PyTorch 训练脚本</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> torch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> torch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">utils</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">data </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Dataset</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> DataLoader</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> torchvision </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> transforms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> PIL </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Image</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> os</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">CurvineImageDataset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Dataset</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">__init__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> root_dir</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> transform</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token triple-quoted-string string" style="color:#e3116c">"""</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        通过 FUSE 挂载点直接访问 Curvine 中的数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        root_dir: FUSE 挂载点路径，如 /curvine-fuse/datasets/imagenet</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">        """</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">root_dir </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> root_dir</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">transform </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> transform</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">image_paths </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># 直接遍历 FUSE 挂载的目录</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> class_dir </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">listdir</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">root_dir</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            class_path </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">root_dir</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> class_dir</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">isdir</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">class_path</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> img_file </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">listdir</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">class_path</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> img_file</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lower</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">endswith</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'.png'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'.jpg'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'.jpeg'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">image_paths</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">append</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">class_path</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> img_file</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">__len__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token builtin">len</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">image_paths</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">__getitem__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> idx</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># 通过标准文件操作访问数据，享受 Curvine 缓存加速</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        img_path </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">image_paths</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">idx</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        image </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Image</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">open</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">img_path</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">convert</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'RGB'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">transform</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            image </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">transform</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">image</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># 从路径提取标签</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        label </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">basename</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">dirname</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">img_path</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> image</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> label</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 使用示例</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">transform </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> transforms</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Compose</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    transforms</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Resize</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">224</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">224</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    transforms</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ToTensor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    transforms</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Normalize</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">mean</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0.485</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.456</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.406</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        std</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0.229</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.224</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.225</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 直接使用 FUSE 挂载点的路径</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dataset </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> CurvineImageDataset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    root_dir</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">'/curvine-fuse/datasets/imagenet/train'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    transform</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">transform</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dataloader </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> DataLoader</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dataset</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    batch_size</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">64</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    shuffle</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    num_workers</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">8</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pin_memory</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 训练循环</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> epoch </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin">range</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">num_epochs</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> batch_idx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> targets</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin">enumerate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">dataloader</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># 数据通过 FUSE 自动从 Curvine 缓存加载</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># 享受接近内存的访问速度</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        outputs </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> model</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cuda</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        loss </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> criterion</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">outputs</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> targets</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cuda</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># ... 训练逻辑</span><br></span></code></pre></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="2-tensorflowkeras-数据管道">2. TensorFlow/Keras 数据管道<a href="https://curvineio.github.io/zh-cn/blog/2025/09/28/user-guide#2-tensorflowkeras-%E6%95%B0%E6%8D%AE%E7%AE%A1%E9%81%93" class="hash-link" aria-label="2. TensorFlow/Keras 数据管道的直接链接" title="2. TensorFlow/Keras 数据管道的直接链接">​</a></h5>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> tensorflow </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> tf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> os</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">create_curvine_dataset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data_dir</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> batch_size</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">32</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#e3116c">"""</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    通过 FUSE 挂载点创建 TensorFlow 数据管道</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    data_dir: FUSE 挂载的数据目录</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    """</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># 直接使用标准文件 API 访问 FUSE 挂载的数据</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">load_and_preprocess_image</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># TensorFlow 通过 FUSE 透明访问 Curvine 缓存</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        image </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> tf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">io</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">read_file</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        image </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> tf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">image</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">decode_jpeg</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">image</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> channels</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        image </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> tf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">image</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">resize</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">image</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">224</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">224</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        image </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> tf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cast</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">image</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> tf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">float32</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">255.0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> image</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># 扫描 FUSE 挂载目录中的文件</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    image_paths </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    labels </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> class_name </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">listdir</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data_dir</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        class_dir </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data_dir</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> class_name</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">isdir</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">class_dir</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> img_file </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">listdir</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">class_dir</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> img_file</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lower</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">endswith</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'.png'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'.jpg'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'.jpeg'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    image_paths</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">append</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">class_dir</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> img_file</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    labels</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">append</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">class_name</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># 创建数据集</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    path_ds </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> tf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Dataset</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_tensor_slices</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">image_paths</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    label_ds </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> tf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Dataset</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_tensor_slices</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">labels</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># 应用预处理</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    image_ds </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> path_ds</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        load_and_preprocess_image</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        num_parallel_calls</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">tf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">AUTOTUNE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># 组合数据和标签</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dataset </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> tf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Dataset</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">zip</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">image_ds</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> label_ds</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> dataset</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">batch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">batch_size</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">prefetch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">AUTOTUNE</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 使用示例</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">train_dataset </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> create_curvine_dataset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'/curvine-fuse/datasets/imagenet/train'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">val_dataset </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> create_curvine_dataset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'/curvine-fuse/datasets/imagenet/val'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 模型训练</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">fit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    train_dataset</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    validation_data</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">val_dataset</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    epochs</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    callbacks</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        tf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">keras</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">callbacks</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ModelCheckpoint</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'/curvine-fuse/models/checkpoints/'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        tf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">keras</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">callbacks</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">TensorBoard</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">log_dir</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">'/curvine-fuse/logs/'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="️-大数据生态集成">🗄️ 大数据生态集成<a href="https://curvineio.github.io/zh-cn/blog/2025/09/28/user-guide#%EF%B8%8F-%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%94%9F%E6%80%81%E9%9B%86%E6%88%90" class="hash-link" aria-label="🗄️ 大数据生态集成的直接链接" title="🗄️ 大数据生态集成的直接链接">​</a></h2>
<p>Curvine 与主流大数据框架无缝集成，提供透明的缓存加速能力。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hadoop-生态集成">Hadoop 生态集成<a href="https://curvineio.github.io/zh-cn/blog/2025/09/28/user-guide#hadoop-%E7%94%9F%E6%80%81%E9%9B%86%E6%88%90" class="hash-link" aria-label="Hadoop 生态集成的直接链接" title="Hadoop 生态集成的直接链接">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="基础配置">基础配置<a href="https://curvineio.github.io/zh-cn/blog/2025/09/28/user-guide#%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE" class="hash-link" aria-label="基础配置的直接链接" title="基础配置的直接链接">​</a></h4>
<p>在 <code>hdfs-site.xml</code> 或 <code>core-site.xml</code> 中添加：</p>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- Curvine FileSystem 实现 --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">fs.cv.impl</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">io.curvine.CurvineFileSystem</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 单集群配置 --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">fs.cv.master_addrs</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">master1:8995,master2:8995,master3:8995</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="多集群支持">多集群支持<a href="https://curvineio.github.io/zh-cn/blog/2025/09/28/user-guide#%E5%A4%9A%E9%9B%86%E7%BE%A4%E6%94%AF%E6%8C%81" class="hash-link" aria-label="多集群支持的直接链接" title="多集群支持的直接链接">​</a></h4>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 集群1：生产环境 --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">fs.cv.production.master_addrs</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">prod-master1:8995,prod-master2:8995,prod-master3:8995</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 集群2：开发环境 --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">fs.cv.development.master_addrs</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">dev-master1:8995,dev-master2:8995</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 集群3：机器学习专用集群 --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">fs.cv.ml-cluster.master_addrs</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">ml-master1:8995,ml-master2:8995,ml-master3:8995</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-ufs透明代理">🔄 UFS透明代理<a href="https://curvineio.github.io/zh-cn/blog/2025/09/28/user-guide#-ufs%E9%80%8F%E6%98%8E%E4%BB%A3%E7%90%86" class="hash-link" aria-label="🔄 UFS透明代理的直接链接" title="🔄 UFS透明代理的直接链接">​</a></h3>
<p>为了更好地支持现有Java应用无缝接入Curvine缓存，我们提供了UFS透明代理解决方案。该方案的核心优势是<strong>零代码修改</strong>，让现有应用可以立即享受Curvine的缓存加速效果。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="-透明代理核心特性">✨ 透明代理核心特性<a href="https://curvineio.github.io/zh-cn/blog/2025/09/28/user-guide#-%E9%80%8F%E6%98%8E%E4%BB%A3%E7%90%86%E6%A0%B8%E5%BF%83%E7%89%B9%E6%80%A7" class="hash-link" aria-label="✨ 透明代理核心特性的直接链接" title="✨ 透明代理核心特性的直接链接">​</a></h4>
<ul>
<li><strong>🚫 零代码修改</strong>: 保留原有所有接口不变，业务代码无需任何修改</li>
<li><strong>🔍 智能路径识别</strong>: 仅在文件打开时判断路径是否已挂载到Curvine</li>
<li><strong>⚡ 自动缓存加速</strong>: 已挂载路径自动启用缓存加速，未挂载路径走原生S3访问</li>
<li><strong>🔄 平滑切换</strong>: 支持在运行时动态切换是否使用缓存，无需重启应用</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="️-配置方式">🛠️ 配置方式<a href="https://curvineio.github.io/zh-cn/blog/2025/09/28/user-guide#%EF%B8%8F-%E9%85%8D%E7%BD%AE%E6%96%B9%E5%BC%8F" class="hash-link" aria-label="🛠️ 配置方式的直接链接" title="🛠️ 配置方式的直接链接">​</a></h4>
<p>只需要替换Hadoop配置中的S3FileSystem实现类：</p>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 传统S3访问配置 --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">&lt;!--</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    &lt;name&gt;fs.s3a.impl&lt;/name&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    &lt;value&gt;org.apache.hadoop.fs.s3a.S3AFileSystem&lt;/value&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;/property&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- 替换为Curvine透明代理 --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">fs.s3a.impl</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">io.curvine.S3AProxyFileSystem</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">fs.cv.impl</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">io.curvine.CurvineFileSystem</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- Curvine集群配置 --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">fs.curvine.master_addrs</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">master1:8995,master2:8995,master3:8995</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">value</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="-工作原理">🔧 工作原理<a href="https://curvineio.github.io/zh-cn/blog/2025/09/28/user-guide#-%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86" class="hash-link" aria-label="🔧 工作原理的直接链接" title="🔧 工作原理的直接链接">​</a></h4>
<p><img decoding="async" loading="lazy" alt="Working Principle" src="https://curvineio.github.io/zh-cn/assets/images/WorkingPrinciple-656e8456df2f45da1dde48acb99414a7.png" width="937" height="648" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="-使用示例">🚀 使用示例<a href="https://curvineio.github.io/zh-cn/blog/2025/09/28/user-guide#-%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B" class="hash-link" aria-label="🚀 使用示例的直接链接" title="🚀 使用示例的直接链接">​</a></h4>
<p><strong>无需修改任何业务代码，原有代码直接享受加速：</strong></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// 业务代码完全不变！</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Configuration conf = new Configuration();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FileSystem fs = FileSystem.get(URI.create("s3a://my-bucket/"), conf);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 这个路径如果已挂载到Curvine，自动享受缓存加速</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FSDataInputStream input = fs.open(new Path("s3a://my-bucket/warehouse/data.parquet"));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 这个路径如果未挂载，走原生S3访问</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FSDataInputStream input2 = fs.open(new Path("s3a://my-bucket/archive/old-data.parquet"));</span><br></span></code></pre></div></div>
<p><strong>Spark/MapReduce代码示例：</strong></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Spark代码无需任何修改</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Dataset&lt;Row&gt; df = spark.read()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .option("header", "true")</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 如果/warehouse/路径已挂载，自动使用缓存加速</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .csv("s3a://data-lake/warehouse/customer_data/");</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">df.groupBy("region")</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .agg(sum("revenue").alias("total_revenue"))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .orderBy(desc("total_revenue"))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .show(20);</span><br></span></code></pre></div></div>
<p><strong>Python PySpark示例：</strong></p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Python代码也无需修改</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> pyspark</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sql </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> SparkSession</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> pyspark</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sql</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">functions </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token builtin">sum</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> desc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spark </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> SparkSession</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">builder</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">appName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"TransparentCache"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">getOrCreate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 自动判断是否使用缓存</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">df </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> spark</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">read \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">option</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"header"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"true"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">csv</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"s3a://data-lake/analytics/events/"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> df</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">groupBy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"event_type"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">agg</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">sum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"count"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">alias</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"total_events"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">orderBy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">desc</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"total_events"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">show</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="apache-spark-优化配置">Apache Spark 优化配置<a href="https://curvineio.github.io/zh-cn/blog/2025/09/28/user-guide#apache-spark-%E4%BC%98%E5%8C%96%E9%85%8D%E7%BD%AE" class="hash-link" aria-label="Apache Spark 优化配置的直接链接" title="Apache Spark 优化配置的直接链接">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Spark 应用启动配置</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spark-submit \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --class com.example.SparkApp \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --master yarn \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --deploy-mode cluster \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --conf spark.hadoop.fs.cv.impl=io.curvine.CurvineFileSystem \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --conf spark.hadoop.fs.cv.master_addrs=master1:8995,master2:8995,master3:8995 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --conf spark.sql.adaptive.enabled=true \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --jars curvine-hadoop-client.jar \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  app.jar</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="spark-代码示例">Spark 代码示例<a href="https://curvineio.github.io/zh-cn/blog/2025/09/28/user-guide#spark-%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B" class="hash-link" aria-label="Spark 代码示例的直接链接" title="Spark 代码示例的直接链接">​</a></h4>
<div class="language-scala codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-scala codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Scala 示例</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">val spark = SparkSession.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .appName("Curvine Demo")</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .config("spark.hadoop.fs.cv.impl", "io.curvine.CurvineFileSystem")</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .getOrCreate()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 直接使用 cv:// 协议访问缓存数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">val df = spark.read</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .option("multiline", "true")</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .json("cv://production/warehouse/events/2024/01/01/")</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">df.groupBy("event_type")</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .count()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .show()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 多集群访问</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">val prodData = spark.read.parquet("cv://production/warehouse/sales/")</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">val mlData = spark.read.parquet("cv://ml-cluster/features/user_profiles/")</span><br></span></code></pre></div></div>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Python 示例</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> pyspark</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sql </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> SparkSession</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spark </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> SparkSession</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">builder \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">appName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Curvine Python Demo"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"spark.hadoop.fs.cv.impl"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"io.curvine.CurvineFileSystem"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"spark.hadoop.fs.cv.master_addrs"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"master1:8995,master2:8995"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">getOrCreate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 读取缓存中的数据</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">df </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> spark</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">read</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">option</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"header"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"true"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">csv</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"cv://warehouse/customer_data/"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 复杂查询自动享受缓存加速</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> df</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">groupBy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"region"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">agg</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">"revenue"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"sum"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"orders"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"count"</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">orderBy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"sum(revenue)"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ascending</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">show</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">20</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="trinopresto-插件集成">Trino/Presto 插件集成<a href="https://curvineio.github.io/zh-cn/blog/2025/09/28/user-guide#trinopresto-%E6%8F%92%E4%BB%B6%E9%9B%86%E6%88%90" class="hash-link" aria-label="Trino/Presto 插件集成的直接链接" title="Trino/Presto 插件集成的直接链接">​</a></h3>
<p>Curvine 提供了智能路径替换插件，可以做到无侵入性实现缓存加速，不需要业务修改代码，实现完全透明的缓存加速：</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="插件工作流程">插件工作流程<a href="https://curvineio.github.io/zh-cn/blog/2025/09/28/user-guide#%E6%8F%92%E4%BB%B6%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B" class="hash-link" aria-label="插件工作流程的直接链接" title="插件工作流程的直接链接">​</a></h4>
<p><img decoding="async" loading="lazy" alt="Plugin Workflow" src="https://curvineio.github.io/zh-cn/assets/images/PluginWorkflow-2ccbc7133ea0e3151716004e98fc80e9.png" width="996" height="576" class="img_ev3q"></p>
<p>spark 插件使用实例：</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">spark-submit \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--class main.scala.Tpch \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--name tpch_demo \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--conf spark.hadoop.fs.cv.impl=io.curvine.CurvineFileSystem \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--conf spark.hadoop.fs.cv.default.master_addrs=master1:8995,master2:8995 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--conf spark.sql.extensions=io.curvine.spark.CurvineSparkExtension \</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="flink-实时计算集成">Flink 实时计算集成<a href="https://curvineio.github.io/zh-cn/blog/2025/09/28/user-guide#flink-%E5%AE%9E%E6%97%B6%E8%AE%A1%E7%AE%97%E9%9B%86%E6%88%90" class="hash-link" aria-label="Flink 实时计算集成的直接链接" title="Flink 实时计算集成的直接链接">​</a></h3>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Flink Table API 集成示例</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TableEnvironment tableEnv = TableEnvironment.create(settings);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 配置 Curvine FileSystem</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Configuration config = new Configuration();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">config.setString("fs.cv.impl", "io.curvine.CurvineFileSystem");</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">config.setString("fs.cv.master_addrs", "master1:8995,master2:8995");</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 创建 Curvine 表</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tableEnv.executeSql(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "CREATE TABLE user_events (" +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "  user_id BIGINT," +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "  event_type STRING," +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "  timestamp_ms BIGINT," +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "  properties MAP&lt;STRING, STRING&gt;" +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ") WITH (" +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "  'connector' = 'filesystem'," +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "  'path' = 'cv://streaming/events/'," +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "  'format' = 'json'" +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ")"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 实时查询享受缓存加速</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Table result = tableEnv.sqlQuery(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "SELECT user_id, COUNT(*) as event_count " +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "FROM user_events " +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "WHERE timestamp_ms &gt; UNIX_TIMESTAMP() * 1000 - 3600000 " +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "GROUP BY user_id"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span></code></pre></div></div>
<hr>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-最佳实践">💡 最佳实践<a href="https://curvineio.github.io/zh-cn/blog/2025/09/28/user-guide#-%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5" class="hash-link" aria-label="💡 最佳实践的直接链接" title="💡 最佳实践的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-挂载策略最佳实践">🎯 挂载策略最佳实践<a href="https://curvineio.github.io/zh-cn/blog/2025/09/28/user-guide#-%E6%8C%82%E8%BD%BD%E7%AD%96%E7%95%A5%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5" class="hash-link" aria-label="🎯 挂载策略最佳实践的直接链接" title="🎯 挂载策略最佳实践的直接链接">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="按业务场景分层挂载">按业务场景分层挂载<a href="https://curvineio.github.io/zh-cn/blog/2025/09/28/user-guide#%E6%8C%89%E4%B8%9A%E5%8A%A1%E5%9C%BA%E6%99%AF%E5%88%86%E5%B1%82%E6%8C%82%E8%BD%BD" class="hash-link" aria-label="按业务场景分层挂载的直接链接" title="按业务场景分层挂载的直接链接">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 热数据：高频访问，使用内存缓存</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bin/cv mount s3://bucket/hot /bucket/hot \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --storage-type=mem \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --replicas=3 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --ttl-ms=1d \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --ttl-action=delete</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 温数据：定期访问，使用 SSD 缓存</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bin/cv mount s3://bucket/warm /bucket/warm \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --storage-type=ssd \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --replicas=2 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --ttl-ms=7d \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --ttl-action=delete</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 冷数据：低频访问，使用磁盘缓存</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bin/cv mount s3://bucket/cold /bucket/cold \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --storage-type=disk \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --replicas=1 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --ttl-ms=30d \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --ttl-action=delete</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="按数据类型优化">按数据类型优化<a href="https://curvineio.github.io/zh-cn/blog/2025/09/28/user-guide#%E6%8C%89%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E4%BC%98%E5%8C%96" class="hash-link" aria-label="按数据类型优化的直接链接" title="按数据类型优化的直接链接">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 小文件密集型（如日志、配置）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bin/cv mount s3://bucket/logs /bucket/logs \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --block-size=4MB \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --consistency-strategy=none \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 大文件型（如视频、模型）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bin/cv mount s3://bucket/models /bucket/models \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --block-size=1GB \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --consistency-strategy=always \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 分析型数据（如 Parquet）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bin/cv mount s3://bucket/analytics /bucket/analytics \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --block-size=128MB \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --consistency-strategy=none \</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-总结">🎯 总结<a href="https://curvineio.github.io/zh-cn/blog/2025/09/28/user-guide#-%E6%80%BB%E7%BB%93" class="hash-link" aria-label="🎯 总结的直接链接" title="🎯 总结的直接链接">​</a></h2>
<p>Curvine 作为新一代分布式缓存系统，通过智能缓存策略、强一致性保障和无缝生态集成，为现代数据密集型应用提供了卓越的性能提升。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-核心价值">🏆 核心价值<a href="https://curvineio.github.io/zh-cn/blog/2025/09/28/user-guide#-%E6%A0%B8%E5%BF%83%E4%BB%B7%E5%80%BC" class="hash-link" aria-label="🏆 核心价值的直接链接" title="🏆 核心价值的直接链接">​</a></h3>
<ul>
<li><strong>🚀 性能提升</strong>: 10-100倍的访问加速，显著降低数据访问延迟</li>
<li><strong>💰 成本优化</strong>: 减少云存储访问费用，提高计算资源利用率</li>
<li><strong>🛡️ 数据安全</strong>: 多重一致性保障，确保数据准确性和完整性</li>
<li><strong>🌐 生态友好</strong>: 与主流大数据和 AI 框架无缝集成</li>
</ul>
<hr>
<p><em>Curvine - 让数据访问快如闪电 ⚡</em></p>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[从0到1构建Curvine集群&FIO测试]]></title>
        <id>https://curvineio.github.io/zh-cn/blog/2025/08/08/fio-bench</id>
        <link href="https://curvineio.github.io/zh-cn/blog/2025/08/08/fio-bench"/>
        <updated>2025-08-08T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[如何快速上手试试Curvine的效果？这篇文章将介绍如何从0到1构建一个本地小集群，让大家快速上手。]]></summary>
        <content type="html"><![CDATA[<p>如何快速上手试试Curvine的效果？这篇文章将介绍如何从0到1构建一个本地小集群，让大家快速上手。</p>
<blockquote>
<p>github： <a href="https://github.com/CurvineIO/curvine" target="_blank" rel="noopener noreferrer">https://github.com/CurvineIO/curvine</a></p>
</blockquote>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-下载代码">1. 下载代码：<a href="https://curvineio.github.io/zh-cn/blog/2025/08/08/fio-bench#1-%E4%B8%8B%E8%BD%BD%E4%BB%A3%E7%A0%81" class="hash-link" aria-label="1. 下载代码：的直接链接" title="1. 下载代码：的直接链接">​</a></h2>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">git clone https://github.com/CurvineIO/curvine.git</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2环境要求">2.环境要求：<a href="https://curvineio.github.io/zh-cn/blog/2025/08/08/fio-bench#2%E7%8E%AF%E5%A2%83%E8%A6%81%E6%B1%82" class="hash-link" aria-label="2.环境要求：的直接链接" title="2.环境要求：的直接链接">​</a></h2>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">GCC: version 10 or later </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Rust: version 1.86 or later </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Protobuf: version 3.x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Maven: version 3.8 or later</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LLVM: version 12 or later</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FUSE: libfuse2 or libfuse3 development packages</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">JDK: version 1.8 or later </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm: version 9 or later</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Python: version 3.7 or later </span><br></span></code></pre></div></div>
<p>参考</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-编译运行">3. 编译&amp;&amp;运行<a href="https://curvineio.github.io/zh-cn/blog/2025/08/08/fio-bench#3-%E7%BC%96%E8%AF%91%E8%BF%90%E8%A1%8C" class="hash-link" aria-label="3. 编译&amp;&amp;运行的直接链接" title="3. 编译&amp;&amp;运行的直接链接">​</a></h2>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">make all</span><br></span></code></pre></div></div>
<p>为方便大家编译，我们做编译脚本里会提前做依赖组件检查，对于MacOS系统的用户，暂时会选择跳过FUSE的编译（目前没适配mac系统）。 感兴趣的朋友可以考虑使用<code>macfuse</code>项目，进行适配。</p>
<p><img decoding="async" loading="lazy" alt="make-checkenv" src="https://curvineio.github.io/zh-cn/assets/images/make-checkenv-f5dbd19e6cb852ce3b7bcecf4a6be804.png" width="1080" height="692" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="4编译完成启动本地集群">4.编译完成，启动本地集群<a href="https://curvineio.github.io/zh-cn/blog/2025/08/08/fio-bench#4%E7%BC%96%E8%AF%91%E5%AE%8C%E6%88%90%E5%90%AF%E5%8A%A8%E6%9C%AC%E5%9C%B0%E9%9B%86%E7%BE%A4" class="hash-link" aria-label="4.编译完成，启动本地集群的直接链接" title="4.编译完成，启动本地集群的直接链接">​</a></h2>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd build/dist</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./bin/restart-all.sh</span><br></span></code></pre></div></div>
<p>启动成功后，执行report命令，检查是否成功：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bin/cv report</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       active_master: localhost:8995</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       journal_nodes: 1,localhost:8996</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            capacity: 233.5GB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           available: 105.0GB (44.99%)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             fs_used: 0.0B (0.00%)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         non_fs_used: 128.4GB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     live_worker_num: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     lost_worker_num: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           inode_num: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           block_num: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    live_worker_list: 192.168.xxx.xxx:8997,105.0GB/233.5GB (44.99%)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    lost_worker_list:</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="5-查看本地master和worker的webui">5. 查看本地master和worker的webui<a href="https://curvineio.github.io/zh-cn/blog/2025/08/08/fio-bench#5-%E6%9F%A5%E7%9C%8B%E6%9C%AC%E5%9C%B0master%E5%92%8Cworker%E7%9A%84webui" class="hash-link" aria-label="5. 查看本地master和worker的webui的直接链接" title="5. 查看本地master和worker的webui的直接链接">​</a></h2>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">http://localhost:9000/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">http://localhost:9001/</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" alt="webui" src="https://curvineio.github.io/zh-cn/assets/images/webui-99651178199aa9d72a8134fbccfd482e.png" width="1080" height="479" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="6-fio测试">6. FIO测试<a href="https://curvineio.github.io/zh-cn/blog/2025/08/08/fio-bench#6-fio%E6%B5%8B%E8%AF%95" class="hash-link" aria-label="6. FIO测试的直接链接" title="6. FIO测试的直接链接">​</a></h2>
<p>测试环境：阿里云 <code>ecs.r8a.8xlarge</code> 机型 master/woker/client 各一台</p>
<ul>
<li>32 核（vCPU）</li>
<li>256 GiB 内存</li>
<li>系统盘 和 数据盘 均为：ESSD 云盘 500 GiB(7800 IOPS)</li>
<li>最大带宽：25Gb</li>
</ul>
<p>准备数据（在worker机器）：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">bin/curvine-bench.sh fuse.write</span><br></span></code></pre></div></div>
<p><strong>fio顺序读测试，8并发</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">fio -iodepth=1 -rw=read -ioengine=libaio -bs=256k</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> -group_reporting -size=200gb </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> -filename=/curvine-fuse/fs-bench/0  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> -name=read_test --readonly -direct=1 --runtime=60 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> -numjobs=8</span><br></span></code></pre></div></div>
<p><strong>fio随机读测试，8并发</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fio -iodepth=1 -rw=randread -ioengine=libaio -bs=256k</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> -group_reporting -size=200gb </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> -filename=/curvine-fuse/fs-bench/0  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> -name=read_test --readonly -direct=1 --runtime=60</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> -numjobs=8</span><br></span></code></pre></div></div>
<p>最后，视频演示一下，做一下fio测试的效果：</p>]]></content>
        <author>
            <name>David</name>
            <uri>https://curvine.io</uri>
        </author>
        <author>
            <name>Barry</name>
            <uri>https://curvine.io</uri>
        </author>
        <category label="benchmark" term="benchmark"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Curvine: 高性能分布式缓存——DataFun数智大会]]></title>
        <id>https://curvineio.github.io/zh-cn/blog/2025/07/25/datafun-conference</id>
        <link href="https://curvineio.github.io/zh-cn/blog/2025/07/25/datafun-conference"/>
        <updated>2025-07-25T00:00:00.000Z</updated>
        <content type="html"><![CDATA[<div style="text-align:center"><img src="https://curvineio.github.io/zh-cn/assets/images/page1-9e0db11d04efd64d376e9c18e42d6f7d.png" alt="page1" style="width:100%;max-width:800px"></div>
<div style="text-align:center"><img src="https://curvineio.github.io/zh-cn/assets/images/page2-81bbbe2aa959e56a7977f15826a71a4e.png" alt="page2" style="width:100%;max-width:800px"></div>
<div style="text-align:center"><img src="https://curvineio.github.io/zh-cn/assets/images/page3-4c7233b958f9dc4b660c752e3c0a73c7.png" alt="page3" style="width:100%;max-width:800px"></div>
<div style="text-align:center"><img src="https://curvineio.github.io/zh-cn/assets/images/page4-b33228d0a3518a1dd6630ddb1dba28f5.png" alt="page4" style="width:100%;max-width:800px"></div>
<div style="text-align:center"><img src="https://curvineio.github.io/zh-cn/assets/images/page5-069bb46247328df8ec831e9a7e7191a3.png" alt="page5" style="width:100%;max-width:800px"></div>
<div style="text-align:center"><img src="https://curvineio.github.io/zh-cn/assets/images/page6-1d8b5e0a9a21310dd0085ac257b6cb0c.png" alt="page6" style="width:100%;max-width:800px"></div>
<div style="text-align:center"><img src="https://curvineio.github.io/zh-cn/assets/images/page7-1d8851733e4640b0e0a4e9807c41e98a.png" alt="page7" style="width:100%;max-width:800px"></div>
<div style="text-align:center"><img src="https://curvineio.github.io/zh-cn/assets/images/page8-83a95347c6b6af71bad05fed88f4e3e4.png" alt="page8" style="width:100%;max-width:800px"></div>
<div style="text-align:center"><img src="https://curvineio.github.io/zh-cn/assets/images/page9-881237d502eb84875c8ac3dad6514eef.png" alt="page9" style="width:100%;max-width:800px"></div>
<div style="text-align:center"><img src="https://curvineio.github.io/zh-cn/assets/images/page10-6ad1709f4d0107b4683dd3f4890b8b6e.png" alt="page10" style="width:100%;max-width:800px"></div>
<div style="text-align:center"><img src="https://curvineio.github.io/zh-cn/assets/images/page11-63c24b31e8cdfd62414919b490ecacca.png" alt="page11" style="width:100%;max-width:800px"></div>
<div style="text-align:center"><img src="https://curvineio.github.io/zh-cn/assets/images/page12-e93c0be5afc60ed359e8befebd57a99e.png" alt="page12" style="width:100%;max-width:800px"></div>
<div style="text-align:center"><img src="https://curvineio.github.io/zh-cn/assets/images/page13-e7c650425c373a985d4fce9fb53f10d0.png" alt="page13" style="width:100%;max-width:800px"></div>
<div style="text-align:center"><img src="https://curvineio.github.io/zh-cn/assets/images/page14-f3cf3d3b82127c65a1727f8de75dac73.png" alt="page14" style="width:100%;max-width:800px"></div>
<div style="text-align:center"><img src="https://curvineio.github.io/zh-cn/assets/images/page15-b772f486f3606d54dd4312a57bbc382f.png" alt="page15" style="width:100%;max-width:800px"></div>
<div style="text-align:center"><img src="https://curvineio.github.io/zh-cn/assets/images/page16-aad406a9b2e5021648d60f10553319cf.png" alt="page16" style="width:100%;max-width:800px"></div>
<div style="text-align:center"><img src="https://curvineio.github.io/zh-cn/assets/images/page17-8b589407e499754e23a3d3f8310bcdf1.png" alt="page17" style="width:100%;max-width:800px"></div>
<div style="text-align:center"><img src="https://curvineio.github.io/zh-cn/assets/images/page18-89b141910083111af20e6c7a40671ede.png" alt="page18" style="width:100%;max-width:800px"></div>
<div style="text-align:center"><img src="https://curvineio.github.io/zh-cn/assets/images/page19-e1191c7a9c5261fb1721ad1dcd5cb101.png" alt="page19" style="width:100%;max-width:800px"></div>
<div style="text-align:center"><img src="https://curvineio.github.io/zh-cn/assets/images/page20-44c3224b81c7aad233c1ee9735126351.png" alt="page20" style="width:100%;max-width:800px"></div>]]></content>
        <author>
            <name>David</name>
            <uri>https://curvine.io</uri>
        </author>
        <category label="teams" term="teams"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[高性能分布式缓存Curvine，低调开源]]></title>
        <id>https://curvineio.github.io/zh-cn/blog/2025/07/15/what-is-curvine</id>
        <link href="https://curvineio.github.io/zh-cn/blog/2025/07/15/what-is-curvine"/>
        <updated>2025-07-15T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Curvine是什么]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="curvine是什么">Curvine是什么<a href="https://curvineio.github.io/zh-cn/blog/2025/07/15/what-is-curvine#curvine%E6%98%AF%E4%BB%80%E4%B9%88" class="hash-link" aria-label="Curvine是什么的直接链接" title="Curvine是什么的直接链接">​</a></h2>
<p> Curvine是一套分布式缓存系统，基于Rust实现，具备 高并发，高吞吐，低延迟，资源消耗低等特点。不同于Redis、TiKV等KV缓存，Curvine只提供文件缓存能力。Curvine不是存储系统，只提供缓存能力，数据持久化还是需要底层文件或者对象存储系统支撑。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="解决什么问题">解决什么问题<a href="https://curvineio.github.io/zh-cn/blog/2025/07/15/what-is-curvine#%E8%A7%A3%E5%86%B3%E4%BB%80%E4%B9%88%E9%97%AE%E9%A2%98" class="hash-link" aria-label="解决什么问题的直接链接" title="解决什么问题的直接链接">​</a></h2>
<ol>
<li>大规模数据IO性能瓶颈</li>
<li>单机缓存系统容量瓶颈</li>
</ol>
<p>实际应用中，有哪些场景适用Curvine加速？</p>
<div style="text-align:center"><img src="https://curvineio.github.io/zh-cn/assets/images/Curvine-application-d648229ff01cab5c013e96616f9c4e1a.png" alt="Curvine Application Scenarios." style="width:80%;max-width:800px"><p style="font-size:0.8em;color:#666;margin-top:8px"></p><p><b>Fig. 1</b>：Curvine Application Scenarios.</p><p></p></div>
<p>如上图所示，Curvine适用于以下五大场景：</p>
<ol>
<li>大数据shuffle 中间数据加速</li>
<li>大数据热表数据缓存加速</li>
<li>AI训练数据缓存加速</li>
<li>模型文件分发缓存加速</li>
<li>多云数据缓存，解决跨云专线性能瓶颈</li>
</ol>
<p>以上场景总结，只是抛砖引玉，通俗的理解，Curvine其实就是解决： 日益增长的计算性能需求与分布式存储系统的IO能力瓶颈的矛盾。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="性能表现">性能表现<a href="https://curvineio.github.io/zh-cn/blog/2025/07/15/what-is-curvine#%E6%80%A7%E8%83%BD%E8%A1%A8%E7%8E%B0" class="hash-link" aria-label="性能表现的直接链接" title="性能表现的直接链接">​</a></h2>
<p>我们从以下几个方面展示性能和资源使用情况：</p>
<p><strong>1. 元数据操作性能</strong></p>
<table><thead><tr style="background-color:#2ecc71;color:white"><th>Operation Type</th><th>Curvine (QPS)</th><th>Juicefs (QPS)</th><th>oss (QPS)</th></tr></thead><tbody><tr><td>create</td><td style="text-align:right">19,985</td><td style="text-align:right">16,000</td><td style="text-align:right">2,000</td></tr><tr><td>open</td><td style="text-align:right">60,376</td><td style="text-align:right">50,000</td><td style="text-align:right">3,900</td></tr><tr><td>rename</td><td style="text-align:right">43,009</td><td style="text-align:right">21,000</td><td style="text-align:right">200</td></tr><tr><td>delete</td><td style="text-align:right">39,013</td><td style="text-align:right">41,000</td><td style="text-align:right">1,900</td></tr></tbody></table>
<p> <strong>注</strong>： 对比数据选取的并发度均为40</p>
<p> <strong>详细结果</strong>： <a href="https://curvineio.github.io/docs/Benchmark/meta/" target="_blank" rel="noopener noreferrer">https://curvineio.github.io/docs/Benchmark/meta/</a></p>
<p> <strong>业界类似产品测试数据</strong>：<a href="https://juicefs.com/zh-cn/blog/engineering/meta-perf-hdfs-oss-jfs" target="_blank" rel="noopener noreferrer">https://juicefs.com/zh-cn/blog/engineering/meta-perf-hdfs-oss-jfs</a></p>
<p><strong>2. 数据读写性能</strong></p>
<p>相同硬件条件下，测试对比Alluxio性能：</p>
<p>● 256k顺序读</p>
<table style="width:100%;border-collapse:collapse"><thead><tr style="background-color:#2ecc71;color:white"><th>Thread count</th><th>Curvine Open Source Edition (GiB/s)</th><th>Throughput of Open Source Alluxio (GiB/s)</th></tr></thead><tbody><tr style="border-bottom:1px solid #e1e4e8"><td style="text-align:right">1</td><td style="text-align:right">2.2</td><td style="text-align:right">0.6</td></tr><tr style="border-bottom:1px solid #e1e4e8"><td style="text-align:right">2</td><td style="text-align:right">3.7</td><td style="text-align:right">1.1</td></tr><tr style="border-bottom:1px solid #e1e4e8"><td style="text-align:right">4</td><td style="text-align:right">6.8</td><td style="text-align:right">2.3</td></tr><tr style="border-bottom:1px solid #e1e4e8"><td style="text-align:right">8</td><td style="text-align:right">8.9</td><td style="text-align:right">4.5</td></tr><tr style="border-bottom:1px solid #e1e4e8"><td style="text-align:right">16</td><td style="text-align:right">9.2</td><td style="text-align:right">7.9</td></tr><tr style="border-bottom:1px solid #e1e4e8"><td style="text-align:right">32</td><td style="text-align:right">9.5</td><td style="text-align:right">8.8</td></tr><tr style="border-bottom:1px solid #e1e4e8"><td style="text-align:right">64</td><td style="text-align:right">9.2</td><td style="text-align:right">N/A</td></tr><tr style="border-bottom:1px solid #e1e4e8"><td style="text-align:right">128</td><td style="text-align:right">9.2</td><td style="text-align:right">N/A</td></tr></tbody></table>
<p>● 256k随机读</p>
<table style="width:100%;border-collapse:collapse"><thead><tr style="background-color:#2ecc71;color:white"><th>Thread count</th><th>Curvine Open Source Edition (GiB/s)</th><th>Throughput of Open Source Alluxio (GiB/s)</th></tr></thead><tbody><tr style="border-bottom:1px solid #e1e4e8"><td style="text-align:right">1</td><td style="text-align:right">0.3</td><td style="text-align:right">0.0</td></tr><tr style="border-bottom:1px solid #e1e4e8"><td style="text-align:right">2</td><td style="text-align:right">0.7</td><td style="text-align:right">0.1</td></tr><tr style="border-bottom:1px solid #e1e4e8"><td style="text-align:right">4</td><td style="text-align:right">1.4</td><td style="text-align:right">0.1</td></tr><tr style="border-bottom:1px solid #e1e4e8"><td style="text-align:right">8</td><td style="text-align:right">2.8</td><td style="text-align:right">0.2</td></tr><tr style="border-bottom:1px solid #e1e4e8"><td style="text-align:right">16</td><td style="text-align:right">5.2</td><td style="text-align:right">0.4</td></tr><tr style="border-bottom:1px solid #e1e4e8"><td style="text-align:right">32</td><td style="text-align:right">7.8</td><td style="text-align:right">0.3</td></tr><tr style="border-bottom:1px solid #e1e4e8"><td style="text-align:right">64</td><td style="text-align:right">8.7</td><td style="text-align:right">N/A</td></tr><tr style="border-bottom:1px solid #e1e4e8"><td style="text-align:right">128</td><td style="text-align:right">9.0</td><td style="text-align:right">N/A</td></tr></tbody></table>
<p>  Alluxio官网数据披露：<a href="https://www.alluxio.com.cn/alluxio-enterprise-vs-open-source/" target="_blank" rel="noopener noreferrer">https://www.alluxio.com.cn/alluxio-enterprise-vs-open-source/</a></p>
<p><strong>3. 资源消耗情况</strong></p>
<p>  得益于Rust语言的特性，我们在大数据shuffle加速场景下，对比线上使用Curvine和Alluxio资源消耗情况，内存降低90%+，cpu降低50%+。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="架构简介">架构简介<a href="https://curvineio.github.io/zh-cn/blog/2025/07/15/what-is-curvine#%E6%9E%B6%E6%9E%84%E7%AE%80%E4%BB%8B" class="hash-link" aria-label="架构简介的直接链接" title="架构简介的直接链接">​</a></h2>
<p> Curvine架构设计理念：简单、极致、通用。</p>
<div style="text-align:center"><img src="https://curvineio.github.io/zh-cn/assets/images/Curvine-architechure-ed8e3e75a50ee79638f22550d895668a.png" alt="Curvine Architecture Diagram." style="width:80%;max-width:800px"><p style="font-size:0.8em;color:#666;margin-top:8px"></p><p><b>Fig. 2</b>：Curvine Application Scenarios.</p><p></p></div>
<p> <strong>简单</strong>：简单轻量，缓存服务只有两个角色：master、worker。非性能瓶颈的模块，尽量复用开源或者已有的技术，代码最大可能轻量化。</p>
<p> <strong>极致</strong>：对性能影响较大的关键节点：底层rpc通信架构、Fuse 实现性能等关键组件，自主设计实现，以极致性能优化思维构建。</p>
<p> <strong>通用</strong>:：兼容多种现有接入模式，底层存储兼容主流分布式文件和对象存储做到足够通用，易用。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="关于开源">关于开源<a href="https://curvineio.github.io/zh-cn/blog/2025/07/15/what-is-curvine#%E5%85%B3%E4%BA%8E%E5%BC%80%E6%BA%90" class="hash-link" aria-label="关于开源的直接链接" title="关于开源的直接链接">​</a></h2>
<p> 我们在内部大数据高并发高吞吐场景下使用Curvine加速数据IO，取得比较大的收益。希望吸引外部的伙伴共同建设，一起加速基础设施向Rust转变。
 <a href="https://github.com/curvineio/curvine" target="_blank" rel="noopener noreferrer">https://github.com/curvineio/curvine</a></p>
<p>  由OPPO大数据提供支持。</p>]]></content>
        <author>
            <name>David</name>
            <uri>https://curvine.io</uri>
        </author>
        <category label="teams" term="teams"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Curvine分布式缓存系统，来了！!]]></title>
        <id>https://curvineio.github.io/zh-cn/blog/welcome</id>
        <link href="https://curvineio.github.io/zh-cn/blog/welcome"/>
        <updated>2025-05-29T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Curvine是一个高性能的分布式缓存系统，实现了Rust语言，面向低延迟和高吞吐量的工作负载，具有强大的数据治理能力。]]></summary>
        <content type="html"><![CDATA[<p>Curvine是一个高性能的分布式缓存系统，实现了Rust语言，面向低延迟和高吞吐量的工作负载，具有强大的数据治理能力。</p>]]></content>
        <author>
            <name>Barry</name>
            <uri>https://curvine.io</uri>
        </author>
        <author>
            <name>David</name>
            <uri>https://curvine.io</uri>
        </author>
        <category label="teams" term="teams"/>
    </entry>
</feed>