<!doctype html>
<html lang="zh-cn" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Architecture/fluid-integration" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.0">
<title data-rh="true">Fluid 集成 | Curvine</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://curvineio.github.io/zh-cn/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://curvineio.github.io/zh-cn/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://curvineio.github.io/zh-cn/docs/Architecture/fluid-integration"><meta data-rh="true" property="og:locale" content="zh_cn"><meta data-rh="true" property="og:locale:alternate" content="en"><meta data-rh="true" name="docusaurus_locale" content="zh-cn"><meta data-rh="true" name="docsearch:language" content="zh-cn"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Fluid 集成 | Curvine"><meta data-rh="true" name="description" content="本文档介绍如何使用 Fluid 的 ThinRuntime 功能将 Curvine 分布式文件缓存系统接入 Kubernetes 集群，实现云原生数据编排和管理。"><meta data-rh="true" property="og:description" content="本文档介绍如何使用 Fluid 的 ThinRuntime 功能将 Curvine 分布式文件缓存系统接入 Kubernetes 集群，实现云原生数据编排和管理。"><link data-rh="true" rel="icon" href="/zh-cn/img/curvine_logo.ico"><link data-rh="true" rel="canonical" href="https://curvineio.github.io/zh-cn/docs/Architecture/fluid-integration"><link data-rh="true" rel="alternate" href="https://curvineio.github.io/docs/Architecture/fluid-integration" hreflang="en"><link data-rh="true" rel="alternate" href="https://curvineio.github.io/zh-cn/docs/Architecture/fluid-integration" hreflang="zh-cn"><link data-rh="true" rel="alternate" href="https://curvineio.github.io/docs/Architecture/fluid-integration" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"架构详情","item":"https://curvineio.github.io/zh-cn/docs/category/architecture"},{"@type":"ListItem","position":2,"name":"Fluid 集成","item":"https://curvineio.github.io/zh-cn/docs/Architecture/fluid-integration"}]}</script><link rel="alternate" type="application/rss+xml" href="/zh-cn/blog/rss.xml" title="Curvine RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/zh-cn/blog/atom.xml" title="Curvine Atom Feed"><link rel="stylesheet" href="/zh-cn/assets/css/styles.eb50d557.css">
<script src="/zh-cn/assets/js/runtime~main.617302f4.js" defer="defer"></script>
<script src="/zh-cn/assets/js/main.8d99b769.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/zh-cn/img/curvine_logo.png"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/zh-cn/"><div class="navbar__logo"><img src="/zh-cn/img/curvine_logo.png" alt="Curvine" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/zh-cn/img/curvine_logo.png" alt="Curvine" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Curvine</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/zh-cn/docs/Overview/instroduction">文档</a><a class="navbar__item navbar__link" href="/zh-cn/blog">博客</a><a class="navbar__item navbar__link" href="/zh-cn/community">社区</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/zh-cn/docs/Architecture/fluid-integration">Latest 🚧</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>简体中文</a><ul class="dropdown__menu"><li><a href="/docs/Architecture/fluid-integration" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en">English</a></li><li><a href="/zh-cn/docs/Architecture/fluid-integration" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="zh-cn">简体中文</a></li></ul></div><a href="https://github.com/curvineio/curvine" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="切换浅色/暗黑模式（当前为system mode）"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/zh-cn/docs/Overview/instroduction">概览</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/zh-cn/docs/Deploy/quick-start">部署</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/zh-cn/docs/category/user-manuals">用户手册</a><button aria-label="展开侧边栏分类 &#x27;用户手册&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/zh-cn/docs/category/benchmark">性能测试</a><button aria-label="展开侧边栏分类 &#x27;性能测试&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/zh-cn/docs/category/architecture">架构详情</a><button aria-label="折叠侧边栏分类 &#x27;架构详情&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-cn/docs/Architecture/instrodction">Architecture Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-cn/docs/Architecture/opendal-integration">OpenDAL 生态集成</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-cn/docs/Architecture/orpc">Orpc</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/zh-cn/docs/Architecture/fluid-integration">Fluid 集成</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/zh-cn/docs/category/contributor-guide">开发者指南</a><button aria-label="展开侧边栏分类 &#x27;开发者指南&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/zh-cn/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/zh-cn/docs/category/architecture"><span>架构详情</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Fluid 集成</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>Curvine 与 Fluid 集成</h1></header>
<p>本文档介绍如何使用 Fluid 的 ThinRuntime 功能将 Curvine 分布式文件缓存系统接入 Kubernetes 集群，实现云原生数据编排和管理。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="概述">概述<a href="#概述" class="hash-link" aria-label="概述的直接链接" title="概述的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="什么是-fluid">什么是 Fluid<a href="#什么是-fluid" class="hash-link" aria-label="什么是 Fluid的直接链接" title="什么是 Fluid的直接链接">​</a></h3>
<p><a href="https://github.com/fluid-cloudnative/fluid/tree/master" target="_blank" rel="noopener noreferrer">Fluid</a> 是一个开源的云原生数据编排和管理系统，专注于解决大数据和AI场景下数据密集型应用的数据访问问题。它提供了统一的数据访问接口，支持多种数据缓存引擎。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="什么是-thinruntime">什么是 ThinRuntime<a href="#什么是-thinruntime" class="hash-link" aria-label="什么是 ThinRuntime的直接链接" title="什么是 ThinRuntime的直接链接">​</a></h3>
<p>ThinRuntime 是 Fluid 提供的轻量级运行时，允许用户将任何 POSIX 兼容的文件系统通过 FUSE 接口接入 Fluid 生态系统。与传统的 AlluxioRuntime 或 JuiceFSRuntime 相比，ThinRuntime 具有以下特点：</p>
<ul>
<li><strong>轻量级</strong>：无需部署额外的缓存层或元数据服务</li>
<li><strong>灵活性</strong>：支持任何 FUSE 兼容的文件系统</li>
<li><strong>简单性</strong>：配置简单，易于维护</li>
<li><strong>高效性</strong>：直接访问底层存储，减少数据传输开销</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="集成架构">集成架构<a href="#集成架构" class="hash-link" aria-label="集成架构的直接链接" title="集成架构的直接链接">​</a></h3>
<p><img decoding="async" loading="lazy" alt="Curvine Fluid Integration Architecture" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAwIiBoZWlnaHQ9IjYwMCIgdmlld0JveD0iMCAwIDgwMCA2MDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPCEtLSBCYWNrZ3JvdW5kIC0tPgogIDxyZWN0IHdpZHRoPSI4MDAiIGhlaWdodD0iNjAwIiBmaWxsPSIjZjhmOWZhIiBzdHJva2U9Im5vbmUiLz4KICAKICA8IS0tIEt1YmVybmV0ZXMgQ2x1c3RlciBDb250YWluZXIgLS0+CiAgPHJlY3QgeD0iMjAiIHk9IjIwIiB3aWR0aD0iNzYwIiBoZWlnaHQ9IjQ1MCIgcng9IjEwIiBmaWxsPSJub25lIiBzdHJva2U9IiMyYzNlNTAiIHN0cm9rZS13aWR0aD0iMiIvPgogIDx0ZXh0IHg9IjQwIiB5PSI0NSIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjE2IiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0iIzJjM2U1MCI+S3ViZXJuZXRlcyDpm4bnvqQ8L3RleHQ+CiAgCiAgPCEtLSBBcHBsaWNhdGlvbiBQb2QgLS0+CiAgPHJlY3QgeD0iNTAiIHk9IjgwIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjE4MCIgcng9IjgiIGZpbGw9IiNlM2YyZmQiIHN0cm9rZT0iIzE5NzZkMiIgc3Ryb2tlLXdpZHRoPSIyIi8+CiAgPHRleHQgeD0iMTMwIiB5PSIxMDUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGZpbGw9IiMxOTc2ZDIiIHRleHQtYW5jaG9yPSJtaWRkbGUiPuW6lOeUqOeoi+W6jyBQb2Q8L3RleHQ+CiAgCiAgPCEtLSBBcHBsaWNhdGlvbiAtLT4KICA8cmVjdCB4PSI3MCIgeT0iMTIwIiB3aWR0aD0iMTYwIiBoZWlnaHQ9IjQwIiByeD0iNSIgZmlsbD0iI2JiZGVmYiIgc3Ryb2tlPSIjMTk3NmQyIiBzdHJva2Utd2lkdGg9IjEiLz4KICA8dGV4dCB4PSIxNTAiIHk9IjE0MiIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBmaWxsPSIjMTk3NmQyIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj7lupTnlKjnqIvluo88L3RleHQ+CiAgCiAgPCEtLSBQVkMgLS0+CiAgPHJlY3QgeD0iNzAiIHk9IjE4MCIgd2lkdGg9IjE2MCIgaGVpZ2h0PSI0MCIgcng9IjUiIGZpbGw9IiNiYmRlZmIiIHN0cm9rZT0iIzE5NzZkMiIgc3Ryb2tlLXdpZHRoPSIxIi8+CiAgPHRleHQgeD0iMTUwIiB5PSIyMDIiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgZmlsbD0iIzE5NzZkMiIgdGV4dC1hbmNob3I9Im1pZGRsZSI+UFZDIChjdXJ2aW5lLWRhdGEpPC90ZXh0PgogIAogIDwhLS0gRmx1aWQgU3lzdGVtIC0tPgogIDxyZWN0IHg9IjMwMCIgeT0iODAiIHdpZHRoPSIyMDAiIGhlaWdodD0iMjQwIiByeD0iOCIgZmlsbD0iI2U4ZjVlOCIgc3Ryb2tlPSIjMzg4ZTNjIiBzdHJva2Utd2lkdGg9IjIiLz4KICA8dGV4dCB4PSI0MDAiIHk9IjEwNSIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0iIzM4OGUzYyIgdGV4dC1hbmNob3I9Im1pZGRsZSI+Rmx1aWQg57O757ufPC90ZXh0PgogIAogIDwhLS0gRGF0YXNldCAtLT4KICA8cmVjdCB4PSIzMjAiIHk9IjEyMCIgd2lkdGg9IjE2MCIgaGVpZ2h0PSI0MCIgcng9IjUiIGZpbGw9IiNjOGU2YzkiIHN0cm9rZT0iIzM4OGUzYyIgc3Ryb2tlLXdpZHRoPSIxIi8+CiAgPHRleHQgeD0iNDAwIiB5PSIxMzUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMSIgZmlsbD0iIzM4OGUzYyIgdGV4dC1hbmNob3I9Im1pZGRsZSI+RGF0YXNldDwvdGV4dD4KICA8dGV4dCB4PSI0MDAiIHk9IjE1MCIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjExIiBmaWxsPSIjMzg4ZTNjIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj4o5pWw5o2u5rqQ5a6a5LmJKTwvdGV4dD4KICAKICA8IS0tIFRoaW5SdW50aW1lIC0tPgogIDxyZWN0IHg9IjMyMCIgeT0iMTgwIiB3aWR0aD0iMTYwIiBoZWlnaHQ9IjQwIiByeD0iNSIgZmlsbD0iI2M4ZTZjOSIgc3Ryb2tlPSIjMzg4ZTNjIiBzdHJva2Utd2lkdGg9IjEiLz4KICA8dGV4dCB4PSI0MDAiIHk9IjE5NSIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjExIiBmaWxsPSIjMzg4ZTNjIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5UaGluUnVudGltZTwvdGV4dD4KICA8dGV4dCB4PSI0MDAiIHk9IjIxMCIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjExIiBmaWxsPSIjMzg4ZTNjIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj4o6L+Q6KGM5pe26YWN572uKTwvdGV4dD4KICAKICA8IS0tIFRoaW5SdW50aW1lIFByb2ZpbGUgLS0+CiAgPHJlY3QgeD0iMzIwIiB5PSIyNDAiIHdpZHRoPSIxNjAiIGhlaWdodD0iNDAiIHJ4PSI1IiBmaWxsPSIjYzhlNmM5IiBzdHJva2U9IiMzODhlM2MiIHN0cm9rZS13aWR0aD0iMSIvPgogIDx0ZXh0IHg9IjQwMCIgeT0iMjU1IiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTEiIGZpbGw9IiMzODhlM2MiIHRleHQtYW5jaG9yPSJtaWRkbGUiPlRoaW5SdW50aW1lIFByb2ZpbGU8L3RleHQ+CiAgPHRleHQgeD0iNDAwIiB5PSIyNzAiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMSIgZmlsbD0iIzM4OGUzYyIgdGV4dC1hbmNob3I9Im1pZGRsZSI+KOmVnOWDj+mFjee9rik8L3RleHQ+CiAgCiAgPCEtLSBGVVNFIFBvZCAtLT4KICA8cmVjdCB4PSI1MCIgeT0iMzUwIiB3aWR0aD0iNDUwIiBoZWlnaHQ9IjgwIiByeD0iOCIgZmlsbD0iI2ZmZjNlMCIgc3Ryb2tlPSIjZjU3YzAwIiBzdHJva2Utd2lkdGg9IjIiLz4KICA8dGV4dCB4PSIyNzUiIHk9IjM3NSIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0iI2Y1N2MwMCIgdGV4dC1hbmNob3I9Im1pZGRsZSI+RlVTRSBQb2Q8L3RleHQ+CiAgCiAgPCEtLSBDdXJ2aW5lIEZVU0UgQ2xpZW50IC0tPgogIDxyZWN0IHg9IjgwIiB5PSIzOTAiIHdpZHRoPSIxNDAiIGhlaWdodD0iMzAiIHJ4PSI1IiBmaWxsPSIjZmZlMGIyIiBzdHJva2U9IiNmNTdjMDAiIHN0cm9rZS13aWR0aD0iMSIvPgogIDx0ZXh0IHg9IjE1MCIgeT0iNDA4IiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTEiIGZpbGw9IiNmNTdjMDAiIHRleHQtYW5jaG9yPSJtaWRkbGUiPmN1cnZpbmUtZnVzZSDlrqLmiLfnq688L3RleHQ+CiAgCiAgPCEtLSBDb25maWcgUGFyc2VyIC0tPgogIDxyZWN0IHg9IjI4MCIgeT0iMzkwIiB3aWR0aD0iMTQwIiBoZWlnaHQ9IjMwIiByeD0iNSIgZmlsbD0iI2ZmZTBiMiIgc3Ryb2tlPSIjZjU3YzAwIiBzdHJva2Utd2lkdGg9IjEiLz4KICA8dGV4dCB4PSIzNTAiIHk9IjQwOCIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjExIiBmaWxsPSIjZjU3YzAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj7phY3nva7op6PmnpDlmag8L3RleHQ+CiAgCiAgPCEtLSBFeHRlcm5hbCBDdXJ2aW5lIENsdXN0ZXIgLS0+CiAgPHJlY3QgeD0iMjAiIHk9IjUwMCIgd2lkdGg9Ijc2MCIgaGVpZ2h0PSI4MCIgcng9IjEwIiBmaWxsPSIjZmNlNGVjIiBzdHJva2U9IiNjMjE4NWIiIHN0cm9rZS13aWR0aD0iMiIvPgogIDx0ZXh0IHg9IjQwMCIgeT0iNTI1IiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTYiIGZvbnQtd2VpZ2h0PSJib2xkIiBmaWxsPSIjYzIxODViIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj7lpJbpg6ggQ3VydmluZSDpm4bnvqQ8L3RleHQ+CiAgCiAgPCEtLSBNYXN0ZXIgTm9kZSAtLT4KICA8cmVjdCB4PSI4MCIgeT0iNTQwIiB3aWR0aD0iMTIwIiBoZWlnaHQ9IjMwIiByeD0iNSIgZmlsbD0iI2Y4YmJkOSIgc3Ryb2tlPSIjYzIxODViIiBzdHJva2Utd2lkdGg9IjEiLz4KICA8dGV4dCB4PSIxNDAiIHk9IjU1OCIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjExIiBmaWxsPSIjYzIxODViIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5NYXN0ZXIg6IqC54K5PC90ZXh0PgogIAogIDwhLS0gV29ya2VyIE5vZGUgMSAtLT4KICA8cmVjdCB4PSIyNDAiIHk9IjU0MCIgd2lkdGg9IjEyMCIgaGVpZ2h0PSIzMCIgcng9IjUiIGZpbGw9IiNmOGJiZDkiIHN0cm9rZT0iI2MyMTg1YiIgc3Ryb2tlLXdpZHRoPSIxIi8+CiAgPHRleHQgeD0iMzAwIiB5PSI1NTgiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMSIgZmlsbD0iI2MyMTg1YiIgdGV4dC1hbmNob3I9Im1pZGRsZSI+V29ya2VyIOiKgueCuSAxPC90ZXh0PgogIAogIDwhLS0gV29ya2VyIE5vZGUgMiAtLT4KICA8cmVjdCB4PSI0MDAiIHk9IjU0MCIgd2lkdGg9IjEyMCIgaGVpZ2h0PSIzMCIgcng9IjUiIGZpbGw9IiNmOGJiZDkiIHN0cm9rZT0iI2MyMTg1YiIgc3Ryb2tlLXdpZHRoPSIxIi8+CiAgPHRleHQgeD0iNDYwIiB5PSI1NTgiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMSIgZmlsbD0iI2MyMTg1YiIgdGV4dC1hbmNob3I9Im1pZGRsZSI+V29ya2VyIOiKgueCuSAyPC90ZXh0PgogIAogIDwhLS0gQXJyb3dzIC0tPgogIDwhLS0gQXBwIHRvIFBWQyAtLT4KICA8cGF0aCBkPSJNIDE1MCAxNjAgTCAxNTAgMTgwIiBzdHJva2U9IiMxOTc2ZDIiIHN0cm9rZS13aWR0aD0iMiIgbWFya2VyLWVuZD0idXJsKCNhcnJvd2JsdWUpIi8+CiAgCiAgPCEtLSBQVkMgdG8gRlVTRSBQb2QgLS0+CiAgPHBhdGggZD0iTSAxNTAgMjIwIEwgMTUwIDM1MCIgc3Ryb2tlPSIjMTk3NmQyIiBzdHJva2Utd2lkdGg9IjIiIG1hcmtlci1lbmQ9InVybCgjYXJyb3dibHVlKSIvPgogIAogIDwhLS0gRmx1aWQgU3lzdGVtIGludGVybmFsIGNvbm5lY3Rpb25zIC0tPgogIDxwYXRoIGQ9Ik0gNDAwIDE2MCBMIDQwMCAxODAiIHN0cm9rZT0iIzM4OGUzYyIgc3Ryb2tlLXdpZHRoPSIyIiBtYXJrZXItZW5kPSJ1cmwoI2Fycm93Z3JlZW4pIi8+CiAgPHBhdGggZD0iTSA0MDAgMjIwIEwgNDAwIDI0MCIgc3Ryb2tlPSIjMzg4ZTNjIiBzdHJva2Utd2lkdGg9IjIiIG1hcmtlci1lbmQ9InVybCgjYXJyb3dncmVlbikiLz4KICAKICA8IS0tIEZsdWlkIHRvIEZVU0UgUG9kIC0tPgogIDxwYXRoIGQ9Ik0gNDAwIDI4MCBMIDQwMCAzNTAiIHN0cm9rZT0iIzM4OGUzYyIgc3Ryb2tlLXdpZHRoPSIyIiBtYXJrZXItZW5kPSJ1cmwoI2Fycm93Z3JlZW4pIi8+CiAgCiAgPCEtLSBGVVNFIGNvbXBvbmVudHMgY29ubmVjdGlvbiAtLT4KICA8cGF0aCBkPSJNIDIyMCA0MDUgTCAyODAgNDA1IiBzdHJva2U9IiNmNTdjMDAiIHN0cm9rZS13aWR0aD0iMiIgbWFya2VyLWVuZD0idXJsKCNhcnJvd29yYW5nZSkiLz4KICAKICA8IS0tIEZVU0UgUG9kIHRvIEN1cnZpbmUgQ2x1c3RlciAtLT4KICA8cGF0aCBkPSJNIDI3NSA0MzAgTCAyNzUgNTAwIiBzdHJva2U9IiNmNTdjMDAiIHN0cm9rZS13aWR0aD0iMiIgbWFya2VyLWVuZD0idXJsKCNhcnJvd29yYW5nZSkiLz4KICAKICA8IS0tIEN1cnZpbmUgY2x1c3RlciBpbnRlcm5hbCBjb25uZWN0aW9ucyAtLT4KICA8cGF0aCBkPSJNIDIwMCA1NTUgTCAyNDAgNTU1IiBzdHJva2U9IiNjMjE4NWIiIHN0cm9rZS13aWR0aD0iMiIgbWFya2VyLWVuZD0idXJsKCNhcnJvd3BpbmspIi8+CiAgPHBhdGggZD0iTSAzNjAgNTU1IEwgNDAwIDU1NSIgc3Ryb2tlPSIjYzIxODViIiBzdHJva2Utd2lkdGg9IjIiIG1hcmtlci1lbmQ9InVybCgjYXJyb3dwaW5rKSIvPgogIAogIDwhLS0gQXJyb3cgbWFya2VycyAtLT4KICA8ZGVmcz4KICAgIDxtYXJrZXIgaWQ9ImFycm93Ymx1ZSIgbWFya2VyV2lkdGg9IjEwIiBtYXJrZXJIZWlnaHQ9IjEwIiByZWZYPSI5IiByZWZZPSIzIiBvcmllbnQ9ImF1dG8iIG1hcmtlclVuaXRzPSJzdHJva2VXaWR0aCI+CiAgICAgIDxwb2x5Z29uIHBvaW50cz0iMCwwIDAsNiA5LDMiIGZpbGw9IiMxOTc2ZDIiLz4KICAgIDwvbWFya2VyPgogICAgPG1hcmtlciBpZD0iYXJyb3dncmVlbiIgbWFya2VyV2lkdGg9IjEwIiBtYXJrZXJIZWlnaHQ9IjEwIiByZWZYPSI5IiByZWZZPSIzIiBvcmllbnQ9ImF1dG8iIG1hcmtlclVuaXRzPSJzdHJva2VXaWR0aCI+CiAgICAgIDxwb2x5Z29uIHBvaW50cz0iMCwwIDAsNiA5LDMiIGZpbGw9IiMzODhlM2MiLz4KICAgIDwvbWFya2VyPgogICAgPG1hcmtlciBpZD0iYXJyb3dvcmFuZ2UiIG1hcmtlcldpZHRoPSIxMCIgbWFya2VySGVpZ2h0PSIxMCIgcmVmWD0iOSIgcmVmWT0iMyIgb3JpZW50PSJhdXRvIiBtYXJrZXJVbml0cz0ic3Ryb2tlV2lkdGgiPgogICAgICA8cG9seWdvbiBwb2ludHM9IjAsMCAwLDYgOSwzIiBmaWxsPSIjZjU3YzAwIi8+CiAgICA8L21hcmtlcj4KICAgIDxtYXJrZXIgaWQ9ImFycm93cGluayIgbWFya2VyV2lkdGg9IjEwIiBtYXJrZXJIZWlnaHQ9IjEwIiByZWZYPSI5IiByZWZZPSIzIiBvcmllbnQ9ImF1dG8iIG1hcmtlclVuaXRzPSJzdHJva2VXaWR0aCI+CiAgICAgIDxwb2x5Z29uIHBvaW50cz0iMCwwIDAsNiA5LDMiIGZpbGw9IiNjMjE4NWIiLz4KICAgIDwvbWFya2VyPgogIDwvZGVmcz4KPC9zdmc+Cg==" width="800" height="600" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="环境要求">环境要求<a href="#环境要求" class="hash-link" aria-label="环境要求的直接链接" title="环境要求的直接链接">​</a></h2>
<p>在开始之前，请确保：</p>
<ol>
<li><strong>Kubernetes 集群</strong>：版本 &gt;= 1.18</li>
<li><strong>Fluid 系统</strong>：已在集群中安装 Fluid &gt;= 0.9.0</li>
<li><strong>Curvine 集群</strong>：已部署并运行的 Curvine 分布式文件系统</li>
<li><strong>权限要求</strong>：具有创建 ThinRuntimeProfile、Dataset 和 ThinRuntime 资源的权限</li>
<li><strong>Docker 环境</strong>：用于构建 Curvine ThinRuntime 镜像</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="安装-fluid">安装 Fluid<a href="#安装-fluid" class="hash-link" aria-label="安装 Fluid的直接链接" title="安装 Fluid的直接链接">​</a></h3>
<p>如果尚未安装 Fluid，请参考以下步骤：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 使用 Helm 安装 Fluid</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">helm repo add fluid https://fluid-cloudnative.github.io/charts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">helm repo update</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl create ns fluid-system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">helm install fluid fluid/fluid --namespace=fluid-system --insecure-skip-tls-verify</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 或安装开发版本</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">helm install fluid fluid/fluid --devel --version 1.0.7-alpha.5 -n fluid-system --insecure-skip-tls-verify</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="构建-curvine-thinruntime-镜像">构建 Curvine ThinRuntime 镜像<a href="#构建-curvine-thinruntime-镜像" class="hash-link" aria-label="构建 Curvine ThinRuntime 镜像的直接链接" title="构建 Curvine ThinRuntime 镜像的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="第一步编译-curvine">第一步：编译 Curvine<a href="#第一步编译-curvine" class="hash-link" aria-label="第一步：编译 Curvine的直接链接" title="第一步：编译 Curvine的直接链接">​</a></h3>
<p>首先需要编译整个 Curvine 项目：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 在 Curvine 项目根目录执行</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd /path/to/curvine</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">make all</span><br></span></code></pre></div></div>
<p><strong>编译说明</strong>：</p>
<ul>
<li><code>make all</code> 会编译整个 Curvine 项目，包括：<!-- -->
<ul>
<li>Master 节点程序</li>
<li>Worker 节点程序</li>
<li>FUSE 客户端 (<code>curvine-fuse</code>)</li>
<li>S3 网关</li>
<li>CLI 工具</li>
</ul>
</li>
<li>编译产物会生成在 <code>build/dist/</code> 目录下</li>
<li>确保 <code>build/dist/lib/curvine-fuse</code> 文件存在，这是 FUSE 客户端的核心程序</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="第二步构建-docker-镜像">第二步：构建 Docker 镜像<a href="#第二步构建-docker-镜像" class="hash-link" aria-label="第二步：构建 Docker 镜像的直接链接" title="第二步：构建 Docker 镜像的直接链接">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd curvine-docker/fluid/thin-runtime</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./build-image.sh</span><br></span></code></pre></div></div>
<p><strong>构建过程说明</strong>：</p>
<ol>
<li><strong>环境检查</strong>：脚本会检查必要的构建文件是否存在</li>
<li><strong>创建构建上下文</strong>：复制所需文件到临时目录</li>
<li><strong>Docker 镜像构建</strong>：使用 Ubuntu 24.04 作为基础镜像</li>
<li><strong>依赖安装</strong>：安装 FUSE3、Python3 等运行时依赖</li>
<li><strong>文件复制</strong>：将编译好的 Curvine 程序复制到镜像中</li>
<li><strong>权限设置</strong>：设置可执行权限和环境变量</li>
</ol>
<p>构建完成后会生成镜像：<code>fluid-cloudnative/curvine-thinruntime:v1.0.0</code></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="第三步加载镜像到集群">第三步：加载镜像到集群<a href="#第三步加载镜像到集群" class="hash-link" aria-label="第三步：加载镜像到集群的直接链接" title="第三步：加载镜像到集群的直接链接">​</a></h3>
<p>对于 minikube 测试环境：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 删除旧镜像（如果存在）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">minikube image rm docker.io/fluid-cloudnative/curvine-thinruntime:v1.0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 加载新镜像</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">minikube image load fluid-cloudnative/curvine-thinruntime:v1.0.0</span><br></span></code></pre></div></div>
<p>对于生产环境：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 推送到镜像仓库</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker tag fluid-cloudnative/curvine-thinruntime:v1.0.0 your-registry.com/curvine-thinruntime:v1.0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker push your-registry.com/curvine-thinruntime:v1.0.0</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="部署和配置">部署和配置<a href="#部署和配置" class="hash-link" aria-label="部署和配置的直接链接" title="部署和配置的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="第一步创建-thinruntimeprofile">第一步：创建 ThinRuntimeProfile<a href="#第一步创建-thinruntimeprofile" class="hash-link" aria-label="第一步：创建 ThinRuntimeProfile的直接链接" title="第一步：创建 ThinRuntimeProfile的直接链接">​</a></h3>
<p>ThinRuntimeProfile 定义了 Curvine FUSE 客户端的运行时配置：</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> data.fluid.io/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ThinRuntimeProfile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> curvine</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">profile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">fileSystemType</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> fuse</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">fuse</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> fluid</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">cloudnative/curvine</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">thinruntime</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">imageTag</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1.0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">imagePullPolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> IfNotPresent</span><br></span></code></pre></div></div>
<p>应用配置：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f curvine-profile.yaml</span><br></span></code></pre></div></div>
<p><strong>参数说明</strong>：</p>
<ul>
<li><code>fileSystemType: fuse</code>：指定使用 FUSE 类型的文件系统</li>
<li><code>image</code>：指定 FUSE 客户端的 Docker 镜像</li>
<li><code>imageTag</code>：镜像版本标签</li>
<li><code>imagePullPolicy: IfNotPresent</code>：优先使用本地镜像</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="第二步创建-dataset">第二步：创建 Dataset<a href="#第二步创建-dataset" class="hash-link" aria-label="第二步：创建 Dataset的直接链接" title="第二步：创建 Dataset的直接链接">​</a></h3>
<p>Dataset 定义了数据源的位置和访问方式：</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> data.fluid.io/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Dataset</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> curvine</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">dataset</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">mounts</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">mountPoint</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> curvine</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">///data  </span><span class="token comment" style="color:#999988;font-style:italic"># Curvine 文件系统路径</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> curvine</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">options</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">master-endpoints</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;192.168.10.9:8995&quot;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Curvine Master 地址</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">accessModes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> ReadOnlyMany  </span><span class="token comment" style="color:#999988;font-style:italic"># 访问模式</span><br></span></code></pre></div></div>
<p>应用配置：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f curvine-dataset.yaml</span><br></span></code></pre></div></div>
<p><strong>参数说明</strong>：</p>
<ul>
<li><code>mountPoint: curvine:///data</code>：指定要访问的 Curvine 文件系统路径</li>
<li><code>master-endpoints</code>：Curvine Master 节点的 RPC 服务地址和端口</li>
<li><code>accessModes: [ReadOnlyMany]</code>：支持多个 Pod 同时只读访问</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="第三步创建-thinruntime">第三步：创建 ThinRuntime<a href="#第三步创建-thinruntime" class="hash-link" aria-label="第三步：创建 ThinRuntime的直接链接" title="第三步：创建 ThinRuntime的直接链接">​</a></h3>
<p>ThinRuntime 连接 Dataset 和 ThinRuntimeProfile：</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> data.fluid.io/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ThinRuntime</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> curvine</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">dataset </span><span class="token comment" style="color:#999988;font-style:italic"># 必须与 Dataset 名称一致</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">profileName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> curvine</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">profile</span><br></span></code></pre></div></div>
<p>应用配置：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f curvine-thinruntime.yaml</span><br></span></code></pre></div></div>
<p><strong>参数说明</strong>：</p>
<ul>
<li><code>name: curvine-dataset</code>：必须与 Dataset 的名称完全一致</li>
<li><code>profileName: curvine-profile</code>：引用第一步创建的 ThinRuntimeProfile</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="第四步验证部署">第四步：验证部署<a href="#第四步验证部署" class="hash-link" aria-label="第四步：验证部署的直接链接" title="第四步：验证部署的直接链接">​</a></h3>
<p>检查 Dataset 状态：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get dataset curvine-dataset</span><br></span></code></pre></div></div>
<p>期望输出：</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">NAME              UFS TOTAL SIZE   CACHED   CACHE CAPACITY   CACHED PERCENTAGE   PHASE   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">curvine-dataset   [Calculating]    N/A      N/A              N/A                 Bound   1m</span><br></span></code></pre></div></div>
<p>检查 ThinRuntime 状态：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get thinruntime curvine-dataset</span><br></span></code></pre></div></div>
<p>检查 FUSE Pod 状态：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get pods -n fluid-system | grep curvine</span><br></span></code></pre></div></div>
<p><strong>验证说明</strong>：</p>
<ul>
<li><strong>Dataset 状态</strong>：<code>PHASE</code> 应该显示为 <code>Bound</code></li>
<li><strong>ThinRuntime 状态</strong>：应该显示为 <code>Ready</code></li>
<li><strong>FUSE Pod 状态</strong>：应该有一个 <code>curvine-dataset-fuse-xxx</code> Pod 处于 <code>Running</code> 状态</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="使用示例">使用示例<a href="#使用示例" class="hash-link" aria-label="使用示例的直接链接" title="使用示例的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="创建测试应用">创建测试应用<a href="#创建测试应用" class="hash-link" aria-label="创建测试应用的直接链接" title="创建测试应用的直接链接">​</a></h3>
<p>创建一个 Pod 来访问 Curvine 文件系统：</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> test</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">curvine</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;bash&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">args</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> ls </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">lh /data </span><span class="token important">&amp;&amp;</span><span class="token plain"> cat /data/testfile </span><span class="token important">&amp;&amp;</span><span class="token plain"> sleep 3600</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">volumeMounts</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">mountPath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">vol</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">vol</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">persistentVolumeClaim</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">claimName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> curvine</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">dataset</span><br></span></code></pre></div></div>
<p>应用并测试：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f test-pod.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl logs test-curvine</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="数据访问验证">数据访问验证<a href="#数据访问验证" class="hash-link" aria-label="数据访问验证的直接链接" title="数据访问验证的直接链接">​</a></h3>
<p>进入 Pod 验证文件系统访问：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl exec -it test-curvine -- bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ls -la /data/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">df -h /data/</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="技术原理">技术原理<a href="#技术原理" class="hash-link" aria-label="技术原理的直接链接" title="技术原理的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="配置解析流程">配置解析流程<a href="#配置解析流程" class="hash-link" aria-label="配置解析流程的直接链接" title="配置解析流程的直接链接">​</a></h3>
<p>Curvine ThinRuntime 镜像中包含一个配置解析器 (<code>fluid-config-parse.py</code>)，它的工作流程如下：</p>
<p><img decoding="async" loading="lazy" alt="Curvine Config Parse Flow" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAwIiBoZWlnaHQ9IjUwMCIgdmlld0JveD0iMCAwIDYwMCA1MDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPCEtLSBCYWNrZ3JvdW5kIC0tPgogIDxyZWN0IHdpZHRoPSI2MDAiIGhlaWdodD0iNTAwIiBmaWxsPSIjZjhmOWZhIiBzdHJva2U9Im5vbmUiLz4KICAKICA8IS0tIEZsb3cgY29tcG9uZW50cyAtLT4KICA8IS0tIEZsdWlkIENvbnRyb2xsZXIgLS0+CiAgPHJlY3QgeD0iNTAiIHk9IjMwIiB3aWR0aD0iMTIwIiBoZWlnaHQ9IjQwIiByeD0iOCIgZmlsbD0iI2UzZjJmZCIgc3Ryb2tlPSIjMTk3NmQyIiBzdHJva2Utd2lkdGg9IjIiLz4KICA8dGV4dCB4PSIxMTAiIHk9IjUyIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGZvbnQtd2VpZ2h0PSJib2xkIiBmaWxsPSIjMTk3NmQyIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5GbHVpZCBDb250cm9sbGVyPC90ZXh0PgogIAogIDwhLS0gRlVTRSBQb2QgLS0+CiAgPHJlY3QgeD0iMjQwIiB5PSIzMCIgd2lkdGg9IjEwMCIgaGVpZ2h0PSI0MCIgcng9IjgiIGZpbGw9IiNlOGY1ZTgiIHN0cm9rZT0iIzM4OGUzYyIgc3Ryb2tlLXdpZHRoPSIyIi8+CiAgPHRleHQgeD0iMjkwIiB5PSI1MiIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0iIzM4OGUzYyIgdGV4dC1hbmNob3I9Im1pZGRsZSI+RlVTRSBQb2Q8L3RleHQ+CiAgCiAgPCEtLSBDb25maWcgUGFyc2VyIC0tPgogIDxyZWN0IHg9IjQxMCIgeT0iMzAiIHdpZHRoPSIxMjAiIGhlaWdodD0iNDAiIHJ4PSI4IiBmaWxsPSIjZmZmM2UwIiBzdHJva2U9IiNmNTdjMDAiIHN0cm9rZS13aWR0aD0iMiIvPgogIDx0ZXh0IHg9IjQ3MCIgeT0iNTIiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgZm9udC13ZWlnaHQ9ImJvbGQiIGZpbGw9IiNmNTdjMDAiIHRleHQtYW5jaG9yPSJtaWRkbGUiPkNvbmZpZyBQYXJzZXI8L3RleHQ+CiAgCiAgPCEtLSBjdXJ2aW5lLWZ1c2UgLS0+CiAgPHJlY3QgeD0iNDEwIiB5PSIxMDAiIHdpZHRoPSIxMjAiIGhlaWdodD0iNDAiIHJ4PSI4IiBmaWxsPSIjZmNlNGVjIiBzdHJva2U9IiNjMjE4NWIiIHN0cm9rZS13aWR0aD0iMiIvPgogIDx0ZXh0IHg9IjQ3MCIgeT0iMTIyIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGZvbnQtd2VpZ2h0PSJib2xkIiBmaWxsPSIjYzIxODViIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5jdXJ2aW5lLWZ1c2U8L3RleHQ+CiAgCiAgPCEtLSBQcm9jZXNzIHN0ZXBzIC0tPgogIDxnIGlkPSJzdGVwcyI+CiAgICA8IS0tIFN0ZXAgMSAtLT4KICAgIDxyZWN0IHg9IjUwIiB5PSIxODAiIHdpZHRoPSI1MDAiIGhlaWdodD0iMzAiIHJ4PSI1IiBmaWxsPSIjZjBmMGYwIiBzdHJva2U9IiM2NjYiIHN0cm9rZS13aWR0aD0iMSIvPgogICAgPHRleHQgeD0iNzAiIHk9IjIwMCIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjExIiBmaWxsPSIjMzMzIj4xLiDliJvlu7ogUG9kIOW5tuaMgui9vemFjee9rjwvdGV4dD4KICAgIAogICAgPCEtLSBTdGVwIDIgLS0+CiAgICA8cmVjdCB4PSI1MCIgeT0iMjIwIiB3aWR0aD0iNTAwIiBoZWlnaHQ9IjMwIiByeD0iNSIgZmlsbD0iI2YwZjBmMCIgc3Ryb2tlPSIjNjY2IiBzdHJva2Utd2lkdGg9IjEiLz4KICAgIDx0ZXh0IHg9IjcwIiB5PSIyNDAiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMSIgZmlsbD0iIzMzMyI+Mi4g5ZCv5Yqo6YWN572u6Kej5p6Q5ZmoPC90ZXh0PgogICAgCiAgICA8IS0tIFN0ZXAgMyAtLT4KICAgIDxyZWN0IHg9IjUwIiB5PSIyNjAiIHdpZHRoPSI1MDAiIGhlaWdodD0iMzAiIHJ4PSI1IiBmaWxsPSIjZjBmMGYwIiBzdHJva2U9IiM2NjYiIHN0cm9rZS13aWR0aD0iMSIvPgogICAgPHRleHQgeD0iNzAiIHk9IjI4MCIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjExIiBmaWxsPSIjMzMzIj4zLiDor7vlj5YgL2V0Yy9mbHVpZC9jb25maWcvY29uZmlnLmpzb248L3RleHQ+CiAgICAKICAgIDwhLS0gU3RlcCA0IC0tPgogICAgPHJlY3QgeD0iNTAiIHk9IjMwMCIgd2lkdGg9IjUwMCIgaGVpZ2h0PSIzMCIgcng9IjUiIGZpbGw9IiNmMGYwZjAiIHN0cm9rZT0iIzY2NiIgc3Ryb2tlLXdpZHRoPSIxIi8+CiAgICA8dGV4dCB4PSI3MCIgeT0iMzIwIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTEiIGZpbGw9IiMzMzMiPjQuIOino+aekCBtYXN0ZXItZW5kcG9pbnRzIOetieWPguaVsDwvdGV4dD4KICAgIAogICAgPCEtLSBTdGVwIDUgLS0+CiAgICA8cmVjdCB4PSI1MCIgeT0iMzQwIiB3aWR0aD0iNTAwIiBoZWlnaHQ9IjMwIiByeD0iNSIgZmlsbD0iI2YwZjBmMCIgc3Ryb2tlPSIjNjY2IiBzdHJva2Utd2lkdGg9IjEiLz4KICAgIDx0ZXh0IHg9IjcwIiB5PSIzNjAiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMSIgZmlsbD0iIzMzMyI+NS4g55Sf5oiQIGN1cnZpbmUtY2x1c3Rlci50b21sPC90ZXh0PgogICAgCiAgICA8IS0tIFN0ZXAgNiAtLT4KICAgIDxyZWN0IHg9IjUwIiB5PSIzODAiIHdpZHRoPSI1MDAiIGhlaWdodD0iMzAiIHJ4PSI1IiBmaWxsPSIjZjBmMGYwIiBzdHJva2U9IiM2NjYiIHN0cm9rZS13aWR0aD0iMSIvPgogICAgPHRleHQgeD0iNzAiIHk9IjQwMCIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjExIiBmaWxsPSIjMzMzIj42LiDnlJ/miJAgbW91bnQtY3VydmluZS5zaCDohJrmnKw8L3RleHQ+CiAgICAKICAgIDwhLS0gU3RlcCA3IC0tPgogICAgPHJlY3QgeD0iNTAiIHk9IjQyMCIgd2lkdGg9IjUwMCIgaGVpZ2h0PSIzMCIgcng9IjUiIGZpbGw9IiNmMGYwZjAiIHN0cm9rZT0iIzY2NiIgc3Ryb2tlLXdpZHRoPSIxIi8+CiAgICA8dGV4dCB4PSI3MCIgeT0iNDQwIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTEiIGZpbGw9IiMzMzMiPjcuIOWQr+WKqCBjdXJ2aW5lLWZ1c2Ug5a6i5oi356uvPC90ZXh0PgogICAgCiAgICA8IS0tIFN0ZXAgOCAtLT4KICAgIDxyZWN0IHg9IjUwIiB5PSI0NjAiIHdpZHRoPSI1MDAiIGhlaWdodD0iMzAiIHJ4PSI1IiBmaWxsPSIjZjBmMGYwIiBzdHJva2U9IiM2NjYiIHN0cm9rZS13aWR0aD0iMSIvPgogICAgPHRleHQgeD0iNzAiIHk9IjQ4MCIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjExIiBmaWxsPSIjMzMzIj44LiDmjILovb3mlofku7bns7vnu5/liLDnm67moIfot6/lvoQ8L3RleHQ+CiAgPC9nPgogIAogIDwhLS0gRmxvdyBhcnJvd3MgLS0+CiAgPHBhdGggZD0iTSAxNzAgNTAgTCAyNDAgNTAiIHN0cm9rZT0iIzJjM2U1MCIgc3Ryb2tlLXdpZHRoPSIyIiBtYXJrZXItZW5kPSJ1cmwoI2Fycm93KSIvPgogIDxwYXRoIGQ9Ik0gMzQwIDUwIEwgNDEwIDUwIiBzdHJva2U9IiMyYzNlNTAiIHN0cm9rZS13aWR0aD0iMiIgbWFya2VyLWVuZD0idXJsKCNhcnJvdykiLz4KICA8cGF0aCBkPSJNIDQ3MCA3MCBMIDQ3MCAxMDAiIHN0cm9rZT0iIzJjM2U1MCIgc3Ryb2tlLXdpZHRoPSIyIiBtYXJrZXItZW5kPSJ1cmwoI2Fycm93KSIvPgogIAogIDwhLS0gVmVydGljYWwgZmxvdyBhcnJvdyAtLT4KICA8cGF0aCBkPSJNIDMwIDUwIEwgMzAgMTgwIiBzdHJva2U9IiMyYzNlNTAiIHN0cm9rZS13aWR0aD0iMiIgbWFya2VyLWVuZD0idXJsKCNhcnJvdykiLz4KICAKICA8IS0tIEFycm93IG1hcmtlciAtLT4KICA8ZGVmcz4KICAgIDxtYXJrZXIgaWQ9ImFycm93IiBtYXJrZXJXaWR0aD0iMTAiIG1hcmtlckhlaWdodD0iMTAiIHJlZlg9IjkiIHJlZlk9IjMiIG9yaWVudD0iYXV0byIgbWFya2VyVW5pdHM9InN0cm9rZVdpZHRoIj4KICAgICAgPHBvbHlnb24gcG9pbnRzPSIwLDAgMCw2IDksMyIgZmlsbD0iIzJjM2U1MCIvPgogICAgPC9tYXJrZXI+CiAgPC9kZWZzPgo8L3N2Zz4K" width="600" height="500" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="配置文件转换">配置文件转换<a href="#配置文件转换" class="hash-link" aria-label="配置文件转换的直接链接" title="配置文件转换的直接链接">​</a></h3>
<p>配置解析器将 Fluid 的 JSON 配置转换为 Curvine 的 TOML 配置：</p>
<p><strong>输入（Fluid JSON 配置）</strong>：</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;mounts&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;mountPoint&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;curvine:///data&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;options&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;master-endpoints&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;192.168.10.9:8995&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;targetPath&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/runtime-mnt/thin/default/curvine-dataset/thin-fuse&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p><strong>输出（Curvine TOML 配置）</strong>：</p>
<div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">format_master = false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">format_worker = false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">testing = false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cluster_id = &quot;curvine&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[master]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hostname = &quot;192.168.10.9&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rpc_port = 8995</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">web_port = 8080</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[[client.master_addrs]]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hostname = &quot;192.168.10.9&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">port = 8995</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[fuse]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">debug = false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">io_threads = 32</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">worker_threads = 56</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mnt_path = &quot;/runtime-mnt/thin/default/curvine-dataset/thin-fuse&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fs_path = &quot;/data&quot;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="fuse-客户端启动">FUSE 客户端启动<a href="#fuse-客户端启动" class="hash-link" aria-label="FUSE 客户端启动的直接链接" title="FUSE 客户端启动的直接链接">​</a></h3>
<p>配置解析器还会生成启动脚本 <code>mount-curvine.sh</code>：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#!/bin/bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set -ex</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export CURVINE_HOME=&quot;/opt/curvine&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export CURVINE_CONF_FILE=&quot;/opt/curvine/conf/curvine-cluster.toml&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Create necessary directories</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mkdir -p /runtime-mnt/thin/default/curvine-dataset/thin-fuse</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mkdir -p /tmp/curvine/meta</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mkdir -p /opt/curvine/logs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Cleanup previous mounts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">umount -f /runtime-mnt/thin/default/curvine-dataset/thin-fuse 2&gt;/dev/null || true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Start curvine-fuse</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">exec /opt/curvine/lib/curvine-fuse \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --mnt-path /runtime-mnt/thin/default/curvine-dataset/thin-fuse \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --mnt-number 1 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --conf $CURVINE_CONF_FILE</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="使用场景">使用场景<a href="#使用场景" class="hash-link" aria-label="使用场景的直接链接" title="使用场景的直接链接">​</a></h2>
<p>通过 Fluid 集成，Curvine 可以高效支持多种云原生应用场景，充分发挥分布式缓存的优势：</p>
<table><thead><tr><th>应用场景</th><th>访问模式</th><th>Curvine 优势</th><th>Fluid 集成价值</th><th>典型应用</th></tr></thead><tbody><tr><td><strong>大数据处理</strong></td><td>ReadOnlyMany</td><td>数据本地化缓存<br>高吞吐量读取</td><td>多 Pod 并行访问<br>统一数据源管理</td><td>Spark、Flink 批处理任务</td></tr><tr><td><strong>AI/ML 训练</strong></td><td>ReadWriteMany</td><td>热点数据缓存<br>检查点快速保存</td><td>GPU 节点数据就近访问<br>训练任务弹性伸缩</td><td>PyTorch、TensorFlow 训练</td></tr><tr><td><strong>微服务配置</strong></td><td>ReadOnlyMany</td><td>配置文件缓存<br>快速启动加载</td><td>配置统一分发<br>服务快速扩容</td><td>配置中心、静态资源</td></tr><tr><td><strong>数据科学平台</strong></td><td>ReadWriteMany</td><td>交互式数据访问<br>实验结果共享</td><td>团队协作环境<br>资源按需分配</td><td>JupyterHub、数据分析</td></tr><tr><td><strong>内容分发</strong></td><td>ReadOnlyMany</td><td>边缘缓存加速<br>多地域同步</td><td>内容就近分发<br>负载均衡访问</td><td>CDN、静态网站</td></tr><tr><td><strong>日志分析</strong></td><td>ReadWriteMany</td><td>流式数据写入<br>历史数据查询</td><td>日志集中存储<br>分析工具统一接入</td><td>ELK Stack、监控系统</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="核心优势">核心优势<a href="#核心优势" class="hash-link" aria-label="核心优势的直接链接" title="核心优势的直接链接">​</a></h3>
<p><strong>结合 Fluid 后，Curvine 提供的核心能力</strong>：</p>
<ol>
<li><strong>数据本地化</strong>：通过 Curvine 的分布式缓存，将热点数据缓存到计算节点附近，减少网络 I/O</li>
<li><strong>弹性扩展</strong>：Fluid 的 Dataset 抽象配合 Curvine 的动态扩容，支持应用负载的弹性伸缩</li>
<li><strong>统一接口</strong>：通过 POSIX 兼容的文件系统接口，应用无需修改即可享受缓存加速</li>
<li><strong>多租户支持</strong>：不同 Dataset 可配置不同的 Curvine 集群，实现资源隔离和管理</li>
<li><strong>云原生集成</strong>：与 Kubernetes 生态深度集成，支持声明式配置和自动化运维</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="高级配置">高级配置<a href="#高级配置" class="hash-link" aria-label="高级配置的直接链接" title="高级配置的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="多集群支持">多集群支持<a href="#多集群支持" class="hash-link" aria-label="多集群支持的直接链接" title="多集群支持的直接链接">​</a></h3>
<p>可以为不同的 Curvine 集群创建不同的 Dataset：</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 生产环境集群</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> data.fluid.io/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Dataset</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> curvine</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">prod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">mounts</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">mountPoint</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> curvine</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">///prod</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> curvine</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">prod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">options</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">master-endpoints</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;curvine-prod-master:8995&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">accessModes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> ReadWriteMany</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 测试环境集群</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> data.fluid.io/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Dataset</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> curvine</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">mounts</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">mountPoint</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> curvine</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">///test</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> curvine</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">options</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">master-endpoints</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;curvine-test-master:8995&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">accessModes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> ReadWriteMany</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="性能调优">性能调优<a href="#性能调优" class="hash-link" aria-label="性能调优的直接链接" title="性能调优的直接链接">​</a></h3>
<p>在 ThinRuntimeProfile 中可以配置 FUSE 性能参数：</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> data.fluid.io/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ThinRuntimeProfile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> curvine</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">profile</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">optimized</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">fileSystemType</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> fuse</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">fuse</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> fluid</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">cloudnative/curvine</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">thinruntime</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">imageTag</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1.0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">imagePullPolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> IfNotPresent</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">env</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> CURVINE_IO_THREADS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;64&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> CURVINE_WORKER_THREADS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;128&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">resources</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">requests</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1Gi&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;500m&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">limits</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2Gi&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1000m&quot;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="支持的环境变量">支持的环境变量<a href="#支持的环境变量" class="hash-link" aria-label="支持的环境变量的直接链接" title="支持的环境变量的直接链接">​</a></h3>
<p>配置解析器支持以下环境变量来自定义 FUSE 客户端行为：</p>
<table><thead><tr><th>环境变量</th><th>描述</th><th>默认值</th><th>示例</th></tr></thead><tbody><tr><td><code>CURVINE_IO_THREADS</code></td><td>IO 线程数，影响并发 I/O 操作性能</td><td>32</td><td>64</td></tr><tr><td><code>CURVINE_WORKER_THREADS</code></td><td>工作线程数，影响请求处理能力</td><td>56</td><td>128</td></tr><tr><td><code>CURVINE_MASTER_ENDPOINTS</code></td><td>Master 节点地址</td><td>无</td><td>master:8995</td></tr><tr><td><code>CURVINE_MASTER_WEB_PORT</code></td><td>Master Web 端口</td><td>8080</td><td>8080</td></tr></tbody></table>
<p>这些环境变量可以通过 ThinRuntimeProfile 的 <code>env</code> 配置传递给 FUSE Pod，配置解析器会自动读取并应用到 curvine-fuse 启动参数中。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="故障排除">故障排除<a href="#故障排除" class="hash-link" aria-label="故障排除的直接链接" title="故障排除的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="常见问题">常见问题<a href="#常见问题" class="hash-link" aria-label="常见问题的直接链接" title="常见问题的直接链接">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="1-dataset-状态异常">1. Dataset 状态异常<a href="#1-dataset-状态异常" class="hash-link" aria-label="1. Dataset 状态异常的直接链接" title="1. Dataset 状态异常的直接链接">​</a></h4>
<p><strong>问题</strong>：Dataset 长时间处于 <code>NotBound</code> 状态</p>
<p><strong>排查步骤</strong>：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 检查 ThinRuntimeProfile 是否存在</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get thinruntimeprofile curvine-profile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 检查 ThinRuntime 状态</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get thinruntime curvine-dataset -o yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 查看 Fluid 控制器日志</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl logs -n fluid-system -l app=dataset-controller</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2-fuse-pod-启动失败">2. FUSE Pod 启动失败<a href="#2-fuse-pod-启动失败" class="hash-link" aria-label="2. FUSE Pod 启动失败的直接链接" title="2. FUSE Pod 启动失败的直接链接">​</a></h4>
<p><strong>问题</strong>：FUSE Pod 处于 <code>CrashLoopBackOff</code> 状态</p>
<p><strong>排查步骤</strong>：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 查看 Pod 日志</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl logs -n fluid-system curvine-dataset-fuse-xxx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 检查镜像是否存在</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl describe pod -n fluid-system curvine-dataset-fuse-xxx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 进入 Pod 调试（如果 Pod 运行中）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl exec -it -n fluid-system curvine-dataset-fuse-xxx -- bash</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="3-镜像拉取失败">3. 镜像拉取失败<a href="#3-镜像拉取失败" class="hash-link" aria-label="3. 镜像拉取失败的直接链接" title="3. 镜像拉取失败的直接链接">​</a></h4>
<p><strong>问题</strong>：</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Failed to pull image &quot;fluid-cloudnative/curvine-thinruntime:v1.0.0&quot;: </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Error response from daemon: pull access denied</span><br></span></code></pre></div></div>
<p><strong>解决方案</strong>：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 确保镜像已加载到集群</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">minikube image ls | grep curvine</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 重新加载镜像</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">minikube image load fluid-cloudnative/curvine-thinruntime:v1.0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 确保 imagePullPolicy 设置正确</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get thinruntimeprofile curvine-profile -o yaml</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="4-curvine-连接失败">4. Curvine 连接失败<a href="#4-curvine-连接失败" class="hash-link" aria-label="4. Curvine 连接失败的直接链接" title="4. Curvine 连接失败的直接链接">​</a></h4>
<p><strong>问题</strong>：FUSE 客户端无法连接到 Curvine Master</p>
<p><strong>排查步骤</strong>：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 检查网络连通性</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl exec -it -n fluid-system curvine-dataset-fuse-xxx -- ping 192.168.10.9</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 检查端口连通性</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl exec -it -n fluid-system curvine-dataset-fuse-xxx -- telnet 192.168.10.9 8995</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 检查生成的配置文件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl exec -it -n fluid-system curvine-dataset-fuse-xxx -- cat /opt/curvine/conf/curvine-cluster.toml</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="5-glibc-版本错误">5. GLIBC 版本错误<a href="#5-glibc-版本错误" class="hash-link" aria-label="5. GLIBC 版本错误的直接链接" title="5. GLIBC 版本错误的直接链接">​</a></h4>
<p><strong>问题</strong>：</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/opt/curvine/lib/curvine-fuse: /lib/x86_64-linux-gnu/libc.so.6: </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">version `GLIBC_2.39&#x27; not found</span><br></span></code></pre></div></div>
<p><strong>解决方案</strong>：确保使用正确的基础镜像</p>
<div class="language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">FROM ubuntu:24.04  # 使用较新版本的 Ubuntu</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="调试命令">调试命令<a href="#调试命令" class="hash-link" aria-label="调试命令的直接链接" title="调试命令的直接链接">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 查看所有相关资源</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get thinruntimeprofile,dataset,thinruntime,pvc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 查看 Fluid 系统组件状态</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get pods -n fluid-system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 查看详细事件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get events --sort-by=&#x27;.lastTimestamp&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 清理资源（重新部署时）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl delete dataset curvine-dataset</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl delete thinruntime curvine-dataset</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl delete thinruntimeprofile curvine-profile</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="最佳实践">最佳实践<a href="#最佳实践" class="hash-link" aria-label="最佳实践的直接链接" title="最佳实践的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-环境规划">1. 环境规划<a href="#1-环境规划" class="hash-link" aria-label="1. 环境规划的直接链接" title="1. 环境规划的直接链接">​</a></h3>
<ul>
<li><strong>开发环境</strong>：使用单节点 Curvine 集群，简化配置</li>
<li><strong>测试环境</strong>：使用多节点集群，验证高可用性</li>
<li><strong>生产环境</strong>：使用分布式部署，配置监控和备份</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-资源管理">2. 资源管理<a href="#2-资源管理" class="hash-link" aria-label="2. 资源管理的直接链接" title="2. 资源管理的直接链接">​</a></h3>
<ul>
<li>为每个环境创建独立的 Namespace</li>
<li>使用 ResourceQuota 限制资源使用</li>
<li>配置适当的 PodDisruptionBudget</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-安全配置">3. 安全配置<a href="#3-安全配置" class="hash-link" aria-label="3. 安全配置的直接链接" title="3. 安全配置的直接链接">​</a></h3>
<ul>
<li>启用 Curvine 集群认证</li>
<li>使用 Kubernetes Secret 管理敏感信息</li>
<li>配置网络策略限制访问</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-镜像管理">4. 镜像管理<a href="#4-镜像管理" class="hash-link" aria-label="4. 镜像管理的直接链接" title="4. 镜像管理的直接链接">​</a></h3>
<ul>
<li>使用版本标签管理镜像</li>
<li>定期更新基础镜像</li>
<li>在生产环境中使用私有镜像仓库</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="相关链接">相关链接<a href="#相关链接" class="hash-link" aria-label="相关链接的直接链接" title="相关链接的直接链接">​</a></h2>
<ul>
<li><a href="https://github.com/fluid-cloudnative/fluid/blob/master/docs/zh/userguide/install.md" target="_blank" rel="noopener noreferrer">Fluid 官方文档</a></li>
<li><a href="https://github.com/fluid-cloudnative/fluid/blob/master/docs/zh/samples/thinruntime.md" target="_blank" rel="noopener noreferrer">ThinRuntime 示例</a></li>
<li><a href="https://kubernetes.io/docs/concepts/storage/volumes/#fuse" target="_blank" rel="noopener noreferrer">Kubernetes FUSE 支持</a></li>
<li><a href="https://www.kernel.org/doc/html/latest/filesystems/fuse.html" target="_blank" rel="noopener noreferrer">FUSE 文档</a></li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/curvineio/curvine-doc/edit/main/docs/5-Architecture/03-fluid-integration.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/zh-cn/docs/Architecture/orpc"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">Orpc</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/zh-cn/docs/category/contributor-guide"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">Contributor Guide</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#概述" class="table-of-contents__link toc-highlight">概述</a><ul><li><a href="#什么是-fluid" class="table-of-contents__link toc-highlight">什么是 Fluid</a></li><li><a href="#什么是-thinruntime" class="table-of-contents__link toc-highlight">什么是 ThinRuntime</a></li><li><a href="#集成架构" class="table-of-contents__link toc-highlight">集成架构</a></li></ul></li><li><a href="#环境要求" class="table-of-contents__link toc-highlight">环境要求</a><ul><li><a href="#安装-fluid" class="table-of-contents__link toc-highlight">安装 Fluid</a></li></ul></li><li><a href="#构建-curvine-thinruntime-镜像" class="table-of-contents__link toc-highlight">构建 Curvine ThinRuntime 镜像</a><ul><li><a href="#第一步编译-curvine" class="table-of-contents__link toc-highlight">第一步：编译 Curvine</a></li><li><a href="#第二步构建-docker-镜像" class="table-of-contents__link toc-highlight">第二步：构建 Docker 镜像</a></li><li><a href="#第三步加载镜像到集群" class="table-of-contents__link toc-highlight">第三步：加载镜像到集群</a></li></ul></li><li><a href="#部署和配置" class="table-of-contents__link toc-highlight">部署和配置</a><ul><li><a href="#第一步创建-thinruntimeprofile" class="table-of-contents__link toc-highlight">第一步：创建 ThinRuntimeProfile</a></li><li><a href="#第二步创建-dataset" class="table-of-contents__link toc-highlight">第二步：创建 Dataset</a></li><li><a href="#第三步创建-thinruntime" class="table-of-contents__link toc-highlight">第三步：创建 ThinRuntime</a></li><li><a href="#第四步验证部署" class="table-of-contents__link toc-highlight">第四步：验证部署</a></li></ul></li><li><a href="#使用示例" class="table-of-contents__link toc-highlight">使用示例</a><ul><li><a href="#创建测试应用" class="table-of-contents__link toc-highlight">创建测试应用</a></li><li><a href="#数据访问验证" class="table-of-contents__link toc-highlight">数据访问验证</a></li></ul></li><li><a href="#技术原理" class="table-of-contents__link toc-highlight">技术原理</a><ul><li><a href="#配置解析流程" class="table-of-contents__link toc-highlight">配置解析流程</a></li><li><a href="#配置文件转换" class="table-of-contents__link toc-highlight">配置文件转换</a></li><li><a href="#fuse-客户端启动" class="table-of-contents__link toc-highlight">FUSE 客户端启动</a></li></ul></li><li><a href="#使用场景" class="table-of-contents__link toc-highlight">使用场景</a><ul><li><a href="#核心优势" class="table-of-contents__link toc-highlight">核心优势</a></li></ul></li><li><a href="#高级配置" class="table-of-contents__link toc-highlight">高级配置</a><ul><li><a href="#多集群支持" class="table-of-contents__link toc-highlight">多集群支持</a></li><li><a href="#性能调优" class="table-of-contents__link toc-highlight">性能调优</a></li><li><a href="#支持的环境变量" class="table-of-contents__link toc-highlight">支持的环境变量</a></li></ul></li><li><a href="#故障排除" class="table-of-contents__link toc-highlight">故障排除</a><ul><li><a href="#常见问题" class="table-of-contents__link toc-highlight">常见问题</a></li><li><a href="#调试命令" class="table-of-contents__link toc-highlight">调试命令</a></li></ul></li><li><a href="#最佳实践" class="table-of-contents__link toc-highlight">最佳实践</a><ul><li><a href="#1-环境规划" class="table-of-contents__link toc-highlight">1. 环境规划</a></li><li><a href="#2-资源管理" class="table-of-contents__link toc-highlight">2. 资源管理</a></li><li><a href="#3-安全配置" class="table-of-contents__link toc-highlight">3. 安全配置</a></li><li><a href="#4-镜像管理" class="table-of-contents__link toc-highlight">4. 镜像管理</a></li></ul></li><li><a href="#相关链接" class="table-of-contents__link toc-highlight">相关链接</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/zh-cn/docs/Deploy/quick-start">快速开始</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">社区</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.com/invite/xfxMQKv3" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://x.com/szbr8896" target="_blank" rel="noopener noreferrer" class="footer__link-item">X<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">更多</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/zh-cn/blog">博客</a></li><li class="footer__item"><a href="https://github.com/curvineio/curvine" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Curvine Project Authors.<br> Open source under Apache License 2.0. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>