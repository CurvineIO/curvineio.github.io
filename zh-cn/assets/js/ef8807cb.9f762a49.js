"use strict";(self.webpackChunkcurvine_doc=self.webpackChunkcurvine_doc||[]).push([[4818],{7397:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>h,contentTitle:()=>t,default:()=>x,frontMatter:()=>d,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"Benchmark/concurrent","title":"\u5e76\u53d1\u6027\u80fd\u6d4b\u8bd5","description":"\u672c\u7ae0\u8282\u4ecb\u7ecd\u4e86Curvine\u5e76\u53d1\u6027\u80fd\u6d4b\u8bd5\u7684\u65b9\u6cd5\u548c\u7ed3\u679c\u3002","source":"@site/i18n/zh-cn/docusaurus-plugin-content-docs/current/4-Benchmark/02-concurrent.md","sourceDirName":"4-Benchmark","slug":"/Benchmark/concurrent","permalink":"/zh-cn/docs/Benchmark/concurrent","draft":false,"unlisted":false,"editUrl":"https://github.com/curvineio/curvine-doc/edit/main/docs/4-Benchmark/02-concurrent.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"\u5143\u6570\u636e\u6027\u80fd\u6d4b\u8bd5","permalink":"/zh-cn/docs/Benchmark/meta"},"next":{"title":"fio\u6027\u80fd\u6d4b\u8bd5","permalink":"/zh-cn/docs/Benchmark/fio"}}');var c=r(4848),i=r(8453);const d={},t="\u5e76\u53d1\u6027\u80fd\u6d4b\u8bd5",h={},l=[{value:"\u6d4b\u8bd5\u73af\u5883",id:"\u6d4b\u8bd5\u73af\u5883",level:2},{value:"\u6d4b\u8bd5\u5de5\u5177",id:"\u6d4b\u8bd5\u5de5\u5177",level:2},{value:"\u5ba2\u6237\u7aef\u6d4b\u8bd5\u7ed3\u679c",id:"\u5ba2\u6237\u7aef\u6d4b\u8bd5\u7ed3\u679c",level:2},{value:"FUSE\u6d4b\u8bd5\u7ed3\u679c",id:"fuse\u6d4b\u8bd5\u7ed3\u679c",level:2}];function j(n){const e={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...n.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(e.header,{children:(0,c.jsx)(e.h1,{id:"\u5e76\u53d1\u6027\u80fd\u6d4b\u8bd5",children:"\u5e76\u53d1\u6027\u80fd\u6d4b\u8bd5"})}),"\n",(0,c.jsx)(e.p,{children:"\u672c\u7ae0\u8282\u4ecb\u7ecd\u4e86Curvine\u5e76\u53d1\u6027\u80fd\u6d4b\u8bd5\u7684\u65b9\u6cd5\u548c\u7ed3\u679c\u3002"}),"\n",(0,c.jsx)(e.h2,{id:"\u6d4b\u8bd5\u73af\u5883",children:"\u6d4b\u8bd5\u73af\u5883"}),"\n",(0,c.jsx)(e.p,{children:"\u6d4b\u8bd5\u673a\u5668\u914d\u7f6e\u5982\u4e0b\uff1a"}),"\n",(0,c.jsxs)(e.ul,{children:["\n",(0,c.jsx)(e.li,{children:"CPU\uff1a80\u6838"}),"\n",(0,c.jsx)(e.li,{children:"\u5185\u5b58\uff1a256GB"}),"\n",(0,c.jsx)(e.li,{children:"\u78c1\u76d8\uff1a1SSD"}),"\n"]}),"\n",(0,c.jsx)(e.h2,{id:"\u6d4b\u8bd5\u5de5\u5177",children:"\u6d4b\u8bd5\u5de5\u5177"}),"\n",(0,c.jsx)(e.p,{children:"\u4f7f\u7528curvine\u81ea\u5e26\u7684\u6027\u80fd\u6d4b\u8bd5\u5de5\u5177\u8fdb\u884c\u6d4b\u8bd5\uff0c\u6d4b\u8bd5\u5de5\u5177\u4f4d\u4e8ebin\u76ee\u5f55\u4e0b\uff1a"}),"\n",(0,c.jsxs)(e.ul,{children:["\n",(0,c.jsx)(e.li,{children:"curvine-bench\uff1a\u4f7f\u7528rust\u5ba2\u6237\u7aef\u6d4b\u8bd5"}),"\n",(0,c.jsx)(e.li,{children:"java-bench\uff1a\u4f7f\u7528java\u5ba2\u6237\u7aef\u6d4b\u8bd5"}),"\n"]}),"\n",(0,c.jsx)(e.p,{children:"\u6d4b\u8bd5\u7528\u4f8b\uff1a\u4f7f\u752840\u4e2a\u7ebf\u7a0b\u5e76\u53d1\u8bfb\u51991000\u4e2a\u6587\u4ef6\uff0c\u6bcf\u4e2a\u6587\u4ef6\u5927\u5c0f\u4e3a100MB\uff1b\u6d4b\u8bd5\u78c1\u76d8\u8bfb\uff0c\u9700\u8981\u6bcf\u6b21\u6e05\u7406page cache\u3002"}),"\n",(0,c.jsx)(e.p,{children:"rust\u5ba2\u6237\u7aef\u6d4b\u8bd5\uff0c\u4fee\u6539bin/curvine-bench.sh\uff1a"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{children:"${CURVINE_HOME}/lib/curvine-bench \\\n--action ${ACTION} \\\n--dir $DIR \\\n--conf $CURVINE_HOME/conf/curvine-cluster.toml \\\n--checksum true \\\n--client-threads 14 \\\n--buf-size 128KB \\\n--file-size 100MB \\\n--file-num 1000 \\\n"})}),"\n",(0,c.jsx)(e.p,{children:"java \u5ba2\u6237\u7aef\u6d4b\u8bd5\uff0c\u4fee\u6539bin/java-bench.sh\uff1a"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{children:"java -Xms10g -Xmx10g \\\n-Dcurvine.conf.dir=${CURVINE_HOME}/conf \\\nio.curvine.bench.CurvineBenchV2 \\\n-action $ACTION \\\n-dataDir $DIR \\\n-threads 40 \\\n-bufferSize 128kb \\\n-fileSize 100mb \\\n-fileNum 1000 \\\n-checksum true \\\n-clearDir fasle\n"})}),"\n",(0,c.jsx)(e.h2,{id:"\u5ba2\u6237\u7aef\u6d4b\u8bd5\u7ed3\u679c",children:"\u5ba2\u6237\u7aef\u6d4b\u8bd5\u7ed3\u679c"}),"\n",(0,c.jsx)(e.p,{children:"\u8fd0\u884c\u811a\u672c\uff1a"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{children:"# rust \u5ba2\u6237\u7aef\u8bfb\u5199\u6570\u636e\nbin/curvine-bench.sh fs.write\nbin/curvine-bench.sh fs.read\n\n# java \u5ba2\u6237\u7aef\u8bfb\u5199\u6570\u636e\nbin/java-bench.sh fs.write\nbin/java-bench.sh fs.read\n"})}),"\n",(0,c.jsx)(e.p,{children:"rust\u5ba2\u6237\u7aef\u6d4b\u8bd5\u7ed3\u679c\uff1a"}),"\n",(0,c.jsxs)(e.table,{children:[(0,c.jsx)(e.thead,{children:(0,c.jsxs)(e.tr,{children:[(0,c.jsx)(e.th,{children:"\u64cd\u4f5c\u7c7b\u578b"}),(0,c.jsx)(e.th,{children:"\u901f\u5ea6\uff08Gib/s)"})]})}),(0,c.jsxs)(e.tbody,{children:[(0,c.jsxs)(e.tr,{children:[(0,c.jsx)(e.td,{children:"\u5199\u5185\u5b58"}),(0,c.jsx)(e.td,{children:"11.7"})]}),(0,c.jsxs)(e.tr,{children:[(0,c.jsx)(e.td,{children:"\u8bfb\u5185\u5b58"}),(0,c.jsx)(e.td,{children:"17.3"})]}),(0,c.jsxs)(e.tr,{children:[(0,c.jsx)(e.td,{children:"\u5199\u78c1\u76d8"}),(0,c.jsx)(e.td,{children:"4.3"})]}),(0,c.jsxs)(e.tr,{children:[(0,c.jsx)(e.td,{children:"\u8bfb\u78c1\u76d8"}),(0,c.jsx)(e.td,{children:"3.5"})]})]})]}),"\n",(0,c.jsx)(e.p,{children:"java\u5ba2\u6237\u7aef\u6d4b\u8bd5\u7ed3\u679c\uff1a"}),"\n",(0,c.jsxs)(e.table,{children:[(0,c.jsx)(e.thead,{children:(0,c.jsxs)(e.tr,{children:[(0,c.jsx)(e.th,{children:"\u64cd\u4f5c\u7c7b\u578b"}),(0,c.jsx)(e.th,{children:"\u901f\u5ea6\uff08Gib/s)"})]})}),(0,c.jsxs)(e.tbody,{children:[(0,c.jsxs)(e.tr,{children:[(0,c.jsx)(e.td,{children:"\u5199\u5185\u5b58"}),(0,c.jsx)(e.td,{children:"10.1"})]}),(0,c.jsxs)(e.tr,{children:[(0,c.jsx)(e.td,{children:"\u8bfb\u5185\u5b58"}),(0,c.jsx)(e.td,{children:"10.6"})]}),(0,c.jsxs)(e.tr,{children:[(0,c.jsx)(e.td,{children:"\u5199\u78c1\u76d8"}),(0,c.jsx)(e.td,{children:"4.0"})]}),(0,c.jsxs)(e.tr,{children:[(0,c.jsx)(e.td,{children:"\u8bfb\u78c1\u76d8"}),(0,c.jsx)(e.td,{children:"3.5"})]})]})]}),"\n",(0,c.jsx)(e.h2,{id:"fuse\u6d4b\u8bd5\u7ed3\u679c",children:"FUSE\u6d4b\u8bd5\u7ed3\u679c"}),"\n",(0,c.jsx)(e.p,{children:"\u4f7f\u7528fuse3\u8fdb\u884c\u6d4b\u8bd5\u3002"}),"\n",(0,c.jsx)(e.p,{children:"\u8fd0\u884c\u811a\u672c\uff1a"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{children:"# rust file api\u8bfb\u5199\u6570\u636e\nbin/curvine-bench.sh fuse.write\nbin/curvine-bench.sh fuse.read\n\n# java file api\u8bfb\u5199\u6570\u636e\nbin/java-bench.sh fuse.write\nbin/java-bench.sh fuse.read\n"})}),"\n",(0,c.jsx)(e.p,{children:"rust\u6d4b\u8bd5\u7ed3\u679c\uff1a"}),"\n",(0,c.jsxs)(e.table,{children:[(0,c.jsx)(e.thead,{children:(0,c.jsxs)(e.tr,{children:[(0,c.jsx)(e.th,{children:"\u7c7b\u578b"}),(0,c.jsx)(e.th,{children:"\u901f\u5ea6\uff08Gib/s\uff09"})]})}),(0,c.jsxs)(e.tbody,{children:[(0,c.jsxs)(e.tr,{children:[(0,c.jsx)(e.td,{children:"\u5185\u5b58\u5199"}),(0,c.jsx)(e.td,{children:"10.6"})]}),(0,c.jsxs)(e.tr,{children:[(0,c.jsx)(e.td,{children:"\u5185\u5b58\u8bfb"}),(0,c.jsx)(e.td,{children:"11.1"})]}),(0,c.jsxs)(e.tr,{children:[(0,c.jsx)(e.td,{children:"\u78c1\u76d8\u5199"}),(0,c.jsx)(e.td,{children:"3.5"})]}),(0,c.jsxs)(e.tr,{children:[(0,c.jsx)(e.td,{children:"\u78c1\u76d8\u8bfb"}),(0,c.jsx)(e.td,{children:"2.6"})]})]})]}),"\n",(0,c.jsx)(e.p,{children:"java\u6d4b\u8bd5\u7ed3\u679c\uff1a"}),"\n",(0,c.jsxs)(e.table,{children:[(0,c.jsx)(e.thead,{children:(0,c.jsxs)(e.tr,{children:[(0,c.jsx)(e.th,{children:"\u7c7b\u578b"}),(0,c.jsx)(e.th,{children:"\u901f\u5ea6\uff08Gib/s\uff09"})]})}),(0,c.jsxs)(e.tbody,{children:[(0,c.jsxs)(e.tr,{children:[(0,c.jsx)(e.td,{children:"\u5185\u5b58\u5199"}),(0,c.jsx)(e.td,{children:"9.0"})]}),(0,c.jsxs)(e.tr,{children:[(0,c.jsx)(e.td,{children:"\u5185\u5b58\u8bfb"}),(0,c.jsx)(e.td,{children:"9.3"})]}),(0,c.jsxs)(e.tr,{children:[(0,c.jsx)(e.td,{children:"\u78c1\u76d8\u5199"}),(0,c.jsx)(e.td,{children:"3.2"})]}),(0,c.jsxs)(e.tr,{children:[(0,c.jsx)(e.td,{children:"\u78c1\u76d8\u8bfb"}),(0,c.jsx)(e.td,{children:"2.4"})]})]})]})]})}function x(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,c.jsx)(e,{...n,children:(0,c.jsx)(j,{...n})}):j(n)}},8453:(n,e,r)=>{r.d(e,{R:()=>d,x:()=>t});var s=r(6540);const c={},i=s.createContext(c);function d(n){const e=s.useContext(i);return s.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function t(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(c):n.components||c:d(n.components),s.createElement(i.Provider,{value:e},n.children)}}}]);