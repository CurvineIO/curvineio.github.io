"use strict";(self.webpackChunkcurvine_doc=self.webpackChunkcurvine_doc||[]).push([[8702],{8453:(e,r,n)=>{n.d(r,{R:()=>o,x:()=>l});var s=n(6540);const t={},i=s.createContext(t);function o(e){const r=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function l(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),s.createElement(i.Provider,{value:r},e.children)}},8876:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>c,contentTitle:()=>l,default:()=>d,frontMatter:()=>o,metadata:()=>s,toc:()=>u});const s=JSON.parse('{"id":"Deploy/Deploy-Curvine-Cluster/Preparation/Deployment-Architecture","title":"\u90e8\u7f72\u67b6\u6784","description":"\u7ec4\u4ef6\u4f5c\u7528","source":"@site/i18n/zh-cn/docusaurus-plugin-content-docs/current/2-Deploy/2-Deploy-Curvine-Cluster/1-Preparation/04-Deployment-Architecture.md","sourceDirName":"2-Deploy/2-Deploy-Curvine-Cluster/1-Preparation","slug":"/Deploy/Deploy-Curvine-Cluster/Preparation/Deployment-Architecture","permalink":"/zh-cn/docs/Deploy/Deploy-Curvine-Cluster/Preparation/Deployment-Architecture","draft":false,"unlisted":false,"editUrl":"https://github.com/curvineio/curvine-doc/edit/main/docs/2-Deploy/2-Deploy-Curvine-Cluster/1-Preparation/04-Deployment-Architecture.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"\u90e8\u7f72\u51c6\u5907","permalink":"/zh-cn/docs/Deploy/Deploy-Curvine-Cluster/Preparation/deployment-setup"},"next":{"title":"\u5355\u673a\u6a21\u5f0f","permalink":"/zh-cn/docs/Deploy/Deploy-Curvine-Cluster/Standalone-Mode"}}');var t=n(4848),i=n(8453);const o={sidebar_position:4},l="\u90e8\u7f72\u67b6\u6784",c={},u=[{value:"\u7ec4\u4ef6\u4f5c\u7528",id:"\u7ec4\u4ef6\u4f5c\u7528",level:2},{value:"curvine master, curvine worker \u548c curvine fuse \u7684\u5173\u7cfb",id:"curvine-master-curvine-worker-\u548c-curvine-fuse-\u7684\u5173\u7cfb",level:2},{value:"curvine fuse \u4f7f\u7528\u573a\u666f",id:"curvine-fuse-\u4f7f\u7528\u573a\u666f",level:2}];function a(e){const r={h1:"h1",h2:"h2",header:"header",li:"li",mermaid:"mermaid",p:"p",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.header,{children:(0,t.jsx)(r.h1,{id:"\u90e8\u7f72\u67b6\u6784",children:"\u90e8\u7f72\u67b6\u6784"})}),"\n",(0,t.jsx)(r.mermaid,{value:"flowchart TD\n    subgraph \u5ba2\u6237\u7aef\u5e94\u7528\n        App1[\u5e94\u7528\u7a0b\u5e8f1<br/>FUSE\u6302\u8f7d]\n        App2[\u5e94\u7528\u7a0b\u5e8f2<br/>Hadoop HDFS API]\n        App3[\u5e94\u7528\u7a0b\u5e8f3<br/>S3 SDK]\n    end\n\n    subgraph \u96c6\u7fa4\u5c42\n        subgraph Master\u96c6\u7fa4\n            MasterLeader[Master\u4e3b\u8282\u70b9<br/>Master\u5904\u7406\u5668<br/>RocksDB]\n            MasterFollower1[Master\u4ece\u8282\u70b9<br/>\u65e5\u5fd7\u52a0\u8f7d\u5668<br/>RocksDB]\n            MasterFollower2[Master\u4ece\u8282\u70b9<br/>\u65e5\u5fd7\u52a0\u8f7d\u5668<br/>RocksDB]\n            MasterLeader -. Raft\u590d\u5236 .-> MasterFollower1\n            MasterLeader -. Raft\u590d\u5236 .-> MasterFollower2\n        end\n\n        subgraph Worker\u96c6\u7fa4\n            Worker1[Worker\u8282\u70b91<br/>\u5185\u5b58: 64GB<br/>SSD: 1TB<br/>HDD: 10TB]\n            Worker2[Worker\u8282\u70b92<br/>\u5185\u5b58: 64GB<br/>SSD: 1TB<br/>HDD: 10TB]\n            Worker3[Worker\u8282\u70b93<br/>\u5185\u5b58: 64GB<br/>SSD: 1TB<br/>HDD: 10TB]\n            WorkerN[Worker\u8282\u70b9N<br/>...]\n        end\n    end\n\n    subgraph \u5b58\u50a8\u540e\u7aef\n        S3Bucket[S3\u5b58\u50a8\u6876]\n        HDFSCluster[HDFS\u96c6\u7fa4]\n    end\n\n    App1 --\x3e MasterLeader\n    App1 --\x3e Worker1\n    App2 --\x3e MasterLeader\n    App2 --\x3e Worker2\n    App3 --\x3e MasterLeader\n    App3 --\x3e Worker3\n    MasterLeader --\x3e Worker1\n    MasterLeader --\x3e Worker2\n    MasterLeader --\x3e Worker3\n    MasterLeader --\x3e WorkerN\n    Worker1 -. \u7f13\u5b58\u540e\u7aef .-> S3Bucket\n    Worker2 -. \u7f13\u5b58\u540e\u7aef .-> HDFSCluster\n    Worker3 -. \u7f13\u5b58\u540e\u7aef .-> S3Bucket\n    WorkerN -. \u7f13\u5b58\u540e\u7aef .-> HDFSCluster"}),"\n",(0,t.jsx)(r.h2,{id:"\u7ec4\u4ef6\u4f5c\u7528",children:"\u7ec4\u4ef6\u4f5c\u7528"}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"Master\u8282\u70b9"}),"\uff1a\u8d1f\u8d23\u5143\u6570\u636e\u7ba1\u7406\u3001\u5de5\u4f5c\u8282\u70b9\u534f\u8c03\u548c\u8d1f\u8f7d\u5747\u8861"]}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:"\u7ef4\u62a4\u6587\u4ef6\u7cfb\u7edf\u5143\u6570\u636e\uff08\u76ee\u5f55\u7ed3\u6784\u3001\u6587\u4ef6\u4f4d\u7f6e\u7b49\uff09"}),"\n",(0,t.jsx)(r.li,{children:"\u7ba1\u7406Worker\u8282\u70b9\u6ce8\u518c\u548c\u5065\u5eb7\u68c0\u67e5"}),"\n",(0,t.jsx)(r.li,{children:"\u5904\u7406\u5ba2\u6237\u7aef\u7684\u5143\u6570\u636e\u8bf7\u6c42"}),"\n",(0,t.jsx)(r.li,{children:"\u4f7f\u7528Raft\u5171\u8bc6\u7b97\u6cd5\u786e\u4fdd\u5143\u6570\u636e\u4e00\u81f4\u6027"}),"\n"]}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"Worker\u8282\u70b9"}),"\uff1a\u8d1f\u8d23\u6570\u636e\u5b58\u50a8\u548c\u5904\u7406"]}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:"\u5b58\u50a8\u5b9e\u9645\u6570\u636e\u5757\uff08\u652f\u6301\u5185\u5b58\u3001SSD\u3001HDD\u591a\u7ea7\u7f13\u5b58\uff09"}),"\n",(0,t.jsx)(r.li,{children:"\u5904\u7406\u6570\u636e\u8bfb\u5199\u8bf7\u6c42"}),"\n",(0,t.jsx)(r.li,{children:"\u5b9a\u671f\u5411Master\u53d1\u9001\u5fc3\u8df3"}),"\n",(0,t.jsx)(r.li,{children:"\u652f\u6301\u591a\u526f\u672c\u6570\u636e\u5b58\u50a8"}),"\n"]}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"FUSE\u63a5\u53e3"}),"\uff1a\u63d0\u4f9bPOSIX\u6587\u4ef6\u7cfb\u7edf\u63a5\u53e3\uff0c\u5c06\u5206\u5e03\u5f0f\u7f13\u5b58\u6302\u8f7d\u4e3a\u672c\u5730\u6587\u4ef6\u7cfb\u7edf"]}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"S3 Gateway"}),"\uff1a\u63d0\u4f9bS3\u517c\u5bb9\u7684\u5bf9\u8c61\u5b58\u50a8\u63a5\u53e3\uff0c\u652f\u6301S3 API"]}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"\u5ba2\u6237\u7aef\u5e93"}),"\uff1a\u63d0\u4f9b\u591a\u8bed\u8a00API\uff0c\u901a\u8fc7RPC\u4e0eMaster\u8282\u548cWorker\u8282\u70b9\u901a\u4fe1"]}),"\n",(0,t.jsx)(r.h2,{id:"curvine-master-curvine-worker-\u548c-curvine-fuse-\u7684\u5173\u7cfb",children:"curvine master, curvine worker \u548c curvine fuse \u7684\u5173\u7cfb"}),"\n",(0,t.jsx)(r.mermaid,{value:"flowchart LR\n    subgraph \u5ba2\u6237\u7aef\u5c42\n    App[\u5e94\u7528\u7a0b\u5e8f<br/>ls,cat,cp]\n    fuse[curvine-fuse<br/>FUSE \u5b88\u62a4\u8fdb\u7a0b]\n    App -- POSIX \u7cfb\u7edf\u8c03\u7528 --\x3e fuse\n    end\n    subgraph \u670d\u52a1\u7aef\n    master[curvine-master<br/>\u5143\u6570\u636e\u7ba1\u7406]\n    worker[curvine-worker<br/>\u6570\u636e\u5b58\u50a8]\n    master -- \u534f\u8c03 --\x3e worker\n    end\n    fuse -- RPC \u901a\u4fe1 --\x3e master\n    fuse -- \u6570\u636e\u8bfb\u5199 --\x3e worker"}),"\n",(0,t.jsx)(r.h2,{id:"curvine-fuse-\u4f7f\u7528\u573a\u666f",children:"curvine fuse \u4f7f\u7528\u573a\u666f"}),"\n",(0,t.jsx)(r.p,{children:"\u5f53\u9700\u8981\u8ba9\u73b0\u6709\u5e94\u7528\u7a0b\u5e8f\u65e0\u9700\u4fee\u6539\u5373\u53ef\u8bbf\u95ee Curvine \u5206\u5e03\u5f0f\u7f13\u5b58\u65f6\uff0c\u4f7f\u7528 FUSE \u53ef\u4ee5\u5c06 Curvine \u6302\u8f7d\u4e3a\u672c\u5730\u6587\u4ef6\u7cfb\u7edf\u3002"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:["\u9ed8\u8ba4\u6302\u8f7d\u70b9","\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:"/curvine-fuse"}),"\n",(0,t.jsx)(r.li,{children:"/var/lib/curvine-fuse \uff08Kubernetes \u73af\u5883\uff09"}),"\n"]}),"\n"]}),"\n"]})]})}function d(e={}){const{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}}}]);